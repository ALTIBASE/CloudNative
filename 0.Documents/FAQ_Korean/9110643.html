<!DOCTYPE html>
<html>
    <head>
        <title>FAQ(한국어) : Solaris에서 OS booting 시 자동 altibase startup</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">FAQ(한국어)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_6062093.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="6520882.html">02. 운영 및 관리</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            FAQ(한국어) : Solaris에서 OS booting 시 자동 altibase startup
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> Shin beum-su</span>, last modified on Dec 24, 2015
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="Solaris에서OSbooting시자동altibasestartup-요약">요약</h1><p> Sun Solaris에서 booting시 자동으로 Altibase server를 startup하는 스크립트 작성 방법 입니다. </p><h1 id="Solaris에서OSbooting시자동altibasestartup-방법">방법</h1><p>Solaris는 run level과 관계가 있는 rc스크립트를 제공합니다. 이 스크립트들은 /sbin 디렉토리 안에 존재하며 /etc 디렉토리의 rc 스크립트와 심볼릭 링크되어 있습니다.</p><p>/sbin/rc# 스크립트들은 그들과 일치하는 이름의 /etc/rc#.d 디렉토리 아래에 해당하는 파일들이 존재하는데, /etc/rc#.d 디렉토리에는 run level을 위해 시스템 프로세스를 start하고 stop하는 스크립트들을 포함하고 있습니다.</p><p>이 디렉토리 안에 존재하는 파일들을 파일명이 K와 S로 시작하며, K* 스크립트는 프로세스 kill할 때 사용되며, S* 스크립트는 프로세스를 start할 때 사용됩니다. 이들 파일은 alphanumeric 순으로 수행됩니다.</p><p>/etc/init.d 디렉토리 안에는 프로세스를 start 시키거나 또는 kill 시키는 실질적인 run control 파일들이 존재하는데 이들은 etc/rc#.d 디렉토리와 하드링크 되어 있습니다.</p><h1 id="Solaris에서OSbooting시자동altibasestartup-단계">단계</h1><h3 id="Solaris에서OSbooting시자동altibasestartup-STEP1">STEP1</h3><p> /etc/alti-conf.d/alti.conf file을 만듭니다. 이 file에서는 자동 구동시 필요한 변수들을 정의하고 Setting합니다. 이 file의 내용은 아래와 같습니다.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p><span style="color: rgb(0,51,102);"><strong>ALTIBASE_HOME=/home/altibase/altibase_home ; export ALTIBASE_HOME</strong></span> <br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>PATH=$ALTIBASE_HOME/bin:/usr/bin:/sbin ; export PATH</strong></span> <br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>ALTIBASE_OWNER=altibase</strong></span> <br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>START_ALTIBASE=1</strong></span></p></th></tr></tbody></table></div><p>만약 자동 구동을 하고 싶지 않다면 START_ALTIBASE의 값을 0으로 맞추면 됩니다. 그리고 ALTIBASE_OWNER나 ALTIBASE_HOME이 변경되었을 경우에는 반드시 이 File에 있는 값을 수정 해 주어야 합니다.</p><h3 id="Solaris에서OSbooting시자동altibasestartup-STEP2">STEP2</h3><p>/etc/init.d/alti_start file을 만든다. 이 script에서는 알티베이스 구동 명령어를 이용해서 실제로 DBMS를 startup하는 script 입니다.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p><span style="color: rgb(0,51,102);">#!/sbin/sh</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);">if [ -f /etc/alti-conf.d/alti.conf ] ; then</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);">. /etc/alti-conf.d/alti.conf</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);">Fi</span><span style="color: rgb(0,51,102);"> </span></p><p>{*}ADMIN="$</p>
<div class="error"><span class="error">Unknown macro: {ALTIBASE_HOME}</span> </div>
<p>/bin/isql &#45;s 127.0.0.1 &#45;u sys &#45;p manager &#45;sysdba"*</p><p><span style="color: rgb(0,51,102);"> </span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"> </span></p><p>*$</p>
<div class="error"><span class="error">Unknown macro: {ADMIN}</span> </div>
<p> &lt;&lt;EOF{*}</p><p><span style="color: rgb(0,51,102);"> </span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>startup</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>quit</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>EOF</strong></span></p></th></tr></tbody></table></div><p> </p><h3 id="Solaris에서OSbooting시자동altibasestartup-STEP3">STEP3 </h3><p>/etc/init.d/alti_stop file을 만듭니다.</p><p>이 script에서는 알티베이스 구동 명령어를 이용해서 실제로 DBMS를 stop하는 script입니다.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p><span style="color: rgb(0,51,102);">#!/sbin/sh</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);">if [ -f /etc/alti-conf.d/alti.conf ] ; then</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);">. /etc/alti-conf.d/alti.conf</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);">fi</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"> </span></p><p>ADMIN="$</p>
<div class="error"><span class="error">Unknown macro: {ALTIBASE_HOME}</span> </div>
<p>/bin/isql &#45;s 127.0.0.1 &#45;u sys &#45;p manager &#45;sysdba"</p><p>*$</p>
<div class="error"><span class="error">Unknown macro: {ADMIN}</span> </div>
<p> &lt;&lt;EOF{*}</p><p><span style="color: rgb(0,51,102);"> </span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>shutdown immediate</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>quit</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>EOF</strong></span></p></th></tr></tbody></table></div><p> </p><h3 id="Solaris에서OSbooting시자동altibasestartup-STEP4"> STEP4</h3><p>/etc/init.d/altibase file을 만듭니다.</p><p>이 file은 실제로 나중에 startup script나 stop script가 symbolic link를 만들 file입니다. 이 file의 내용은 아래와 같습니다.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p><span style="color: rgb(0,51,102);"><strong>#!/sbin/sh</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>#</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong># Copyright (c) 1997, 2001 by Sun Microsystems, Inc.</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong># All rights reserved.</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>#</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>#ident &quot;@(#)altibase 1.0 04/08/17&quot;</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>case $1 in</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>'start')</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong># source the system configuration variables</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>if [ -f /etc/alti-conf.d/alti.conf ] ; then</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>. /etc/alti-conf.d/alti.conf</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>else</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>echo &quot;ERROR: /etc/alti-conf.d/alti.conf defaults file MISSING&quot;</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>fi</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong># Check to see if this script is allowed to run...</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>if [ &quot;$START_ALTIBASE&quot; != 1 ]; then</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>exit 2</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>else</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong># Execute the commands to start your subsystem</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>su - $ALTIBASE_OWNER -c &quot;/etc/init.d/alti_start&quot;</strong></span> <br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>fi</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>;;</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>'stop')</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong># source the system configuration variables</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>if [ -f /etc/alti-conf.d/alti.conf ] ; then</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>. /etc/alti-conf.d/alti.conf</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>else</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>echo &quot;ERROR: /etc/alti-conf.d/alti.conf defaults file MISSING&quot;</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>fi</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong># Check to see if this script is allowed to run...</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>if [ &quot;$START_ALTIBASE&quot; != 1 ]; then</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>exit 2</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>else</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>su - $ALTIBASE_OWNER -c &quot;/etc/init.d/alti_stop&quot;</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong># Execute the commands to stop your subsystem</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>fi</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>;;</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>*)</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"> </span></p><p>{*}echo "usage: $0 </p>
<div class="error"><span class="error">Unknown macro: {start|stop}</span> </div>
<p>"*</p><p><span style="color: rgb(0,51,102);"> </span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>exit 1</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>;;</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>esac</strong></span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"><strong>exit 0</strong></span></p></th></tr></tbody></table></div><p> </p><h3 id="Solaris에서OSbooting시자동altibasestartup-STEP5">STEP5</h3><p>/etc/rc3.d Directory에서 Startup Script와 Shutdown Script의 Hard Link를 만듭니다.  </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p><span style="color: rgb(0,51,102);">#cd /etc/rc3.d</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"># ln /etc/init.d/altibase S955altibase</span></p></th></tr></tbody></table></div><p> </p><h3 id="Solaris에서OSbooting시자동altibasestartup-STEP6">STEP6</h3><p>각각의 Script가 정상적으로 수행될 수 있도록 수행 권한을 Setting합니다.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p><span style="color: rgb(0,51,102);">#cd /etc/rc3.d</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"># chmod 755 S955altibase</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);">#cd /etc/init.d</span><br class="atl-forced-newline" /> <span style="color: rgb(0,51,102);"># chmod 755 *alti*</span></p></th></tr></tbody></table></div><p> </p><h3 id="Solaris에서OSbooting시자동altibasestartup-STEP7">STEP7</h3><p> 정상적으로 동작하는 지 Test를 해봅니다. 이 때 Test는 root계정에서 수행해 보아야 합니다.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p><span style="color: rgb(0,51,102);"># /etc/init.d/altibase &lt;start:stop&gt;</span></p></th></tr></tbody></table></div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:44</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
