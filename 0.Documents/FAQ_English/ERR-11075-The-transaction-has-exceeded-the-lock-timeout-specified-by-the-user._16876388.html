<!DOCTYPE html>
<html>
    <head>
        <title>FAQ(English) : ERR-11075 The transaction has exceeded the lock timeout specified by the user.</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">FAQ(English)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_6979649.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="09.-Error-Messages_16876299.html">09. Error Messages</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            FAQ(English) : ERR-11075 The transaction has exceeded the lock timeout specified by the user.
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> richard.nahm	</span>, last modified on Apr 05, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1624409148395 {padding: 0px;}
div.rbtoc1624409148395 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1624409148395 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1624409148395'>
<ul class='toc-indentation'>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Overview'>Overview</a></li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Version'>Version</a></li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Symptom'>Symptom</a>
<ul class='toc-indentation'>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-1.OccurwhenexecutingaDDLstatement'>1. Occur when executing a DDL statement</a></li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-2.Occurswhenachangetransactionisperformedonthememorytable'>2. Occurs when a change transaction is performed on the memory table</a></li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-3.OccurwhenexecutingaSELECTstatementusingSELECTFORUPDATEWAITN(orNOWAIT)'>3. Occur when executing a SELECT statement using SELECT FOR UPDATE WAIT N (or NOWAIT)</a></li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-4.Occurinaltibase_rp.loginareplicationenvironment'>4. Occur in altibase_rp.log in a replication environment</a></li>
</ul>
</li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Cause'>Cause </a>
<ul class='toc-indentation'>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-1.OccurwhenexecutingaDDLstatement.1'>1. Occur when executing a DDL statement</a></li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-2.Occurwhenachangetransactionisperformedonthememorytable'>2. Occur when a change transaction is performed on the memory table</a></li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-3.OccurwhenSELECTFORUPDATEWAITN(orNOWAIT)isexecuted'>3. Occur when SELECT FOR UPDATE WAIT N (or NOWAIT) is executed</a></li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-4.Occursinaltibase_rp.loginareplicationenvironment'>4. Occurs in altibase_rp.log in a replication environment</a></li>
</ul>
</li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Solution'>Solution</a></li>
<li><a href='#ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Reference'>Reference</a></li>
</ul>
</div></p><p> </p><h1 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Overview">Overview</h1><hr /><p>Error messages that may occur when performing change transactions.</p><p> </p><h1 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Version">Version</h1><hr /><p>This error message can occur in all versions of Altibase, but the error message differs depending on the version of the Altibase server.</p><ul><li><span style="color: rgb(0,0,0);">ALTIBASE HDB 4.3.9 ~ 5.3.3</span><br /><span style="color: rgb(0,0,0);">ERR-11075 (  69749) The transaction exceeds the lock timeout specified by user. </span><br /><span style="color: rgb(0,0,0);"><br /></span></li><li><span style="color: rgb(0,0,0);">ALTIBASE HDB 5.5.1 or later</span><br /><span style="color: rgb(0,0,0);">ERR-11075 (  69749) The transaction has exceeded the lock timeout specified by the user. </span></li></ul><p><span style="color: rgb(0,0,0);"><br /></span></p><h1 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Symptom"><span style="color: rgb(0,0,0);">Symptom</span></h1><hr /><p><span style="color: rgb(0,0,0);">The following are examples of some of the most common symptoms in which this error message occurs.</span></p><h3 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-1.OccurwhenexecutingaDDLstatement"><span style="color: rgb(0,0,0);">1. Occur when executing a DDL statement</span></h3><p><span style="color: rgb(0,0,0);"> </span></p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr><th class="confluenceTh">Session-1</th><th class="confluenceTh"><p>Session-2</p><p>DDL(truncate문) 수행 시 에러 발생</p></th></tr><tr><td class="confluenceTd"><span style="color: rgb(0,0,0);">autocommit off;</span><span style="color: rgb(0,0,0);"> </span></td><td class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd"><span style="color: rgb(0,0,0);">update test_emp_tbl </span><span style="color: rgb(0,0,0);">set emp_no = 10;                              <br /></span></td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">while executing update...</td><td colspan="1" class="confluenceTd"><span style="color: rgb(0,0,0);">truncate table </span><span style="color: rgb(0,0,0);">test_emp_tbl;                        </span><span style="color: rgb(0,0,0);"> </span><br /><span style="color: rgb(0,0,0);">[ERR-11075 : The transaction has exceeded the lock timeout specified by the user.] </span></td></tr></tbody></table></div><p><span style="color: rgb(0,0,0);"> </span></p><p> </p><h3 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-2.Occurswhenachangetransactionisperformedonthememorytable">2. Occurs when a change transaction is performed on the memory table</h3><div class="table-wrap"><table class="confluenceTable"><thead style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th class="confluenceTh"><div class="tablesorter-header-inner"><p>Session-1</p></div></th><th class="confluenceTh"><div class="tablesorter-header-inner" style="margin-left: 30.0px;"><p>Session-2</p></div></th></tr></thead><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>iSQL&gt; autocommit off; <br class="atl-forced-newline" /> Set autocommit off success.</p><p><br class="atl-forced-newline" /> iSQL&gt; update tb_test1 set c10=sysdate where c1=1; <br class="atl-forced-newline" /> 1 row updated.</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p> </p></td><td class="confluenceTd"><p>iSQL&gt; select count(*) from tb_test1; <br class="atl-forced-newline" /> COUNT                 <br class="atl-forced-newline" /> ----------------------- <br class="atl-forced-newline" /> 1000000               <br class="atl-forced-newline" /> 1 row selected.</p><p><br class="atl-forced-newline" /> iSQL&gt; alter session set TRX_UPDATE_MAX_LOGSIZE=100000000; <br class="atl-forced-newline" /> Alter success.</p><p>iSQL&gt; alter system set LOCK_ESCALATION_MEMORY_SIZE=100000000; <br class="atl-forced-newline" /> Alter success.</p><p><br class="atl-forced-newline" /> iSQL&gt; update tb_test1 set c10=sysdate; <br class="atl-forced-newline" /> [ERR-11075 : The transaction has exceeded the lock timeout specified by the user.]</p></td></tr></tbody></table></div><h3 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-3.OccurwhenexecutingaSELECTstatementusingSELECTFORUPDATEWAITN(orNOWAIT)">3. Occur when executing a SELECT statement using SELECT FOR UPDATE WAIT N (or NOWAIT)</h3><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Session-1</th><th class="confluenceTh">Session-2</th></tr><tr><td class="confluenceTd">autocommit off; <br />update test_emp_tbl set emp_no = 10; </td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd"> </td><td class="confluenceTd">select * from test_emp_tbl for update wait 1; <br />[ERR-11075 : The transaction has exceeded the lock timeout specified by the user.]</td></tr><tr><td class="confluenceTd"> </td><td class="confluenceTd"><span style="color: rgb(68,68,68);">select * from test_emp_tbl for update nowait;</span><br /><span style="color: rgb(68,68,68);">[ERR-11075 : The transaction has exceeded the lock timeout specified by the user.]  </span></td></tr></tbody></table></div><h3 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-4.Occurinaltibase_rp.loginareplicationenvironment">4. Occur in altibase_rp.log in a replication environment</h3><p>In a replication environment, an error may occur in $ALTIBASE_HOME/trc/altibase_rp.log.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">[2014/08/28 13:00:14] [FAQINTERNAL:Thread-1398925664] [FAQINTERNAL:Level-2] 
ERR-11075(errno=0) The transaction has exceeded the lock timeout specified by the user. 
[2014/08/28 13:00:14] [FAQINTERNAL:Thread-1398925664] [FAQINTERNAL:Level-3] 
INSERT INTO SYS.TB_TEST1 VALUES ( 1000001, , , , , , , , , 2014-08-28 13:00:09.960371 ); (TID : 35456)</pre>
</div></div><p> </p><h1 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Cause"><span style="color: rgb(0,0,0);">Cause</span> </h1><hr /><p><span style="color: rgb(0,0,0);">This error occurs when trying to acquire a lock on an object, but the object is already locked and the lock cannot be acquired.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: bash; gutter: false" style="font-size:12px;">$ altierr 0x11075
0x11075 (  69749) smERR_ABORT_smcExceedLockTimeWait The transaction has exceeded the lock timeout specified by the user. 
# *Cause: The transaction failed to lock the object.
# *Action: Increase the transaction&#39;s lock timeout value or check whether the data has a transaction with a long-term lock.</pre>
</div></div><p> </p><div><h3 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-1.OccurwhenexecutingaDDLstatement.1">1. Occur when executing a DDL statement</h3><p>When executing DDL statements, if the target table is already locked by another transaction, DDL execution may fail because the LOCK for DDL execution cannot be acquired immediately.</p><p>This may behave differently depending on the DDL_LOCK_TIMEOUT setting of the Altibase server property.</p><ul><li style="list-style-type: none;background-image: none;"><ul><li><p>DDL_LOCK_TIMEOUT = 0 (default)<br />If the LOCK is not acquired, it is immediately failed.</p></li><li>DDL_LOCK_TIMEOUT = 1<br />If it cannot acquire LOCK, it waits indefinitely</li><li><pre class="tw-data-text tw-text-large XcVN5d tw-ta"><span lang="en">DDL_LOCK_TIMEOUT = seconds </span></pre><pre class="tw-data-text tw-text-large XcVN5d tw-ta"><span lang="en">If LOCK is not acquired during DDL execution, wait for the specified time and try again. </span></pre><pre class="tw-data-text tw-text-large XcVN5d tw-ta"><span lang="en">If the LOCK is not acquired even when trying again, it will fail.</span></pre></li></ul></li></ul><h3 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-2.Occurwhenachangetransactionisperformedonthememorytable">2. Occur when a change transaction is performed on the memory table</h3><p>When the size of the transaction log file exceeds the value of the LOCK_ESCALATION_MEMORY_SIZE property due to a change transaction performed on the memory table, it switches from record level IX_LOCK to table level X_LOCK. At this time, if IX_LOCK is locked on another record of the table in another session, the table level X_LOCK acquisition may fail and an error may occur.</p></div><h3 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-3.OccurwhenSELECTFORUPDATEWAITN(orNOWAIT)isexecuted">3. Occur when SELECT FOR UPDATE WAIT N (or NOWAIT) is executed</h3><p>A SELECT statement using SELECT FOR UPDATE WAIT N or SELECT FOR UPDATE NOWAIT locks the record and executes it.</p><p>However, if a lock is first locked in another session on the same table, an error may occur because the lock cannot be acquired.</p><h3 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-4.Occursinaltibase_rp.loginareplicationenvironment">4. Occurs in altibase_rp.log in a replication environment</h3><p>When the transaction to be reflected is waiting for the transaction of the local server to be finished.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner"><p>Active Server</p></div></th><th class="confluenceTh"><div class="tablesorter-header-inner"><p>Standby Server</p></div></th></tr></thead><tbody><tr><td class="confluenceTd"><p>alter replication rep1 start;</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p> </p></td><td class="confluenceTd"><p>iSQL&gt;  autocommit off; <br class="atl-forced-newline" /> Set autocommit off success. <br class="atl-forced-newline" /> iSQL&gt; insert into tb_test1(c1,c10) values(1000001, sysdate); <br class="atl-forced-newline" /> 1 row inserted.</p></td></tr><tr><td class="confluenceTd"><p>iSQL&gt; autocommit off; <br class="atl-forced-newline" /> Set autocommit off success. <br class="atl-forced-newline" /> iSQL&gt; insert into tb_test1(c1,c10) values(1000001, sysdate); <br class="atl-forced-newline" /> 1 row inserted.</p></td><td class="confluenceTd"><p> </p></td></tr></tbody></table></div><p>The insert statement of the active server should be reflected in the standby server, but when the replication transaction cannot be reflected due to the local transaction of the standby server, an error message is recorded in altibase_rp.log.</p><p>This symptom is affected by the value of the REPLICATION_LOCK_TIMEOUT property.</p><p>If the server reflecting the redundancy log (standby server in the example above) does not acquire LOCK within the REPLICATION_LOCK_TIMEOUT (seconds) time, the above error occurs and the redundant transaction attempted to reflect fails.</p><p> </p><h1 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Solution">Solution</h1><hr /><ul><li><strong>Occur when executing DDL</strong><br />Generally, it is recommended to perform DDL in idle time. If the service is not stopped, X LOCK acquisition may fail instantaneously. If an error occurs, try performing DDL several times. If the same error still occurs, check whether the target table is busy or there is a long-run query (a query that takes a long time to execute or a query that has not been committed), and execute DDL again after taking action.</li><li><strong>Occur when performing a change transaction in memory</strong><br />If the above error occurs due to LOCK_ESCALATION_MEMORY_SIZE, there is a high possibility of a large amount of change transactions.<br />Make sure not to make a large number of change operations. It is recommended that the number of records to be changed is reduced by using conditional clauses and limit clauses and divided into multiple times to perform change transactions.</li><li><strong>Occur when executing SELECT FOR UPDATE statement</strong><br />Repeat the SELECT FOR UPDATE statement until it succeeds.<br />Find uncommitted transactions and commit or rollback.<br />Increase the time of the WAIT option.</li><li><p><strong>Occur in a replication environment</strong><br />When designing for replication, consideration should be given to avoiding simultaneous changes on both servers for the same record.<br />When this error occurs, it may cause a problem with the data integrity of both servers, so the data must be checked.</p><p> </p></li></ul><h1 id="ERR-11075Thetransactionhasexceededthelocktimeoutspecifiedbytheuser.-Reference">Reference</h1><hr /><ul><li><p class="with-breadcrumbs">Additional explanation regarding LOCK_ESCALATION_MEMORY_SIZE<br /><a href="https://aid.altibase.com/pages/viewpage.action?pageId=8454818" class="external-link" rel="nofollow">ERR-11118 ( 69912) The update log size '?????' is bigger than TRX_UPDATE_MAX_LOGSIZE '?????'</a></p></li></ul><p> </p><p> </p><p> </p><p> </p><p> </p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:45</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
