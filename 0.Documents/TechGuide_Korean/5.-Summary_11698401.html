<!DOCTYPE html>
<html>
    <head>
        <title>Technical Documents(한국어) : 5. Summary</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Technical Documents(한국어)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_7340036.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="11698396.html">Altibase CPU과부하 현상에 대한 분석가이드</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Technical Documents(한국어) : 5. Summary
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> Shin beum-su</span> on Mar 29, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <hr /><p>앞에서 설명한 대로 각 항목들에 대해 사용자가 어떻게 일상적으로 점검하고 CPU과부하에 대한 원인을 찾을지에 대해 정리한다.</p><h1 id="id-5.Summary-5.1단계적점검방법">5.1 단계적 점검방법</h1><h2 id="id-5.Summary-5.1분석을위한데이타수집">5.1 분석을 위한 데이타 수집</h2><p>현재의 CPU 부하가 정상적인지 유무를 판단하기 위한 데이타를 수집한다.  OS에서 제공하는 command와   앞서 설명한  &quot;1.1 일상적 점검사항&quot;에서와 같이 Altibase의  시간대별/일별 CPU 사용량, 트랜잭션 처리량등의 정보를 수집한 후 트랜잭션처리량의 증가로 인한 정상적인 CPU 사용량 증가인지 여부를 판단한다.</p><h2 id="id-5.Summary-5.2원인분석"><span style="color: rgb(0,0,0);">5.2 원인 분석</span></h2><h3 id="id-5.Summary-5.2.1Application변경의영향과관련이있는지점검">5.2.1 <span style="color: rgb(0,0,0);">Application 변경의 영향과 관련이 있는지 점검</span></h3><p>신규로 추가된 서비스(응용프로그램) 이 있으며 신규 추가된 서비스의 운영시점과 CPU 부하량 증가시점이 일치한다면  신규 추가된 서비스의 연관성을 확인해 볼 필요성이 있다.</p><h3 id="id-5.Summary-5.2.2데이터증가와의관련성및쿼리플랜변경유무확인"><span style="color: rgb(0,0,0);">5.2.2 데이터 증가와의 관련성 및 쿼리 플랜 변경 유무 확인</span></h3><p><span style="color: rgb(0,0,0);"> </span>시간이 경과하면서 데이터 누적으로 인해서 Access 비용으로 인한 CPU증가 인지 여부를 확인해야 한다.   Altibase 구버전(6.1.1 이하) 은  통계수집이 특정 조건에 따라서 자동으로 이루어지는 기능을 갖고 있다.   통계 정보 갱신으로 인해서  옵티마이저가 기존에 돌던 쿼리의 플랜보다  비효율적인 플랜을 선택 사용한 경우 이로 인한 Access cost 증가는 CPU 사용량 증가를 유발할 수 있다.</p><h3 id="id-5.Summary-5.2.3DB와응용프로그램Characterset불일치">5.2.3 DB와 응용프로그램 Character set 불일치</h3><p>문자 셋(NLS_USE)의 설정이 DB와 응용프로그램이 다른 경우 내부적인 문자 셋의 변환작업(Encoding)으로 인해 Altibase 성능이 저하되고 CPU사용량이 높아지는 현상이 보고된 사례가 있다.</p><h3 id="id-5.Summary-5.2.4서비스쓰레드증가">5.2.4 서비스쓰레드 증가</h3><p>세션 요청을 처리하는  dedicated 서비스쓰레드가 증가한 상태인 경우 주기적으로 요청이 존재하는지 여부를 검사하기 위한  'select-poll'  system call 함수의  증가로 인해서  sys CPU 사용량이 증가하는 경우가 있다.</p><h3 id="id-5.Summary-5.2.5OS환경변수의영향">5.2.5 OS 환경변수의 영향</h3><p>OS 환경변수 설정에 따른 CPU사용량의 변화가 있을 수 있는데 Altibase는 멀티쓰레드 구조를 채택하기 때문에 OS의 설정에 대해 이와 관련된 설정을 적절하게 할 필요가 있다.</p><h3 id="id-5.Summary-5.2.6빈번한DBConnection시도">5.2.6 빈번한 DB Connection 시도</h3><p>DB에 접속하고 해제하는 과정은 DB 자원을 소모하는 작업이며  반복적인  DB 접속/해제를 하는 구조에서는 악성질의를 탐지하기도 어렵다.  또한  Statement 를  Prepare하고 사용할 수 없으므로  쿼리의  성능 저하의 요인이 될 수도 있다.</p><h2 id="id-5.Summary-5.2OS유틸리티를통한탐색"><strong style="font-size: 24.0px;">5.2 OS 유틸리티를 통한 탐색</strong></h2><p>Altibase는 Multi-Thread Architecture를 채택하고 있다. 따라서, 내부의 특정 쓰레드가 비정상적으로 CPU를 많이 사용하지 않는지 파악해볼 필요가 있다. 이 경우 OS별로 제공되는 유틸리티를 통해 쓰레드별 CPU사용량 및 현재의 상태를 알아낼 수 있는데 관련된 자세한 방법은 다음 문서를 참고하도록 한다. </p><p>('문제분석을 위한 OS별 유틸리티 가이드' 문서 참고)</p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:57</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
