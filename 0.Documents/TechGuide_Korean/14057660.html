<!DOCTYPE html>
<html>
    <head>
        <title>Technical Documents(한국어) : Altibase 도커 가이드</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Technical Documents(한국어)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_7340036.html">Home</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Technical Documents(한국어) : Altibase 도커 가이드
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> heejung lee</span>, last modified by <span class='editor'> richard.nahm	</span> on Feb 22, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1624409856369 {padding: 0px;}
div.rbtoc1624409856369 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1624409856369 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1624409856369'>
<ul class='toc-indentation'>
<li><a href='#Altibase도커가이드-개요'>개요 </a></li>
<li><a href='#Altibase도커가이드-도커개요'>도커 개요 </a></li>
<li><a href='#Altibase도커가이드-도커설치'>도커 설치 </a></li>
<li><a href='#Altibase도커가이드-Altibase도커이미지'>Altibase 도커 이미지  </a>
<ul class='toc-indentation'>
<li><a href='#Altibase도커가이드-Altibase도커이미지다운로드'>Altibase 도커 이미지 다운로드 </a></li>
<li><a href='#Altibase도커가이드-Altibase도커이미지만들기'>Altibase 도커 이미지 만들기</a></li>
</ul>
</li>
<li><a href='#Altibase도커가이드-Altibase서비스컨테이너생성'>Altibase 서비스  컨테이너 생성 </a>
<ul class='toc-indentation'>
<li><a href='#Altibase도커가이드-컨테이너생성'>컨테이너 생성</a></li>
<li><a href='#Altibase도커가이드-컨테이너간이중화연결'>컨테이너 간 이중화 연결</a></li>
<li><a href='#Altibase도커가이드-Altibase데이터베이스구성'>Altibase 데이터베이스 구성</a></li>
<li><a href='#Altibase도커가이드-Altibase서버접속'>Altibase 서버 접속</a></li>
</ul>
</li>
<li><a href='#Altibase도커가이드-Altibase서비스컨테이너중지'>Altibase 서비스 컨테이너 중지</a></li>
<li><a href='#Altibase도커가이드-Altibase서비스컨테이너삭제'>Altibase 서비스 컨테이너 삭제</a></li>
<li><a href='#Altibase도커가이드-참고'>참고</a></li>
</ul>
</div></p><p><span style="color: rgb(0,0,255);"><br /></span></p><p><span style="color: rgb(0,0,255);"><br /></span></p><h1 id="Altibase도커가이드-개요">개요<span style="color: rgb(0,0,255);"> </span></h1><hr /><p>이 문서는 도커 이미지를 이용하여 Altibase 컨테이너를 생성하여 서비스 하기 위한 가이드이다. </p><p>이 문서에서는 도커 19.03.2 버전을 기준으로  Altibase 도커 이미지를 생성하고 컨테이너를 생성하여 서비스하는 방법에 대해 기술한다.</p><ul><li>Altibase 7.1.1 이상</li><li>Docker 19.03.2 이상</li></ul><p> </p><p> </p>    <div class="aui-message warning shadowed information-macro">
                            <span class="aui-icon icon-warning">Icon</span>
                <div class="message-content">
                            <p>이 문서와 관련된 오류 및 개선사항은 기술지원포털 또는 기술지원센터로 문의주시기 바랍니다.</p><ul style="text-decoration: none;text-align: left;margin-left: 0.0px;"><li>기술지원포털 : <a href="http://support.altibase.com/" style="text-decoration: none;" class="external-link" rel="nofollow">http://support.altibase.com</a> ▶ 기술 지식 ▶ Q&amp;A</li><li>기술지원센터 : 02-2082-1114</li></ul>
                    </div>
    </div>
    <div class="aui-message warning shadowed information-macro">
                            <span class="aui-icon icon-warning">Icon</span>
                <div class="message-content">
                            <p>이 문서는 정보 제공을 목적으로 제공되며, 사전에 예고 없이 변경될 수 있습니다. 이 문서는 오류가 있을 수 있으며, 상업적 또는 특정 목적에 부합하는 명시적, 묵시적인 책임이 일절 없습니다. 이 문서에 포함된 Altibase 제품의 특징이나 기능의 개발, 발표 등의 시기는 Altibase 재량입니다. Altibase는 이 문서에 대하여 관련된 특허권, 상표권, 저작권 또는 기타 지적 재산권을 보유할 수 있습니다.</p>
                    </div>
    </div>
<p><span style="color: rgb(0,0,255);"><br /></span></p><p><span style="color: rgb(0,0,255);"><br /></span></p><h1 id="Altibase도커가이드-도커개요">도커 개요<span style="color: rgb(0,0,255);"> </span></h1><hr /><ul><li><p><span>도커는 Docker.Inc에서 제공하는 컨테이너 기반의 오픈소스 가상 플랫폼이다. <br />도커 기술은 Linux 커널과 함께 Cgroups 및 네임스페이스와 같은 커널의 기능을 사용하여 프로세스를 분리함으로써 독립적으로 실행될 수 있도록 해 주며 컨테이너를 실행하는 기능 뿐만 아니라 컨테이너 생성 및 구축, 이미지 전송, 이미지 버전 관리 프로세스를 용이하게 해 준다.<br />이는 가상화 기술의 하나이지만 기존 가상머신과 비교시 게스트 OS가 필요없고 프로세스 단위로 격리되어 필요한 만큼만 CPU, 메모리 등을 사용함으로써 가상화로 인한 손실이 거의 발생되지 않는다.<br /><br /><strong>          • 도커와 가상머신의 구조 비교 </strong></span></p><p>         <img class="confluence-embedded-image" width="646" src="attachments/14057660/14221346.jpg" data-image-src="attachments/14057660/14221346.jpg"></p><p>                                                                               자료출처 : <a href="https://www.docker.com/resources/what-container" class="external-link" rel="nofollow">https://www.docker.com/resources/what-container</a></p><p> </p></li><li><p>도커에서 중요한 개념은 이미지와 컨테이너이다. <br />        • 이미지 :컨테이너 실행에 필요한 파일과 설정값등을 포함하고 있는 것으로 변하지 않는다<br />                     베이스 이미지 : 리눅스 배포판의 기본 파일만 설치된 파일이다. <br />                     도커 이미지 : 베이스 이미지에 필요한 프로그램과 라이브러리, 소스를 설치한 뒤 파일 하나로 만든 것이다. <br />                                           이 문서에서 이미지라 함은 베이스 이미지에 Altibase 데이터베이스와 필요한 라이브러리를 설치한 뒤 파일 하나로 만든 도커 이미지를 의미한다.  <br />        • 컨테이너 : 이미지를 실행한 상태로 추가되거나 변경되는 값은 모두 컨테이너에 저장된다. <br />                            즉, 동일한 이미지로 다중 컨테이너를 만들경우 하부 이미지에 대한 접근은 공유하나 각각의 컨테이너는 각자의 데이터를 가지고 있게된다.<br />       </p><p><span><strong>        </strong>•<strong> 이미지와 컨테이너의 관계<br /></strong><strong>          <img class="confluence-embedded-image" width="646" src="attachments/14057660/14221347.jpg" data-image-src="attachments/14057660/14221347.jpg"><br /></strong></span>                                                                                                                         자료출처 : <a href="https://docs.docker.com/v17.09/engine/userguide/storagedriver/imagesandcontainers/#container-and-layers" class="external-link" rel="nofollow">https://docs.docker.com</a></p></li></ul><p><span style="color: rgb(0,0,255);"> </span></p><p><span style="color: rgb(0,0,255);"><br /></span></p><p><span style="color: rgb(0,0,255);"><br /></span></p><p><span style="color: rgb(0,0,255);"> </span></p><h1 id="Altibase도커가이드-도커설치">도커 설치<span style="color: rgb(0,0,255);"> </span></h1><hr /><ul><li><span style="color: rgb(0,0,255);"> </span>이 문서에서는 ubuntu 리눅스에 설치하는 방법을 기준으로 한다.<br />ubuntu나 centos가 아닌 경우는 <a href="https://docs.docker.com/install/" class="external-link" rel="nofollow">도커 설치페이지</a>를 참고로 하여 설치하도록 한다.</li><li>도커를 실행하기 위한 커널버전은 3.10.X 이상이다.</li><li>도커는 root권한이 필요하다. root가 아닌 사용자가 sudo 없이 사용하려면 docker 그룹에 해당 사용자를 추가한다<br /><h3 id="Altibase도커가이드-1도커설치">1 도커 설치</h3><ul><li><p>도커는 리눅스 배포판의 종류에 따라 도커 패키지를 설치해 주는 스크립트를 제공한다.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># sudo wget -qO- http://get.docker.com/ | sh
또는
# curl -fsSL https://get.docker.com/ | sudo sh
</pre>
</div></div></li></ul><h3 id="Altibase도커가이드-2도커설치확인">2 도커 설치 확인</h3><ul><li><p>설치가 완료되면 docker version을 이용하여 확인 가능하다.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker version
Client: Docker Engine - Community
 Version:           19.03.2
 API version:       1.40
 Go version:        go1.12.8
 Git commit:        6a30dfc
 Built:             Thu Aug 29 05:29:11 2019
 OS/Arch:           linux/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          19.03.2
  API version:      1.40 (minimum version 1.12)
  Go version:       go1.12.8
  Git commit:       6a30dfc
  Built:            Thu Aug 29 05:27:45 2019
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.2.6
  GitCommit:        894b81a4b802e4eb2a91d1ce216b8817763c29fb
 runc:
  Version:          1.0.0-rc8
  GitCommit:        425e105d5a03fabd737a126ad93d62a9eeede87f
 docker-init:
  Version:          0.18.0
  GitCommit:        fec3683
</pre>
</div></div><p><span style="color: rgb(0,0,255);"><br /></span></p></li></ul></li></ul><p><span style="color: rgb(0,0,255);"> </span></p><p><span style="color: rgb(0,0,255);"><br /></span></p><p><span style="color: rgb(0,0,255);"> </span></p><p><span style="color: rgb(0,0,255);"> </span></p><h1 style="text-decoration: none;text-align: left;margin-left: 0.0px;" id="Altibase도커가이드-Altibase도커이미지"><span style="color: rgb(0,0,0);text-decoration: none;">Altibase </span><span style="color: rgb(0,0,0);text-decoration: none;">도커 이미지</span><span style="color: rgb(0,0,255);"> </span><span style="color: rgb(0,0,255);"> </span></h1><hr style="text-decoration: none;text-align: left;" /><ul><li><span style="color: rgb(0,0,0);text-decoration: none;">Altibase 도커 이미지는 Altibase에서 제공하는 이미지를 사용할 수도 있고 사용자가 만들어서 사용할 수 있다.</span></li></ul><p><span style="color: rgb(0,0,255);"><br /></span></p><p><span style="color: rgb(0,0,255);"><br /></span></p><h2 style="text-decoration: none;text-align: left;margin-left: 0.0px;" id="Altibase도커가이드-Altibase도커이미지다운로드"><span style="color: rgb(0,0,0);text-decoration: none;">Altibase 도커 이미지 다운로</span>드<span style="color: rgb(0,0,255);"> </span></h2><hr style="text-decoration: none;text-align: left;" /><ul style="text-decoration: none;text-align: left;margin-left: 0.0px;"><li><p style="margin-left: 0.0px;"><span style="color: rgb(51,51,51);text-decoration: none;">Altibase에서 제공하는 도커 이미지는 </span><a href="https://hub.docker.com/r/altibase/altibase" style="text-decoration: underline;text-align: left;" class="external-link" rel="nofollow">도커허브</a><span style="color: rgb(51,51,51);text-decoration: none;">에서 다운로드 할 수도 있고 docker pull 명령어를 사용하여 다운로드 할 수 있다.</span></p></li><li><p style="margin-left: 0.0px;"><span style="color: rgb(51,51,51);text-decoration: none;"><span style="color: rgb(51,51,51);text-decoration: none;">docker pull 명령어를 통해서 ALTIBASE 도커 이미지를 다운로드 받는 방법은 다음과 같다</span></span><span style="color: rgb(51,51,51);text-decoration: none;"><span style="color: rgb(51,51,51);text-decoration: none;"> </span></span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker pull altibase/altibase
Using default tag: latest
latest: Pulling from altibase/altibase
aeb7866da422: Pull complete 
749a3f8d8b66: Pull complete 
...
f061f1a62f9a: Pull complete 
Digest: sha256:089a461f2b033d2c63c04d75cba78fe8e2ca9a75352e195f0199a17532305d17
Status: Downloaded newer image for altibase/altibase:latest
docker.io/altibase/altibase:latest

# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              18.04               cf0f3ca922e0        4 days ago          64.2MB
...
altibase/altibase   latest              3f217948f26d        10 months ago       1.06GB</pre>
</div></div><p style="margin-left: 0.0px;"><span style="color: rgb(51,51,51);text-decoration: none;"><span style="color: rgb(51,51,51);text-decoration: none;"> </span></span></p><p style="margin-left: 30.0px;"><span style="color: rgb(0,0,255);"><br /></span></p></li></ul><h2 style="text-decoration: none;text-align: left;margin-left: 0.0px;" id="Altibase도커가이드-Altibase도커이미지만들기"><span style="color: rgb(0,0,0);text-decoration: none;">Altibase 도커 이미지 만들기</span></h2><hr style="text-decoration: none;text-align: left;" /><ul style="text-decoration: none;text-align: left;margin-left: 0.0px;"><li><p style="margin-left: 0.0px;"><span style="color: rgb(0,0,0);text-decoration: none;">사용자가 Altibase 도커 이미지를 만드는 방법은 다음과 같다.</span><span style="color: rgb(0,0,0);text-decoration: none;"><br /></span></p></li></ul><h3 style="text-decoration: none;text-align: left;margin-left: 30.0px;" id="Altibase도커가이드-1.Altibase설치">1. Altibase 설치</h3><ul><li style="list-style-type: none;background-image: none;"><ul><li>A<span style="color: rgb(51,51,51);text-decoration: none;">ltibase 도커 이미지를 만들기 위해서는 먼저 Altibase가 설치되어 있어야 한다.</span></li><li><span style="color: rgb(51,51,51);text-decoration: none;"><span style="color: rgb(51,51,51);text-decoration: none;">Altibase 설치에 대한 가이드는  </span><a href="https://github.com/ALTIBASE/Documents/blob/master/Manuals/Altibase_7.1/kor/Installation.md" style="text-decoration: underline;text-align: left;" class="external-link" rel="nofollow">Altibase 설치 매뉴얼</a><span style="color: rgb(51,51,51);text-decoration: none;">을 참조한다</span>.</span><span style="color: rgb(0,0,0);text-decoration: none;"><br class="_mce_tagged_br" /></span></li></ul></li></ul><h3 style="text-decoration: none;text-align: left;margin-left: 30.0px;" id="Altibase도커가이드-2.도커파일구성">2. 도커 파일 구성 </h3><ul><li style="list-style-type: none;background-image: none;"><ul><li>도커파일은 이미지에 패키지나 데이터를 추가하는 방법을 담고 있는 명령어 집합이다.</li></ul></li><li style="list-style-type: none;background-image: none;"><ul><li><p><span style="color: rgb(51,51,51);text-decoration: none;"><span style="color: rgb(51,51,51);text-decoration: none;">도커파일의 이름은 Dockerfile이며 Build시점에 Dockerfile의 경로를 지정해 주어야 한다.<br /></span></span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;">FROM ubuntu:18.04
MAINTAINER ALTIBASE
 
RUN sed -e &#39;56 i\root\t\t soft\t nofile\t\t 1048576 \nroot\t\t hard\t nofile\t\t 1048576 \nroot\t\t soft\t nproc\t\t unlimited \nroot\t\t hard\t nproc\t\t unlimited \n&#39; -i /etc/security/limits.conf; \
echo &quot;vm.swappiness = 1&quot; &gt;&gt; /etc/sysctl.conf; \
echo &quot;kernel.sem = 20000 32000 512 5029&quot; &gt;&gt; /etc/sysctl.conf;

WORKDIR /home/altibase
 
COPY set_altibase.env /home/altibase
COPY docker-entrypoint.sh /home/altibase
COPY ./altibase_home /home/altibase/altibase_home
 
EXPOSE 20300 30300 30310
ENTRYPOINT [&quot;/bin/bash&quot;, &quot;/home/altibase/docker-entrypoint.sh&quot;]
</pre>
</div></div></li></ul></li></ul><h3 style="text-decoration: none;text-align: left;margin-left: 30.0px;" id="Altibase도커가이드-3.초기화스크립트작성">3. 초기화 스크립트 작성</h3><ul><li style="list-style-type: none;background-image: none;"><ul><li>도커 파일에 정의된 ENTRYPOINT는 컨테이너가 시작되었을 때 실행할 스크립트 혹은 명령이다.</li><li><p class="_mce_tagged_br" style="margin-left: 0.0px;">이 문서에서 도커 파일에서 사용되는 스크립트는 환경설정을 위한 <span style="color: rgb(0,0,0);">set_altibase.env</span> 와 실행 스크립트인 <span style="color: rgb(0,0,0);">docker-entrypoint.sh</span> 이다.<br /><br /><span style="color: rgb(0,0,0);">1. docker-entrypoint.sh</span><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"> 작성 예<br /></span></span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;">#!/bin/bash
. ./set_altibase.env
#export ALTIBASE_MEM_MAX_DB_SIZE=${MEM_MAX_DB_SIZE}
export FILE=${FILE}
if [[ &quot;${USER_ID}&quot; == &quot;&quot; ]]
then
   USER_ID=sys
   USER_PASSWD=manager
fi
function db_create()
{
ADMIN=&quot;${ALTIBASE_HOME}/bin/isql -u sys -p MANAGER -sysdba -noprompt&quot;
        ${ADMIN} &lt;&lt; EOF
startup process;
CREATE DATABASE mydb INITSIZE=${DB_SIZE}M NOARCHIVELOG CHARACTER SET ${DB_CHARSET} NATIONAL CHARACTER SET ${NATIONAL_CHARSET};
shutdown abort;
quit
EOF
}
function db_start_daemon()
{
altibase -n
}
function set_replication_port_no()
{
 	if [[ &quot;${MODE}&quot; == &quot;replication&quot; ]]
    then
    	cd $ALTIBASE_HOME/conf
        sed -e &quot;s/REPLICATION_PORT_NO                   = 0/REPLICATION_PORT_NO                   = $SLAVE_REP_PORT/g&quot; altibase.properties &gt; temp.file
        mv temp.file altibase.properties
        cd $HOME
	else
    	if [[ &quot;${MASTER_REP_PORT}&quot; != &quot;&quot; ]]
        then
        	cd $ALTIBASE_HOME/conf
            sed -e &quot;s/REPLICATION_PORT_NO                   = 0/REPLICATION_PORT_NO                   = $MASTER_REP_PORT/g&quot; altibase.properties &gt; temp.file
            mv temp.file altibase.properties
            cd $HOME
		fi
	fi
}
if [[ &quot;${MODE}&quot; == &quot;daemon&quot; ]]
then
    if [[ ! -f &quot;${ALTIBASE_HOME}/dbs/system001.dbf&quot; ]]
    then
        set_replication_port_no
        echo &quot;run altibase with db create&quot;
        db_create
        if [[ ! -f &quot;${FILE}&quot; ]]
        then
            echo &quot;run altibase without script&quot;
        else
            echo &quot;run altibase with create object&quot;
            is -silent -u ${USER_ID} -p ${USER_PASSWD} -f ${FILE}
           server stop
        fi
        db_start_daemon
    else
        if [[ ! -f &quot;${FILE}&quot; ]]
        then
            echo &quot;run altibase without script&quot;
        else
            echo &quot;run altibase with create object&quot;
            is -silent -u ${USER_ID} -p ${USER_PASSWD} -f ${FILE}
            server stop 
        fi
        echo &quot;run altibase without db create&quot;
        db_start_daemon
    fi
elif [[ &quot;${MODE}&quot; == &quot;isql&quot; ]]
then
    set_replication_port_no
    if [[ ! -f &quot;${ALTIBASE_HOME}/dbs/system001.dbf&quot; ]]
    then
        db_create
        server start
        isql -u ${USER_ID} -p ${USER_PASSWD} -s localhost
    else
        server start
        isql -u ${USER_ID} -p ${USER_PASSWD} -s localhost
    fi
elif [[ &quot;${MODE}&quot; == &quot;shell&quot; ]]
then
    set_replication_port_no
    if [[ ! -f &quot;${ALTIBASE_HOME}/dbs/system001.dbf&quot; ]]
    then
        db_create
        server start
        if [[ ! -f &quot;${FILE}&quot; ]]
        then
            /bin/bash
        else
            is -silent -f ${FILE}
            /bin/bash
        fi
    else
        server start
        if [[ ! -f &quot;${FILE}&quot; ]]
        then
            /bin/bash
        else
            isql -silent -u ${USER_ID} -p ${USER_PASSWD} -s localhost -f ${FILE}
            /bin/bash
        fi
    fi
elif [[ &quot;${MODE}&quot; == &quot;replication&quot; ]]
then
     set_replication_port_no
    if [[ ! -f &quot;${ALTIBASE_HOME}/dbs/system001.dbf&quot; ]]
    then
        db_create
        server start
        if [[ ! -f &quot;${FILE}&quot; ]]
        then
            /bin/bash
        else
            is -silent -f ${FILE}
            /bin/bash
        fi
    else
        server start
        if [[ ! -f &quot;${FILE}&quot; ]]
        then
            /bin/bash
        else
            isql -silent -u ${USER_ID} -p ${USER_PASSWD} -s localhost -f ${FILE}
            /bin/bash
        fi
    fi
fi</pre>
</div></div><p class="_mce_tagged_br" style="margin-left: 0.0px;"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"><strong><br /></strong></span></span><span style="color: rgb(0,0,0);">2. set_altibase.env  <span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);"> </span></span>작성 예</span> <span style="color: rgb(0,0,0);"> </span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;">set +u    ## if unbound variable error is occured.
export HOSTNAME=`hostname`
export LOGNAME=$LOGNAME

WHOAMI=&quot;who am i&quot;
export JAVA_HOME=

#############
# BASE PATHs
#############
if [ &quot;$BASE_PATH&quot; == &quot;&quot; ]; then export BASE_PATH=$PATH; fi
if [ &quot;$BASE_LIB_PATH&quot; == &quot;&quot; ]; then export BASE_LIB_PATH=$LD_LIBRARY_PATH; fi
if [ &quot;$BASE_CLASSPATH&quot; == &quot;&quot; ]; then export BASE_CLASSPATH=$CLASSPATH; fi
export PATH=$BASE_PATH
export LD_LIBRARY_PATH=$BASE_LIB_PATH
export CLASSPATH=$BASE_CLASSPATH

#############
# BASIC
#############
export HOSTNAME=`hostname`
export OS=`uname`
#########################################################
# PROMPT
#########################################################
export PS1=&quot;\[\033[31m\]\u@\h:\w\$ \[\033[0m\]&quot;
umask 0000
export LANG=C

################################
# OS: LINUX ES60+
################################
export OS_NAME=linux
export PATH=/usr/local/bin:/usr/bin:/bin:/sbin:$PATH
export LD_LIBRARY_PATH=/usr/local/lib:/usr/lib:/lib:$LD_LIBRARY_PATH

## JAVA ##
export PATH=${JAVA_HOME}/bin:${PATH}
export CLASSPATH=${JAVA_HOME}/lib:${JAVA_HOME}/jre/lib:$CLASSPATH

#############
# ALTIBASE
#############

export MALOC_ARENA_MAX=4

export ALTIBASE_HOME=/home/altibase/altibase_home
export ALTIBASE_NLS_USE=MS949
export ALTIBASE_PORT_NO=20300  #20300,41001
export ALTIBASE_MSG=${HOME}/altimsg

export ALTIBASE_LINKER_SQLLEN_SIZE=4 # SET 8 for rp5470

export DB_SIZE=10 #init Memory DB Size (Mbyte)
#export MEM_MAX_DB_SIZE=4G
export DB_CHARSET=MS949
export NATIONAL_CHARSET=UTF8

#############
# PATHS
#############
#aPath=.:$HOME/app/scripts/bin
aPath=.:$HOME/app/bin
aPath=$aPath:${ALTIBASE_HOME}/bin
export PATH=$aPath:$UNIXODBC_HOME/bin:${PATH}

aLibPath=.
aLibPath=$aLibPath:${ALTIBASE_HOME}/lib
export LD_LIBRARY_PATH=$aLibPath:${LD_LIBRARY_PATH}
export LD_LIBRARY_PATH_64=${LD_LIBRARY_PATH}
export SHLIB_PATH=${LD_LIBRARY_PATH}
export CLASSPATH=.:${ALTIBASE_HOME}/lib/Altibase.jar:${CLASSPATH}

alias ls=&#39;ls -CF&#39;
alias ll=&#39;ls -l&#39;
alias lsd=&#39;ls -d */&#39;
alias plist=&#39;ps -ef | grep $LOGNAME&#39;
</pre>
</div></div><p class="_mce_tagged_br" style="margin-left: 0.0px;"> <span style="color: rgb(0,0,255);"><br /></span></p></li></ul></li></ul><h3 style="text-decoration: none;text-align: left;margin-left: 30.0px;" id="Altibase도커가이드-4.도커이미지생성">4. 도커 이미지 생성</h3><ul><li style="list-style-type: none;background-image: none;"><ul><li><p><span style="color: rgb(0,0,255);"> </span>도커 이미지는 docker build를 사용하여 생성한다. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: java; gutter: false" style="font-size:12px;">docker build [OPTIONS] PATH | URL | -
OPTIONIS : 
         --force-rm        Always remove intermediate containers
         --no-cache        Do not use cache when building the image
         --pull            Always attempt to pull a newer version of the image
         -q, --quiet       Suppress the build output and print image ID on success
         --rm              Remove intermediate containers after a successful build (default true)
         -t, --tag list    Name and optionally a tag in the &#39;name:tag&#39; format </pre>
</div></div><p style="margin-left: 0.0px;">OPTIONS에 대한 좀 더 자세한 내용은 <a href="https://docs.docker.com/engine/reference/commandline/build/" style="text-decoration: underline;" class="external-link" rel="nofollow">여기</a>에서 확인할 수 있다.</p><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker build -t altitest:0.0 ./
Sending build context to Docker daemon  721.7MB
Step 1/12 : FROM  ubuntu:18.04
 ---&gt; cf0f3ca922e0
Step 2/12 : MAINTAINER JEONG
 ---&gt; Running in 20b8a511ef81
Removing intermediate container 20b8a511ef81
 ---&gt; f7b43fc90f83
Step 3/12 : RUN useradd -d /home/altibase -s /bin/bash -m altibase; sed -e &#39;56 i\altibase\t\t soft\t nofile\t\t 1048576 \naltibase\t\t hard\t nofile\t\t 1048576 \naltibase\t\t soft\t nproc\t\t unlimited \naltibase\t\t hard\t nproc\t\t unlimited \n&#39; -i /etc/security/limits.conf; echo &quot;vm.swappiness = 1&quot; &gt;&gt; /etc/sysctl.conf; echo &quot;kernel.sem = 20000        32000   512     5029&quot; &gt;&gt; /etc/sysctl.conf;
 ---&gt; Running in 88b3e8fa9508
Removing intermediate container 88b3e8fa9508
 ---&gt; dc1994514a5f
Step 4/12 : COPY set_altibase.env /home/altibase
 ---&gt; a039fabb1003
Step 5/12 : COPY docker-entrypoint.sh /home/altibase
 ---&gt; 3ee3d3eda79b
Step 6/12 : COPY altibase_home /home/altibase/altibase_home
 ---&gt; bafec9edb96b
Step 7/12 : RUN chown -R altibase:altibase /home/altibase/*
 ---&gt; Running in f1913e2d7e32
Removing intermediate container f1913e2d7e32
 ---&gt; e4d56135882f
Step 8/12 : USER altibase
 ---&gt; Running in a1e4f2b96ee3
Removing intermediate container a1e4f2b96ee3
 ---&gt; aad721f27620
Step 9/12 : WORKDIR /home/altibase
 ---&gt; Running in 4081c1fcc20a
Removing intermediate container 4081c1fcc20a
 ---&gt; b8f3497fc294
Step 10/12 : ENV MODE shell
 ---&gt; Running in 9167fee80677
Removing intermediate container 9167fee80677
 ---&gt; af201a060152
Step 11/12 : EXPOSE 20300 30300
 ---&gt; Running in ff0db6b12515
Removing intermediate container ff0db6b12515
 ---&gt; 7a1727561c45
Step 12/12 : ENTRYPOINT [&quot;/bin/bash&quot;, &quot;/home/altibase/docker-entrypoint.sh&quot;]
 ---&gt; Running in 1eeccd7174e9
Removing intermediate container 1eeccd7174e9
 ---&gt; 275b96f6ba53
Successfully built 275b96f6ba53
Successfully tagged altitest:0.0
</pre>
</div></div></li></ul></li></ul><p> </p><p><span style="color: rgb(0,0,255);"><br /></span></p><p> </p><p><span style="color: rgb(0,0,255);"><br /></span></p><p><span style="color: rgb(0,0,255);"><br /></span></p><h1 id="Altibase도커가이드-Altibase서비스컨테이너생성">Altibase 서비스  컨테이너 생성<span style="color: rgb(0,0,255);"> </span></h1><hr /><p> </p><h2 class="title" id="Altibase도커가이드-컨테이너생성">컨테이너 생성</h2><hr /><ul><li><p>도커이미지로 컨테이너를  생성할 때는 docker run을 사용한다.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: plain; gutter: false" style="font-size:12px;">docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMAND] [ARG...]
OPTIONIS : 
          -a, --attach list             Attach to STDIN, STDOUT or STDERR
          --cpus decimal                Number of CPUs
          -m, --memory bytes            Memory limit
          -d, --detach                  Run container in background and print container ID
          -e, --env list                Set environment variables
          --env-file list               Read in a file of environment variables
          -i, --interactive             Keep STDIN open even if not attached
          --privileged                  Give extended privileges to this container
          -t, --tty                     Allocate a pseudo-TTY
          -u, --user string             Username or UID (format: &lt;name|uid&gt;[:&lt;group|gid&gt;])
          -v, --volume list             Bind mount a volume
          -w, --workdir string          Working directory inside the container</pre>
</div></div><p>OPTION에 대한 좀 더 자세한 내용은 <a href="https://docs.docker.com/engine/reference/run/" class="external-link" rel="nofollow">여기</a>에서 확인할 수 있다.</p></li></ul><h3 style="margin-left: 30.0px;" id="Altibase도커가이드-1.컨테이너생성">1. 컨테이너 생성</h3><ul><li style="list-style-type: none;background-image: none;"><ul><li><p>컨테이너 생성을 위해서는 다음과 같이 사용한다.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker run -it -e MODE=shell --name altibase_test altitest:0.0 bash
-----------------------------------------------------------------
     Altibase Client Query utility.
     Release Version 7.1.0.1.0
     Copyright 2000, ALTIBASE Corporation or its subsidiaries.
     All Rights Reserved.
-----------------------------------------------------------------
ISQL_CONNECTION = UNIX, SERVER = localhost
[ERR-910FB : Connected to idle instance]
Connecting to the DB server.... Connected.


TRANSITION TO PHASE : PROCESS
Command executed successfully.

DB Info (Page Size     = 32768)
        (Page Count    = 257)
        (Total DB Size = 8421376)
        (DB File Size  = 1073741824)

    Creating MMDB FILES     [SUCCESS]

    Creating Catalog Tables [SUCCESS]

    Creating DRDB FILES     [SUCCESS]

  [SM] Rebuilding Indices [Total Count:0]  [SUCCESS]
... &lt;이하 생략&gt; ...

# ls
altibase_home  docker-entrypoint.sh  set_altibase.env

</pre>
</div></div><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="3" class="confluenceTh">필수 옵션</th></tr><tr><td rowspan="4" class="confluenceTd">-e MODE</td><td class="confluenceTd">daemon</td><td colspan="1" class="confluenceTd">Altibase 데이터베이스를 데몬으로 실행하고 터미널을 유지한다. </td></tr><tr><td colspan="1" class="confluenceTd">isql</td><td colspan="1" class="confluenceTd">Altibase 데이터베이스를 실행하고 컨테이너 내부에서 isql에 접속한 상태를 유지한다.</td></tr><tr><td colspan="1" class="confluenceTd">shell</td><td colspan="1" class="confluenceTd">Altibase 데이터베이스를 실행하고 컨테이너 내부에서 shell에 접속한 상태를 유지한다.</td></tr><tr><td colspan="1" class="confluenceTd">replication</td><td colspan="1" class="confluenceTd">이중화 연결을 위한 추가 노드 생성시에 사용한다. 마스터 노드 생성시에는 이 옵션을 선택하지 않는다.</td></tr></tbody></table></div></li></ul></li></ul><h3 style="margin-left: 30.0px;" id="Altibase도커가이드-2.외부볼륨연결">2. 외부 볼륨 연결</h3><p style="margin-left: 60.0px;">도커는 컨테이너 계층에 변경된 데이터를 저장하게 되며 이 데이터는 컨테이너가 삭제되면 데이터도 같이 삭제된다. <br />따라서 데이터의 영속성을 보장하기 위하여 호스트의 파일시스템을 컨테이너에 마운트하는 방식의 데이터 볼륨을 사용한다.</p><p style="margin-left: 60.0px;">데이터 볼륨의 특징은 다음과 같다.</p><ul><li style="list-style-type: none;background-image: none;"><ul><li>데이터 볼륨은 재사용이 가능하며 컨테이너 간의 공유가 가능하다.</li><li>데이터 볼륨은 호스트에서 직접 접근이 가능하다.</li><li><p>데이터 볼륨은 기본적으로 컨테이너와 독립적으로 운영되기 때문에 컨테이너가 삭제되어도 계속 유지된다<br /><br />데이터 볼륨을 지정하는 방법은 다음과 같다.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: plain; gutter: false" style="font-size:12px;">-v [host directory path]:[container directory path]
또는 
--mount type=[OPTIONS],source=[host directory path],target=[container directory path]
</pre>
</div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker run -it --name altibase_test \
--privileged \
-v ~/work/ALTIBASE_DBS:/home/altibase/altibase_home/dbs \
-v ~/work/ALTIBASE_LOGS:/home/altibase/altibase_home/logs \
altitest:0.0 /bin/bash </pre>
</div></div></li></ul></li></ul><p><span style="color: rgb(0,0,255);"><br /></span></p><h2 id="Altibase도커가이드-컨테이너간이중화연결">컨테이너 간 이중화 연결</h2><hr /><ul><li>Altibase 이중화<br />운영중인 데이터베이스의 로그를 다른 데이터베이스로 전송하여 재실행함으로써 양쪽 데이터 베이스에 같은 데이터를 유지하게 함으로써 서버의 예기치 않은 종료가 발생했을 때 대체 서버를 이용하여 서비스를 재개할 수 있는 무정지 운영 환경을 제공하는 기능이다.<br />이중화에 대한 매뉴얼은 <a href="https://github.com/ALTIBASE/Documents/blob/master/Manuals/Altibase_7.1/kor/Replication.md" class="external-link" rel="nofollow">여기</a>에서 확인할 수 있다.</li><li>컨테이너 간의 이중화 연결 순서.<br />1. 이중화 연결을 위한 하나의 도커 네트워크를 생성한다. <br />2. 마스터 노드의 컨테이너를 생성된 도커 네트워크에 조인한다. <br />3. 추가할 노드의 컨테이너를 마스터 노드와 동일한 도커 네트워크에 조인한다.</li><li><p>컨테이너 간의 이중화 연결<br />1. 도커 네트워크 생성.<br />    도커 네트워크는 docker network create 명령어로 생성한다 <br />    생성된 네트워크는 docker network ls 명령어로 확인할 수 있으며 상세한 내용은 docker inspect 명령어로 확인 가능하다</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: plain; gutter: false" style="font-size:12px;">docker network create [OPTIONS] NETWORK
OPTIONIS : 
          --attachable               Enable manual container attachment
          --config-from string       The network from which copying the configuration
          -d, --driver string        Driver to manage the Network (default &quot;bridge&quot;)
          --ipv6                     Enable IPv6 networking
          --label list               Set metadata on a network

docker inspect [OPTIONS] NAME|ID [NAME|ID...]
OPTIONIS : 
          --format , -f       Format the output using the given Go template
          --size , -s         Display total file sizes if the type is container
          --type              Return JSON for specified type
</pre>
</div></div><p> </p><p>isolated_network란 이름으로 도커 네트워크를 생성한다.</p><p>생성된 네트워크는 docker network ls 로 확인한다.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker network create --driver bridge isolated_network
2bb4d1dc2fc364ed45e69beb3a8b257f5d0e9cd95b5e4676d819386b32ba88d6

# docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
09929baadcff        bridge              bridge              local
1963af1259b9        host                host                local
2bb4d1dc2fc3        isolated_network    bridge              local
5f3deeb7fcba        none                null                local</pre>
</div></div><p><br />생성된 네트워크에 대한 상세한 내용을 확인한다.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker inspect 2bb4d1dc2fc3
[
    {
        &quot;Name&quot;: &quot;isolated_network&quot;,
        &quot;Id&quot;: &quot;2bb4d1dc2fc364ed45e69beb3a8b257f5d0e9cd95b5e4676d819386b32ba88d6&quot;,
        &quot;Created&quot;: &quot;2019-10-29T09:50:37.6130865+09:00&quot;,
        &quot;Scope&quot;: &quot;local&quot;,
        &quot;Driver&quot;: &quot;bridge&quot;,
        &quot;EnableIPv6&quot;: false,
        &quot;IPAM&quot;: {
            &quot;Driver&quot;: &quot;default&quot;,
            &quot;Options&quot;: {},
            &quot;Config&quot;: [
                {
                    &quot;Subnet&quot;: &quot;172.18.0.0/16&quot;,
                    &quot;Gateway&quot;: &quot;172.18.0.1&quot;
                }
            ]
        },
        &quot;Internal&quot;: false,
        &quot;Attachable&quot;: false,
        &quot;Ingress&quot;: false,
        &quot;ConfigFrom&quot;: {
            &quot;Network&quot;: &quot;&quot;
        },
        &quot;ConfigOnly&quot;: false,
        &quot;Containers&quot;: {},
        &quot;Options&quot;: {},
        &quot;Labels&quot;: {}
    }
]</pre>
</div></div><p><br />2. 마스터 노드의 컨테이너를 생성하면서 도커 네트워크에 조인한다</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker run -it \
--net=isolated_network \
--hostname=master  \
-e MODE=shell \
-e MASTER_REP_PORT=30300 \
--name altitest_master altitest:0.0 /bin/bash</pre>
</div></div><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="2" class="confluenceTh">필수 옵션</th></tr><tr><td class="confluenceTd">--net</td><td class="confluenceTd">컨테이너가 실행될 네트워크 명</td></tr><tr><td colspan="1" class="confluenceTd">--hostname</td><td colspan="1" class="confluenceTd">호스트네임</td></tr><tr><td colspan="1" class="confluenceTd">-e MASTER_REP_PORT</td><td colspan="1" class="confluenceTd">이중화 포트 번호</td></tr></tbody></table></div><p><br />3. 추가 노드의 컨테이너를 생성하면서 마스터 노드의 도커 네트워크에 조인한다</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker run -it \
--net=isolated_network \
--hostname=slave \
-e MODE=replication \
-e MASTER_HOST_NAME=master -e MASTER_DB_PORT=20300 -e MASTER_REP_PORT=30300 \
-e SLAVE_HOST_NAME=slave -e SLAVE_REP_PORT=30310 \
--name altitest_slave altitest:0.0 /bin/bash altibase</pre>
</div></div><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="2" class="confluenceTh">필수 옵션</th></tr><tr><td class="confluenceTd">--net</td><td class="confluenceTd">컨테이너가 실행될 네트워크 명</td></tr><tr><td class="confluenceTd">--hostname</td><td class="confluenceTd">호스트네임</td></tr><tr><td class="confluenceTd">-e MASTER_HOST_NAME</td><td class="confluenceTd">마스터 노드의 호스트네임</td></tr><tr><td class="confluenceTd">-e MASTER_DB_PORT</td><td class="confluenceTd">마스터 노드의 서비스 포트 번호</td></tr><tr><td class="confluenceTd">-e MASTER_REP_PORT</td><td class="confluenceTd">마스터 노드의 이중화 포트 번호</td></tr><tr><td colspan="1" class="confluenceTd">-e SLAVE_HOST_NAME</td><td colspan="1" class="confluenceTd">추가 노드의 호스트네임</td></tr><tr><td colspan="1" class="confluenceTd">-e SLAVE_REP_PORT</td><td colspan="1" class="confluenceTd">추가 노드의 이중화 포트 번호</td></tr></tbody></table></div><p> </p><p>4 네트워크 정보를 확인한다</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker inspect 2bb4d1dc2fc3
[
    {
        &quot;Name&quot;: &quot;isolated_network&quot;,
        &quot;Id&quot;: &quot;2bb4d1dc2fc364ed45e69beb3a8b257f5d0e9cd95b5e4676d819386b32ba88d6&quot;,
        &quot;Created&quot;: &quot;2019-10-29T09:50:37.6130865+09:00&quot;,
        &quot;Scope&quot;: &quot;local&quot;,
        &quot;Driver&quot;: &quot;bridge&quot;,
        &quot;EnableIPv6&quot;: false,
        &quot;IPAM&quot;: {
            &quot;Driver&quot;: &quot;default&quot;,
            &quot;Options&quot;: {},
            &quot;Config&quot;: [
                {
                    &quot;Subnet&quot;: &quot;172.18.0.0/16&quot;,
                    &quot;Gateway&quot;: &quot;172.18.0.1&quot;
                }
            ]
        },
        &quot;Internal&quot;: false,
        &quot;Attachable&quot;: false,
        &quot;Ingress&quot;: false,
        &quot;ConfigFrom&quot;: {
            &quot;Network&quot;: &quot;&quot;
        },
        &quot;ConfigOnly&quot;: false,
        &quot;Containers&quot;: {
            &quot;0ac2165ddda455343ba2b374f18575bfc8e39f51c7fdfc80bfa49482c76e79fe&quot;: {
                &quot;Name&quot;: &quot;altitest_slave&quot;,
                &quot;EndpointID&quot;: &quot;db9c1241f322019764f7af4781c359647ec393bfd29a816433e1c3184546b546&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:03&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.3/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            },
            &quot;964cd5ff922470b9131a23a399029844525aba39eaa500b9f4f3453b902c8461&quot;: {
                &quot;Name&quot;: &quot;altitest_master&quot;,
                &quot;EndpointID&quot;: &quot;80390d64486a6eabedc5cbf7e3d2fe9886099cae7678da7a9a55ef64a1130bf4&quot;,
                &quot;MacAddress&quot;: &quot;02:42:ac:12:00:02&quot;,
                &quot;IPv4Address&quot;: &quot;172.18.0.2/16&quot;,
                &quot;IPv6Address&quot;: &quot;&quot;
            }
        },
        &quot;Options&quot;: {},
        &quot;Labels&quot;: {}
    }
]</pre>
</div></div></li></ul><p><span style="color: rgb(0,0,255);"><br /></span></p><h2 id="Altibase도커가이드-Altibase데이터베이스구성">Altibase 데이터베이스 구성</h2><hr /><ul><li>Altibase 데이터베이스를 효과적으로 사용하기 위한 프로퍼티들에 대한 설명 및 설정은 <a href="http://support.altibase.com/fileDownload.do?gubun=wp&amp;no=20" class="external-link" rel="nofollow">Altibase 설정 가이드</a>를 참조한다.</li><li><span>Altibase 데이터베이스 구성과 운영을 위한 설명 및 설정은 <a href="https://github.com/ALTIBASE/Documents/blob/master/Manuals/Altibase_7.1/kor/README.md" class="external-link" rel="nofollow">Altibase 매뉴얼</a>에서 확인할 수 있다.</span></li></ul><p> </p><h2 id="Altibase도커가이드-Altibase서버접속"><span style="color: rgb(0,0,0);">Altibase 서버 접속<br /></span></h2><hr /><ol><li><h3 id="Altibase도커가이드-컨테이너내부에서Altibase서버접속"><span style="color: rgb(0,0,0);"><strong><span><span><span>컨테이너 내부에서 Altibase 서버 접속</span></span></span></strong></span><span style="color: rgb(0,0,0);"><strong><span><span><span><br /></span></span></span></strong></span></h3><ul><li><p><span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,0);">컨테이너 내부에서 Altibase 서버에 접속할 때는 isql 명령어를 사용한다. </span></span><span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,0);"> </span></span><span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,0);"> </span></span></span></span> <span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,0);"> </span></span></span></span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># isql -s localhost -u [사용자 계정] -p [사용자 암호] 
# isql -s localhost -u sys -p manager 
-----------------------------------------------------------------
     Altibase Client Query utility.
     Release Version 7.1.0.1.0
     Copyright 2000, ALTIBASE Corporation or its subsidiaries.
     All Rights Reserved.
-----------------------------------------------------------------
ISQL_CONNECTION = TCP, SERVER = localhost, PORT_NO = 20300
iSQL&gt; </pre>
</div></div><p><span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,0);"> </span></span></span></p></li></ul></li></ol><h3 style="margin-left: 30.0px;" id="Altibase도커가이드-2.컨테이너외부에서Altibase서버접속">2. 컨테이너 외부에서 Altibase 서버 접속</h3><ul><li style="list-style-type: none;background-image: none;"><ul><li><span style="color: rgb(51,51,51);text-decoration: none;">컨테이너 외부에서 Altibase 서버에 접속하기 위해서는 할당된 IP정보를 확인하여 isql 명령어의 -s 옵션에 해당 IP를 지정해 주어야 한다</span></li><li><p style="margin-left: 0.0px;text-align: left;">IP확인은 docker inspect 명령어로 확인할 수 있다.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
dbab08cc5be8        altitest:0.0        &quot;/bin/bash /home/alt…&quot;   18 hours ago        Up 18 hours         20300/tcp, 30300/tcp     altibase_test
19d325fa6e26        registry            &quot;/entrypoint.sh /etc…&quot;   2 days ago          Up 2 days           0.0.0.0:5000-&gt;5000/tcp   local-registry

# docker inspect altibase_test
[
    {
        &quot;Id&quot;: &quot;dbab08cc5be8aac2c005d9f8d1dbc0f0d0569e8c30c59a49fe455cdb06963484&quot;,
...
        },
        &quot;NetworkSettings&quot;: {
            &quot;Bridge&quot;: &quot;&quot;,
            &quot;SandboxID&quot;: &quot;2436fb93d9e66afe8649a482775c95c14870d09dbee367a5ebd59695f98a0854&quot;,
            &quot;HairpinMode&quot;: false,
            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,
            &quot;LinkLocalIPv6PrefixLen&quot;: 0,
            &quot;Ports&quot;: {
                &quot;20300/tcp&quot;: null,
                &quot;30300/tcp&quot;: null
            },
            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/2436fb93d9e6&quot;,
            &quot;SecondaryIPAddresses&quot;: null,
            &quot;SecondaryIPv6Addresses&quot;: null,
            &quot;EndpointID&quot;: &quot;8c2c73671de5b3a55251313f8bc6b1c376685e59feb3ed55163ab9692f85983d&quot;,
            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,
            &quot;GlobalIPv6Address&quot;: &quot;&quot;,
            &quot;GlobalIPv6PrefixLen&quot;: 0,
            &quot;IPAddress&quot;: &quot;172.17.0.3&quot;,
            &quot;IPPrefixLen&quot;: 16,
            &quot;IPv6Gateway&quot;: &quot;&quot;,
            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:03&quot;,
            &quot;Networks&quot;: {
                &quot;bridge&quot;: {
                    &quot;IPAMConfig&quot;: null,
                    &quot;Links&quot;: null,
                    &quot;Aliases&quot;: null,
                    &quot;NetworkID&quot;: &quot;3b3cdc53d9c0e6ad146b6c7bcc8cb60bcef01ba533fee3fd704e5959a1ef573f&quot;,
                    &quot;EndpointID&quot;: &quot;8c2c73671de5b3a55251313f8bc6b1c376685e59feb3ed55163ab9692f85983d&quot;,
                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,
                    &quot;IPAddress&quot;: &quot;172.17.0.3&quot;,
                    &quot;IPPrefixLen&quot;: 16,
                    &quot;IPv6Gateway&quot;: &quot;&quot;,
                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,
                    &quot;GlobalIPv6PrefixLen&quot;: 0,
                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:03&quot;,
                    &quot;DriverOpts&quot;: null
                }
            }
        }
    }
]
</pre>
</div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># isql -s [서버 IP] -u [사용자 계정] -p [사용자 암호] 
# isql -s 172.17.0.3 -u sys -p manager
-----------------------------------------------------------------
     Altibase Client Query utility.
     Release Version 7.1.0.1.0
     Copyright 2000, ALTIBASE Corporation or its subsidiaries.
     All Rights Reserved.
-----------------------------------------------------------------
ISQL_CONNECTION = TCP, SERVER = 172.17.0.3, PORT_NO = 20300
iSQL&gt; </pre>
</div></div></li></ul></li></ul><p> </p><p> </p><p> </p><p> </p><h1 id="Altibase도커가이드-Altibase서비스컨테이너중지">Altibase 서비스 컨테이너 중지</h1><hr /><ul><li><p>실행중인 컨테이너를  중지하기 위해서는 docker stop 명령어를 사용한다.<br />중지된 컨테이너는 삭제된 것은 아니며 docker start 명령어로 다시 실행시킬 수 있다.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: plain; gutter: false" style="font-size:12px;">docker stop [OPTIONS] CONTAINER [CONTAINER...]
Options:
         -t, --time int   Seconds to wait for stop before killing it (default 10)</pre>
</div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker stop altibase_test
altibase_test</pre>
</div></div></li></ul><p><span style="color: rgb(0,0,255);"> </span></p><p><span style="color: rgb(0,0,255);"><br /></span></p><p><span style="color: rgb(0,0,255);"><br /></span></p><h1 id="Altibase도커가이드-Altibase서비스컨테이너삭제">Altibase 서비스 컨테이너 삭제</h1><hr /><ul><li>컨테이너를 삭제하기 위해서는 컨테이너가 중지되어 있어야 한다.<span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,255);"> <br /></span></span></li><li>컨테이너 조회시에는 docker ps 명령어를 사용한다. 중지되어 있는 컨테이너까지 조회시에는  -a 옵션을 추가한다.<span style="color: rgb(0,0,255);"> </span></li><li><p>중지되어 있는 컨테이너를 삭제하기 위해서는 docker rm 명령어를 사용한다.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: plain; gutter: false" style="font-size:12px;">docker ps [OPTIONS]
OPTIONIS : 
          -a, --all             Show all containers (default shows just running)
          -f, --filter filter   Filter output based on conditions provided
          --format string       Pretty-print containers using a Go template
          -n, --last int        Show n last created containers (includes all states) (default -1)
          -l, --latest          Show the latest created container (includes all states)
          --no-trunc            Don&#39;t truncate output
          -q, --quiet           Only display numeric IDs
          -s, --size            Display total file sizes

docker rm [OPTIONS] CONTAINER [CONTAINER...]
OPTIONIS : 
          -f, --force     Force the removal of a running container (uses SIGKILL)
          -l, --link      Remove the specified link
          -v, --volumes   Remove the volumes associated with the container</pre>
</div></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Emacs; brush: bash; gutter: false" style="font-size:12px;"># docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
19d325fa6e26        registry            &quot;/entrypoint.sh /etc…&quot;   3 days ago          Up 3 days           0.0.0.0:5000-&gt;5000/tcp   local-registry

# docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                       PORTS                    NAMES
dbab08cc5be8        altitest:0.0        &quot;/bin/bash /home/alt…&quot;   19 hours ago        Exited (137) 2 minutes ago                            altibase_test
6074f9f6876a        305569b058db        &quot;/bin/sh -c &#39;apt-get…&quot;   19 hours ago        Exited (1) 19 hours ago                               agitated_dirac
7cd392776788        2c7e9ce62325        &quot;/bin/sh -c &#39;apt-get…&quot;   20 hours ago        Exited (1) 20 hours ago                               sleepy_shamir
2c835abffa8a        399a593362f0        &quot;/bin/sh -c &#39;useradd…&quot;   21 hours ago        Created                                               great_gould
9f1daafaaf3d        93d6a98de683        &quot;/bin/bash &#39;useradd …&quot;   2 days ago          Exited (127) 2 days ago                               strange_aryabhata
19d325fa6e26        registry            &quot;/entrypoint.sh /etc…&quot;   3 days ago          Up 3 days                    0.0.0.0:5000-&gt;5000/tcp   local-registry

# docker rm altibase_test
altibase_test

# docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                    PORTS                    NAMES
6074f9f6876a        305569b058db        &quot;/bin/sh -c &#39;apt-get…&quot;   19 hours ago        Exited (1) 19 hours ago                            agitated_dirac
7cd392776788        2c7e9ce62325        &quot;/bin/sh -c &#39;apt-get…&quot;   20 hours ago        Exited (1) 20 hours ago                            sleepy_shamir
2c835abffa8a        399a593362f0        &quot;/bin/sh -c &#39;useradd…&quot;   21 hours ago        Created                                            great_gould
9f1daafaaf3d        93d6a98de683        &quot;/bin/bash &#39;useradd …&quot;   2 days ago          Exited (127) 2 days ago                            strange_aryabhata
19d325fa6e26        registry            &quot;/entrypoint.sh /etc…&quot;   3 days ago          Up 3 days                 0.0.0.0:5000-&gt;5000/tcp   local-registry

</pre>
</div></div></li></ul><p> </p><p> </p><p> </p><h1 id="Altibase도커가이드-참고"><span>참고</span></h1><hr /><p><span>Docker Documentation : <a href="https://docs.docker.com/" class="external-link" rel="nofollow">https://docs.docker.com/</a></span></p><p> </p><p> </p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14057660/14221346.jpg">도커와%20VM차이_3.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14057660/14221347.jpg">이미지와%20컨테이너.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:57</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
