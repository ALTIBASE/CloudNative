<!DOCTYPE html>
<html>
    <head>
        <title>Technical Documents(English) : 2. Considerations for Determining Backup Policy</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Technical Documents(English)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_557064.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Considerations-for-Altibase-Backup-Policy_14647709.html">Considerations for Altibase Backup Policy</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Technical Documents(English) : 2. Considerations for Determining Backup Policy
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> richard.nahm	</span>, last modified on Feb 22, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <hr /><p>Selecting the backup policy should be decided in consideration of the operation environment, such as the importance of data, recovery policy, and backup size. This chapter describes the considerations for determining a backup policy.</p><h1 id="id-2.ConsiderationsforDeterminingBackupPolicy-Selectbackuptarget">Select backup target</h1><hr /><p>To determine a backup policy, the first thing to do is to select a backup target. In addition, in consideration of the characteristics of the backup target the recovery policy, backup type, backup cycle, backup time, and storage period of backup files must be determined first.</p><p>This backup plan is not something that the DBA can do alone and requires a data manager to cooperate with. This is because the person who is in charge of the operation needs to know which backup target is most suitable.</p><h1 id="id-2.ConsiderationsforDeterminingBackupPolicy-Recoverypoint">Recovery point</h1><hr /><p>There is a difference in the time of recovery depending on the backup type. Depending on the importance of the backup target, a recovery point should be determined a backup method should be selected accordingly.</p><p>There are three major recovery points.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner">Recovery point</div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Description</div></th></tr></thead><tbody><tr><th class="confluenceTh">Backup point</th><td class="confluenceTd">This refers to the restoration to the point in time when the backup was performed.</td></tr><tr><th class="confluenceTh">Complete recovery</th><td class="confluenceTd"><p>This refers to the restoration to the most recent point in the database.</p><p>This is possible only when online log files and archive log files are not lost.</p></td></tr><tr><th colspan="1" class="confluenceTh">Incomplete recovery</th><td colspan="1" class="confluenceTd"><p>This refers to the restoration to a certain past point in time.</p><p>Incomplete recovery is possible at two points in time.</p><ul><li>UNTIL CANCEL<br />Recover by specifying a specific log file</li><li>UNTIL TIME<br />Recover by specifying the date and time</li></ul></td></tr></tbody></table></div><p> </p><p>The table below summarizes the recovery points by backup type. Select a backup method suitable for the backup target by referring to the table.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="2" class="confluenceTh">Backup type</th><th style="text-align: center;" class="confluenceTh">Backup point</th><th style="text-align: center;" class="confluenceTh">Complete backup</th><th style="text-align: center;" class="confluenceTh">Incomplete backup</th></tr><tr><th colspan="2" class="confluenceTh">Logical backup</th><td style="text-align: center;" class="confluenceTd">Possible</td><td style="text-align: center;" class="confluenceTd">N/A</td><td style="text-align: center;" class="confluenceTd"><span>N/A</span></td></tr><tr><th rowspan="2" class="confluenceTh">Physical backup</th><th class="confluenceTh">Online backup</th><td style="text-align: center;" class="confluenceTd">Possible</td><td style="text-align: center;" class="confluenceTd">Possible</td><td style="text-align: center;" class="confluenceTd">Possible</td></tr><tr><th class="confluenceTh">Online backup</th><td style="text-align: center;" class="confluenceTd">Possible</td><td style="text-align: center;" class="confluenceTd">N/A</td><td style="text-align: center;" class="confluenceTd"><span>N/A</span></td></tr><tr><th colspan="2" class="confluenceTh">Incremental backup</th><td style="text-align: center;" class="confluenceTd">Possible</td><td style="text-align: center;" class="confluenceTd">Possible</td><td style="text-align: center;" class="confluenceTd">Possible</td></tr></tbody></table></div><h2 id="id-2.ConsiderationsforDeterminingBackupPolicy-Recoverytime"><br />Recovery time</h2><hr /><p>Recovery is an operation that must be performed after a service interruption. Operation environments in which service downtime must be minimized when determining the backup policy.</p><p>Since the factors that affect the recovery time differ depending on the backup type, please refer to the table below and select the method that suits the characteristics of the backup target.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="2" class="confluenceTh">Backup type</th><th style="text-align: center;" class="confluenceTh">Factors affecting recovery time</th><th class="confluenceTh">Description</th></tr><tr><th rowspan="2" class="confluenceTh">Logical backup</th><th class="confluenceTh">aexport</th><td class="confluenceTd"><ul><li>Number of database objects</li></ul></td><td class="confluenceTd">If creating objects is necessary during the recovery process, the number of objects can affect the recovery time.</td></tr><tr><th class="confluenceTh">iloader</th><td class="confluenceTd"><ul><li>Number of tables</li><li>Data usage of tables</li><li>Number of indexes</li></ul></td><td class="confluenceTd">Since the information of the file is read and inserted into the table (INSERT), the number of tables, the number of records, and the number of indexes affect the recovery time.</td></tr><tr><th rowspan="2" class="confluenceTh">Physical backup</th><th class="confluenceTh">Online backup</th><td class="confluenceTd"><ul><li>Data usage of memory tables</li><li>Memory index</li><li>Number of log files</li></ul></td><td class="confluenceTd"><p>Recovery is in progress while the Altibase server is running.<br />It takes time to load the memory table data into memory and rebuild the memory index.<br />Since log files are used in the recovery process, the number of log files to be reflected affects the recovery time.<br />The log file is determined by the amount of transactions that have occurred since the backup.</p></td></tr><tr><th class="confluenceTh">Offline backup</th><td class="confluenceTd"><ul><li>Data usage of memory tables</li><li>Memory index</li></ul></td><td class="confluenceTd"><p>The recovery time is shortest because the Altibase is restored by running only the backup file.</p><p>When running the Altibase server, it takes time to load the memory table data into the memory and rebuild the memory index.</p><p> </p></td></tr><tr><th colspan="2" class="confluenceTh">Incremental backup</th><td class="confluenceTd"><ul><li>Data usage of memory tables</li><li>Memory index</li><li>Number of log files</li></ul></td><td class="confluenceTd"><p>During the recovery process, it takes time to load the memory table data into memory and rebuild the memory index.<br />Since the log files are used in the recovery process, the number of log files to be reflected affects the recovery time.</p>The log file is determined by the amount of transactions that have occurred since the backup.</td></tr></tbody></table></div><p> </p><h2 id="id-2.ConsiderationsforDeterminingBackupPolicy-Backupperformingtime">Backup performing time</h2><hr /><p>The backup performing time takes a long time as the size of the database is larger, and it affects the transaction while executing the backup. Therefore, it is recommended to perform a backup at idle time during the Altibase operation.</p><p>This table summarizes the factors that affect the backup time by backup type and how they affect transactions.</p><ul><li><h3 id="id-2.ConsiderationsforDeterminingBackupPolicy-Backuptime">Backup time</h3><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="2" class="confluenceTh">Backup type</th><th class="confluenceTh">Factors affecting the time to back up</th><th class="confluenceTh">Description</th></tr><tr><th rowspan="2" class="confluenceTh">Logical backup</th><th class="confluenceTh">aexport</th><td class="confluenceTd">- Number of database objects</td><td class="confluenceTd">Since the object creation script is created, it is affected by the number of database objects at backup time.</td></tr><tr><th class="confluenceTh">iloader</th><td class="confluenceTd">- Number of tables<br />- Usage of tables</td><td class="confluenceTd">Since a text file created by retrieving data for each table, the time required for backup is affected by the number and usage of tables.</td></tr><tr><th rowspan="2" class="confluenceTh">Physical backup</th><th class="confluenceTh">Online backup</th><td class="confluenceTd">- Size of disk table data file<br />- Size of memory checkpoint image</td><td class="confluenceTd">Online backup is a process of physically copying data files, so the size of the data file affects the time required for backup.</td></tr><tr><th class="confluenceTh">Offline backup</th><td class="confluenceTd">- Size of disk table data file<br />- Size of memory checkpoint image file</td><td class="confluenceTd">Offline backup is also a process of physically copying data files, and the time required for backup is affected by the size of the data file.</td></tr><tr><th rowspan="2" class="confluenceTh">Incremental backup</th><th class="confluenceTh">Level 0 incremental backup</th><td class="confluenceTd">- Size of disk table data file<br />- Size of memory checkpoint image file</td><td class="confluenceTd">As a backup in a similar method to online backup, the size of the data file affects the time required for backup.</td></tr><tr><th class="confluenceTh">Level 1 incremental backup</th><td class="confluenceTd">- amount of change of data page</td><td class="confluenceTd">The time required for level 1 incremental backup is affected by the amount of data page change caused by the change transaction.</td></tr></tbody></table></div></li></ul><ul><li><h3 id="id-2.ConsiderationsforDeterminingBackupPolicy-Transaction">Transaction</h3><p>This is a table comparing the impact on transactions when performing a backup</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="2" class="confluenceTh">Backup type</th><th class="confluenceTh">Impact on transaction</th></tr><tr><th rowspan="2" class="confluenceTh">Logical backup</th><th colspan="1" class="confluenceTh">aexport</th><td class="confluenceTd">Temporarily unable to perform DDL</td></tr><tr><th colspan="1" class="confluenceTh">iloader</th><td class="confluenceTd">Memory GC increase during backup</td></tr><tr><th rowspan="2" class="confluenceTh">Physical backup</th><th colspan="1" class="confluenceTh">Online backup</th><td class="confluenceTd">Online log file increase due to inability to perform checkpoint during backup</td></tr><tr><th colspan="1" class="confluenceTh">Offline backup</th><td class="confluenceTd">Service downtime required</td></tr><tr><th colspan="2" class="confluenceTh">Incremental backup</th><td class="confluenceTd"><p>Normal DB performance degradation by activating the 'Page Change Tracking' function</p><p>Online log file increase due to inability to perform checkpoint during backup</p></td></tr></tbody></table></div></li></ul><h2 id="id-2.ConsiderationsforDeterminingBackupPolicy-Backupcopystoragecycle">Backup copy storage cycle</h2><hr /><p>It is recommended to keep at least two backup copies.</p><p>This is to prepare for the loss of backup copies due to an incorrect backup or a disk fault or user fault.</p><h2 id="id-2.ConsiderationsforDeterminingBackupPolicy-Configuringdiskpartitionsforbackup"><span style="color: rgb(0,0,0);">Configuring disk partitions for backup</span></h2><p><span style="color: rgb(0,0,0);"> </span></p><hr /><p><span style="color: rgb(0,0,0);">If the object storing the backup file is a disk, it is recommended that the backup location be set to space physically separated from the path where the database data files and log files are located.</span></p><p><span style="color: rgb(0,0,0);">During the database operation, disk I/O occurs as follows. However, an exception in the case of a service that mainly occurs only retrieving transactions in the memory table.</span></p><p><span style="color: rgb(0,0,0);"> </span></p><ul><li>Disk I/O for log files where changes to the database are recorded</li><li>Disk I/O to record to the memory checkpoint image file in the memory table</li><li>Disk I/O to read and record data files in the disk table</li></ul><p>Therefore, disk space is separated to minimize bottlenecks between disk I/O occurring during database operation and disk I/O while executing the backup.</p><p><span style="color: rgb(0,0,0);"><br /></span></p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:49</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
