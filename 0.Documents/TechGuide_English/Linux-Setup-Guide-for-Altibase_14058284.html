<!DOCTYPE html>
<html>
    <head>
        <title>Technical Documents(English) : Linux Setup Guide for Altibase</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Technical Documents(English)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_557064.html">Home</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Technical Documents(English) : Linux Setup Guide for Altibase
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> richard.nahm	</span>, last modified by <span class='editor'> david.cho</span> on Dec 23, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h2 id="LinuxSetupGuideforAltibase-Overview"><span class="md-plain md-expand">Overview</span></h2><p class="md-end-block md-p"><span class="md-plain">This document provides a guide for setting kernel parameters and OS user configuration for the stable operation of the Altibase server on the Linux system.</span></p><p class="md-end-block md-p"><span class="md-plain">This document is based on the version below:</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Altibase 5.5.1 or later</span></p></li><li class="md-list-item md-focus-container"><p class="md-end-block md-p md-focus"><span class="md-plain">Red Hat Enterprise Linux 6 or later</span></p></li></ul><div><h2 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-LinuxCompatibility"><span class="md-plain md-expand">Linux Compatibility</span></h2><p class="md-end-block md-p md-focus"><span class="md-plain">Linux has many distribution types, but the Altibase compatibility check is based on glib version regardless of the distribution type and kernel version.</span></p><div><span class="md-plain"><br /></span></div><div><h3 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-glibcCompatibilityVersion"><span class="md-plain md-expand">glibc Compatibility Version</span></h3><div><p class="md-end-block md-p md-focus"><span class="md-plain">Starting from Altibase 5.5.1, the compatibility is checked based on the glibc version. The glibc versions with guaranteed compatibility for each Altibase server version are as follows.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Altibase Server Version</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">glibc Version</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Altibase 7.1.0</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">2.12~2.20</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Altibase 6.5.1</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">2.12~2.20</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Altibase 6.3.1</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">2.3.4~2.20</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Altibase 6.1.1</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">2.3.4~2.20</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Altibase 5.5.1</span></span></td><td class="confluenceTd"><span class="td-span md-focus"><span class="md-plain">2.3.4~2.20</span></span></td></tr></tbody></table></div><h3 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-glibcRecommendedVersion"><span class="md-plain md-expand">glibc Recommended Version</span></h3><div><p class="md-end-block md-p"><span class="md-plain">glibc-2.12-1.166.el6_7.1 or later is recommended.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">In the previous version of glibc, there was a bug in which a system call (malloc/free) function could cause deadlock due to a race condition.</span></p><div><span class="md-plain"><br /></span></div><div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoChecktheglibcVersion"><span class="md-plain">How to Check the glibc Version</span></h3><p class="md-end-block md-p md-focus"><span class="md-plain">How to check the glibc version is as follows.</span></p><div><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ rpm -q glibc</pre>
</div></div><h2 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-KernelParameters"><span class="md-plain md-expand">Kernel Parameters</span></h2><div><p class="md-end-block md-p"><span class="md-plain">This section describes the types of kernel parameters, recommended values, and recommended reasons for configuring Altibase in Linux to operate stably.</span></p><p class="md-end-block md-p"><span class="md-plain md-expand">The recommended parameter types are as follows:</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">CPU frequency Governor</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">RemoveIPC</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">swappiness</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">THP</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">max_map_count</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Shared memory</span></p></li><li class="md-list-item md-focus-container"><p class="md-end-block md-p md-focus"><span class="md-plain">Semaphore</span></p></li></ul><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-CPUFrequencyGovernor"><span class="md-plain">CPU Frequency Governor</span></h3><p class="md-end-block md-p"><span class="md-plain">Altibase server is a system that absolutely requires maximum processing performance and shortest response time, so CPU clock speed should always be kept at the highest level.</span></p><p class="md-end-block md-p"><span class="md-plain">Linux keeps pace with green IT (environmentally friendly computing) and efficiently minimizes power consumption of the system as the core of power management and provides CPUfreq Governor for this.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">The default setting of OnDemand Governor in RHEL 6 has a case where the Altibase server performance cannot guarantee consistency due to the delay due to frequency change. Therefore, it is recommended to set it to 'performance' or disable this function itself.</span></p></div><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span md-focus"><span class="md-plain md-expand">Kernel Parameter</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">CPU frequency Governor</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">(CPUfreq Governor)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">This is a performance adjuster that adjusts CPU frequency change rules, etc. for power management in Linux.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">The default value of RHEL 6 is OnDemand, the CPU operates at the highest clock frequency when the system load is high, and operates at the lowest frequency when the system is idle.</span></span></td><td class="confluenceTd"><span class="td-span md-focus"><span class="md-plain md-expand">performance</span></span></td></tr></tbody></table></div><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-LinuxKernelVersion"><span class="md-plain">Linux Kernel Version</span></h4><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">CPUfreq Governor has beens supported starting from Red Enterprise Linux 6.</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">The kernel version of RHEL 6 is 2.6.32-71.</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain"><a href="https://access.redhat.com/articles/3078" class="external-link" rel="nofollow">Red Hat Enterprise Linux Release Dates</a></span></p></li></ul><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-RemoveIPC"><span class="md-plain">RemoveIPC</span></h3><p class="md-end-block md-p"><span class="md-plain">RemoveIPC is an option added in RHEL 7.2. It is a Linux property that removes the System V IPC and POSIX IPC objects when the OS user terminates the session.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">In the case of the default setting 'yes', cases of abnormal termination of the Altibase server and applications due to forced semaphore allocation and return in the Altibase environment using IPC have been reported. Even in an environment that does not use IPC, 'no' is recommended because there have also been reported that affects system performance due to RemoveIPC-related actions and system calls occurring in the kernel.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Kernel Parameter</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">RemoveIPC</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Removes all IPC resources when the OS user logs out.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">The root user and system user are not affected by this setting. The default value is 'yes'.</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">no</span></span></td></tr></tbody></table></div><h4 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-LinuxKernelVersion.1"><span class="md-plain">Linux Kernel Version</span></h4><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">RemoveIPC is an option added in Red Hat Enterprise Linux 7.2.</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">The kernel version of RHEL 7.2 is 3.10.0-327.</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain"><a href="https://access.redhat.com/articles/3078" class="external-link" rel="nofollow">Red Hat Enterprise Linux Release Dates</a></span></p></li></ul><div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-"><span class="md-plain"><br /></span></h3><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Swappiness"><span class="md-plain">Swappiness</span></h3><p class="md-end-block md-p"><span class="md-plain">This is a recommended kernel parameter to minimize the effect of disk I/O on the performance of the Altibase server when swapping occurs.</span></p><p class="md-end-block md-p"><span class="md-plain">Swapping refers to the operation (swap out) of moving out the physical memory area, which is less frequently used, into the swap area in a situation where the physical memory is insufficient. The swap is to use the disk as a memory and when the swap out occurs, the system performance decreases due to DISK I/O.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Therefore, it is important to properly set the swappiness to maintain the stable and consistent performance of the Altibase server.</span></p></div><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Kernel Parameter</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">swappiness</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">This can be set between 0 to 100.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">A low value makes the kernel use pages from page cache as much as possible, and a high value prefers to swap out less frequently used pages(cold pages)Linux for managing a car amount of memory in physical memory.</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">1</span></span></td></tr></tbody></table></div><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Disabling swappiness completely increases the likelihood that the Altibase server process will be killed abnormally by the OOM Killer in low memory situations.</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Recommendation '1' is a setting to minimize swapping without disabling swappiness.</span></p></li><li class="md-list-item md-focus-container"><p class="md-end-block md-p md-focus"><span class="md-plain">The page cache is a memory area managed by Linux to improve file I/O performance.</span></p></li></ul></div></div></div><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-LinuxKernelVersion.2"><span class="md-plain">Linux Kernel Version</span></h4><ul class="ul-list"><li class="md-list-item md-focus-container"><p class="md-end-block md-p md-focus"><span class="md-plain">Swappiness applies to all kernel versions</span></p></li></ul></div></div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-THP(TransparentHugePages)"><span class="md-plain">THP(Transparent Huge Pages)</span></h3><p class="md-end-block md-p"><span class="md-plain">THP is a setting adopted by Linux for managing a large amount of memory. It is a setting to automate the function of expanding a memory page of 4096 bytes in units of 2MB or 1GB.</span></p><p class="md-end-block md-p"><span class="md-plain">However, in the Altibase operating environment, cases of performance issues due to memory allocation delays and fragmentation have been reported, so deactivation is recommended.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Kernel Parameter</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">THP(transparent_hugepage)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">This automates the function to expand the memory page unit managed by the kernel from the existing 4K to 2M or 1G.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">The default value is 'always'</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Never</span></span></td></tr></tbody></table></div><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-LinuxKernelVersion.3"><span class="md-plain">Linux Kernel Version</span></h4><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">THP (Transparent Huge Pages) has been supported starting with Red Hat Enterprise Linux 6.</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">The kernel version of RHEL 6 is 2.6.32-71.</span></p></li><li class="md-list-item md-focus-container"><p class="md-end-block md-p md-focus"><span class="md-plain"><a href="https://access.redhat.com/articles/3078" class="external-link" rel="nofollow">Red Hat Enterprise Linux Release Dates</a></span></p></li></ul><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-max_map_count"><span class="md-plain">max_map_count</span></h3><p class="md-end-block md-p"><span class="md-plain">When operating a terabyte unit memory table, memory allocation may fail due to the max_map_count parameter limitation. It is recommended to set it to a sufficiently large value because it can seriously affect the operation of Altibase such as transaction failure.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Kernel Parameter</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">max_map_count</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">This is the maximum number of memory map areas that a process can use.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">In most cases, the default value 65530 is suitable, but if the user needs to map more than this file to the application, the user should increase this value.</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">2147483647</span></span></td></tr></tbody></table></div><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">If memory allocation fails due to this parameter limitation,</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">The following message may be left in the Altibase trace log altibase_boot.log.</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Failed to mmap log file ( errno=ENOMEM(12), Not enough memory </span></p></li></ul></li><li class="md-list-item md-focus-container"><p class="md-end-block md-p md-focus"><span class="md-plain">In the application, an error such as Memory [iduMemMgr :: malloc] failed. may occur.</span></p></li></ul></li></ul><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-SharedMemory"><span class="md-plain">Shared Memory</span></h3><p class="md-end-block md-p"><span class="md-plain">This is a kernel parameter required when multiple applications need to exchange information with each other on one server.</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">When the communication method between Altibase server and client is IPC or IPCDA type</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Two or more Altibase applications communicate over IPC</span></p></li></ul><p class="md-end-block md-p"><span class="md-plain">The OS provides a resource called IPC (Inter Process Communication). Among various IPC resources, the memory area used by two or more processes to exchange information is called shared memory. The shared memory can be set by the user by dividing it into one or more areas by specifying a unit, and this is called a segment.</span></p><p>For example, a user can set up a shared memory with one segment at 10 MB or a shared memory of 100 MB by organizing 10 segments with 10 MB. Therefore, it is necessary to set the segment-related kernel parameters such as the maximum size or number of segments.</p><p class="md-end-block md-p"><span class="md-plain">Shared memory related parameters provided by Linux and recommended values from Altibase are as follows.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Kernel Parameter</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">shmmni</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum number of shared memory segments that can be created. The default value is 4096.</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">4096</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">shmmax</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum size of one shared memory segment, in bytes.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">For x86 systems, the minimum setting is 268435456 bytes (256MB) and for 64-bit systems it is 2147483648 bytes (2GB).</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">2147483648</span></span></td></tr></tbody></table></div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Semaphore"><span class="md-plain">Semaphore</span></h3><p class="md-end-block md-p"><span class="md-plain">This is a kernel parameter required to implement synchronization between processes when the communication method between the Altibase server and the client is IPC or IPCDA type.</span></p><p class="md-end-block md-p"><span class="md-plain">Semaphore is a resource provided by the OS to restrict access to shared resources in IPC. Since the shared memory is used as a communication buffer in the IPC or IPCDA communication method, semaphore operation is used to control read/write concurrency for this resource. Depending on the semaphore operation, the process can be in waiting or in progress state. Since semaphore operations occur simultaneously, it is necessary to set the number of semaphores and the appropriate kernel parameters for the operations.</span></p><p class="md-end-block md-p"><span class="md-plain">Semaphore-related parameters provided by Linux and recommended values from Altibase are as follows.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Kernel Parameter</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">semmsl</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum number of semaphores in a set of semaphores and must be logically equal to or less than semmns.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">If set too large, several semaphore IDs can monopolize the entire system semaphore</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">2000</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">semmns</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum number of semaphores in the operating system, and 16 bytes of kernel memory are allocated per one.</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">32000</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">semopm</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum number of operations handled by the semop system call.</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">512</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">semmni</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum number of semaphore sets can be set within 65535 and 85 bytes of kernel memory is allocated per set.</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">5029</span></span></td></tr></tbody></table></div><h2 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoChangeKernelParameters"><span class="md-plain">How to Change Kernel Parameters</span></h2><p class="md-end-block md-p"><span class="md-plain">Let's learn how to check and change the settings of each kernel parameter.</span></p><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-CPUfrequencyGovernor"><span class="md-plain">CPU frequency Governor</span></h3><p class="md-end-block md-p"><span class="md-plain">It is recommended that the CPU frequency governor is set as performance.</span></p><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoCheckSetValue"><span class="md-plain">How to Check Set Value</span></h4><p class="md-end-block md-p"><span class="md-plain">This is a verification method commonly used in RHEL 6 and 7. Normally, it is checked with the cat command. If the cpupowerutils package is installed, it can also be checked with the cpupower command.</span></p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-catcommand"><span class="md-plain">cat command</span></h5><p class="md-end-block md-p"><span class="md-plain">This is verification method commonly user in RHEL 6 and 7.</span></p><h6 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-CPUfrequencygovernorsettingconfirmationmethodandoutputexample-cat"><span class="md-plain">CPU frequency governor setting confirmation method and output example - cat</span></h6><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ cat /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor | sort -u
performance
 
   # If CPUfreq driver is not installed, the following output may be displayed.
   # In this case, it is not necessary to consider the CPU frequency governor setting.
$ cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
cat: /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor: There is no such file or directory</pre>
</div></div><p><strong>How to check whether the CPUfreq governor driver is installed</strong></p><h6 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-RedHatEnterpriseLinux6"><span class="md-plain">Red Hat Enterprise Linux 6</span></h6><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ lsmod | grep cpufreq
acpi_cpufreq            7699  0
freq_table              4936  1 acpi_cpufreq
mperf                   1557  1 acpi_cpufreq
 
# Or
 
$ cpupower frequency-info | grep driver
 driver: acpi-cpufreq
 
# If CPUfreq driver is not installed, the output result is as follows.
# lsmod output does not appear.
$ lsmod | grep cpufreq                                    
$ cpupower frequency-info | grep driver
 no or unknown cpufreq driver is active on this CPU</pre>
</div></div><h6 id="LinuxSetupGuideforAltibase-RedHatEnterpriseLinux7"><span style="color: rgb(119,119,119);">Red Hat Enterprise Linux 7</span></h6><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ cpupower frequency-info | grep driver
  driver: intel_pstate</pre>
</div></div><p><span style="color: rgb(119,119,119);"> </span></p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-cpupowercommand"><span class="md-plain">cpupower command</span></h5><p><span style="color: rgb(119,119,119);"> </span></p><p class="md-end-block md-p md-focus"><span class="md-plain">How to check CPU frequency governor settings - cpupower</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Statements and output examples
# The output may differ depending on the cpupower command version
$ cpupower frequency-info --policy
analyzing CPU 0:
  current policy: frequency should be within 1.20 GHz and 3.60 GHz.
                  The governor &quot;performance&quot; may decide which speed to use
                  within this range.
 
# Output result when CPUfreq driver is not installed
$ cpupower frequency-info --policy
analyzing CPU 0:
  Unable to determine current policy</pre>
</div></div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtocheckclockspeedperCPUcore"><span class="md-plain">How to check clock speed per CPU core</span></h5><p class="md-end-block md-p md-focus"><span class="md-plain">Check if the clock speed of all CPU cores is set with the following command.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ grep MHz /proc/cpuinfo | sort -u</pre>
</div></div><h4 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-HowtoChangetheSettings"><span class="md-plain md-expand">How to Change the Settings</span></h4><div><span class="md-plain md-expand"><br /></span><strong><span><u><span class="md-plain">Red Hat Enterprise Linux 6</span></u></span></strong></div><p class="md-end-block md-p md-focus"><span class="md-plain md-expand">This is how to change the CPU frequency governor in Red Hat Enterprise Linux 6.</span></p><div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-1.ChangeImmediately"><span class="md-plain">1. Change Immediately</span></h5><p class="md-end-block md-p md-focus"><span class="md-plain">Settings using the governor directive and the cpupower command can be changed while online, but initialized when the OS is restarted.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Governordirectivesusingthecatcommand"><span class="md-plain md-expand">Governor directives using the cat command</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">CPUfreq Governor immediate change in RHEL 6 1 - cat command</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># The following instructions are repeated as many as the the number of CPU cores.
$ echo performance &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
$ echo performance &gt; /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor
...</pre>
</div></div><h6 class="md-end-block md-p md-focus" id="LinuxSetupGuideforAltibase-cpupower"><span class="md-plain"><span style="color: rgb(119,119,119);">cpupower</span></span></h6><div><span class="md-plain"><span>CPUfreq Governor immediate change in RHEL 6 2 - cpupower command</span></span></div></div><div><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ cpupower frequency-set -g performance</pre>
</div></div><div><span style="color: rgb(119,119,119);"><br /></span></div><div><strong><span style="color: rgb(119,119,119);">tuned</span></strong></div><p><span style="color: rgb(0,0,0);">For systems with tuned system tools enabled, refer to [RHEL 7 CPUfreq Governor Permanently Applied - tuned].</span></p><p><span style="color: rgb(0,0,0);">How to check the tuned system tool activation</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Example of output when tuned service is enabled
 
$ tuned-adm active
Current active profile: throughput-performance
 
# Example of output when tuned service is disabled

$ tuned-adm active
Current active profile: default
Service tuned: disabled, stopped
Service ktune: disabled, stopped</pre>
</div></div><p><span style="color: rgb(0,0,0);"><br /></span></p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-PermanentApplication"><span class="md-plain">Permanent Application</span></h5><p class="md-end-block md-p"><span class="md-plain">This is a way to keep the settings even after restarting the OS.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Tuned"><span class="md-plain">Tuned</span></h6><p class="md-end-block md-p"><span class="md-plain">Refer to [RHEL 7 CPUfreq Governor permanently applied - tuned].</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-rc.local"><span class="md-plain">rc.local</span></h6><p class="md-end-block md-p"><span class="md-plain">Used when the tuned service is disabled.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">How to apply RHEL 6 CPUfreq Governor permanently 2 - rc.local</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Add the following command to the number of CPU cores in the /etc/rc.d/rc.local file.
echo performance &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
echo performance &gt; /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor
...</pre>
</div></div><p><span style="color: rgb(0,0,0);"><u><span class="md-plain"><br /></span></u></span></p><p><span style="color: rgb(0,0,0);"><u><span class="md-plain">Red Hat Enterprise Linux 7</span></u></span></p><p class="md-end-block md-p"><span class="md-plain">This is how to change the CPU frequency governor in Red Hat Enterprise Linux 7.</span></p><p><span style="color: rgb(0,0,0);"> </span></p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Changeimmediately"><span class="md-plain">Change immediately</span></h5><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Cpupower"><span class="md-plain">Cpupower</span></h6><p class="md-end-block md-p"><span class="md-plain">Configuration changes using the cpupower command are initialized when the OS is restarted.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Apply RHEL 7 CPUfreq Governor settings immediately - cpupower.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ cpupower frequency-set -g performance</pre>
</div></div><p><span style="color: rgb(0,0,0);"> </span></p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Permanentapplication"><span class="md-plain">Permanent application</span></h5><p><span style="color: rgb(0,0,0);"> </span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-tuned"><span class="md-plain" style="color: rgb(0,0,0);">tuned</span></h6><p><span style="color: rgb(0,0,0);"> </span></p><p class="md-end-block md-p"><span class="md-plain">Use the throughput-performance or latency-performance profiles provided by Linux. Using these two profiles, it can see the following effects:</span></p><p><span style="color: rgb(0,0,0);"> </span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">CPUfreq governor is set to performance</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">CPU clock speed is fixed as maximum</span></p></li></ul><p><span style="color: rgb(0,0,0);"> </span></p><p class="md-end-block md-p"><span class="md-plain">For reference, the default profile of Red Hat Enterprise Linux 7 is throughput-performance.</span></p><p><span style="color: rgb(0,0,0);"> </span></p><p class="md-end-block md-p"><span class="md-plain">There are two ways to set the throughput-performance or latency-performance profile.</span></p><p><span style="color: rgb(0,0,0);"> </span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Firstmethod:Includethethroughput-performanceprofileintheactiveprofile."><span class="md-plain">First method: Include the throughput-performance profile in the active profile.</span></h6><p><span style="color: rgb(0,0,0);"> </span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Permanent application of RHEL 7 CPUfreq Governor-How to include a throughput-performance profile in active tuned profile</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># 1. Check the activated tuned profile
# The following is an example when the tuned active profile is not throughput-performance or latency-performance.
# An example of the execution of the commander, and in the result below, the active profile is virtual-guest.
$ tuned-adm active
Current active profile: virtual-guest
 
# 2. Go to the profile path.
# The default path of tuned profile is /usr/lib/tuned/profile_name. 
# Add include to the [main] type as shown below.
# Delete the [cpu] type, if any.
$ cd /usr/lib/tuned/virtual-guest
$ vi tuned.conf
 
[main]
include=throughput-performance
 
# 3. Apply the changed profile.
$ tuned-adm profile virtual-guest</pre>
</div></div><h6 id="LinuxSetupGuideforAltibase-Secondmethod:Changetheactiveprofiletothroughput-performance."><span style="color: rgb(0,0,0);">Second method: Change the active profile to throughput-performance.</span></h6><p><span style="color: rgb(0,0,0);"><span>Permanent application of RHEL 7 CPUfreq Governor - Example of changing the active profile to throughput-performance</span></span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ tuned-adm profile throughput-performance</pre>
</div></div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-RemoveIPC.1"><span class="md-plain md-expand">RemoveIPC</span></h3><p class="md-end-block md-p md-focus"><span class="md-plain">RemoveIPC applies to Red Hat Enterprise Linux 7.2 and later, and the recommended value is 'no'.</span></p><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoCheckSetValue.1"><span class="md-plain">How to Check Set Value</span></h4><p class="md-end-block md-p"><span class="md-plain">Make sure RemoveIPC = no is set in the logind.conf file.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Check RemoveIPC settings</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ grep RemoveIPC /etc/systemd/logind.conf
RemoveIPC=no</pre>
</div></div><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoChangetheSettings.1"><span class="md-plain">How to Change the Settings</span></h4><p class="md-end-block md-p"><span><strong><span><u><span class="md-plain">Red Hat Enterprise Linux 7</span></u></span></strong></span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ChangeImmediate"><strong>Change Immediate</strong></h6><p class="md-end-block md-p">RemoveIPC does not provide a way to change immediately on Linux</p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-PermanentApplication.1"><strong>Permanent Application</strong></h6><p class="md-end-block md-p">Open the /etc/systemd/logind.conf file with an editor and change RemoveIPC = no.</p><p class="md-end-block md-p md-focus">How to change RemoveIPC</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/systemd/logind.conf
 
#  This file is part of systemd.
...
[Login]
...
RemoveIPC=no</pre>
</div></div><p class="md-end-block md-p"><span class="md-plain">Restart the OS or execute the following command to apply the changes.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Apply after changing RemoveIPC</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ systemctl restart systemd-logind.service</pre>
</div></div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-swappiness"><span class="md-plain">swappiness</span></h3><p class="md-end-block md-p"><span class="md-plain">Check the current setting value, and if the setting is not recommended, change it by referring to the guide below.</span></p><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoCheckSetValue.2"><span class="md-plain">How to Check Set Value</span></h4><p class="md-end-block md-p"><span class="md-plain">Checking the settings is the same regardless of the Linux version. There are two ways to do this.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Usecat"><span class="md-plain">Use cat</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">How to check swappiness setting 1 - cat</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ cat /proc/sys/vm/swappiness         # Altibase&#39;s recommended setting is 1.</pre>
</div></div><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Usesysctl"><span class="md-plain">Use sysctl</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">How to check swappiness setting 2 - sysctl</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sysctl -a | grep swappiness         # Altibase&#39;s recommended setting is 1.</pre>
</div></div><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-.1"><span class="md-plain"><br /></span></h4><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoChangetheSettings.2"><span class="md-plain">How to Change the Settings</span></h4><p class="md-end-block md-p"><span><strong><span><u><span class="md-plain">Red Hat Enterprise Linux 6</span></u></span></strong></span></p><p class="md-end-block md-p">This is how to change swappiness in Red Hat Enterprise Linux 6.</p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ChangeImmediately"><strong>Change Immediately</strong></h5><p class="md-end-block md-p">Use the echo or sysctl command.</p><p class="md-end-block md-p md-focus">How to change RHEL 6 swappiness immediately 1 - echo</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ echo 1 &gt; /proc/sys/vm/swappiness</pre>
</div></div><p> </p></div><div><span><br /></span></div><div><span>How to change RHEL 6 swappiness immediately 2 - sysctl</span></div><div><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sysctl -w vm.swappiness=1</pre>
</div></div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-PermanentApplication.2"><span class="md-plain">Permanent Application</span></h5><p class="md-end-block md-p"><span class="md-plain">It can be configured in two ways, sysctl.conf and rc.local, so they all apply the same way.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-sysct.conf"><span class="md-plain">sysct.conf</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">How to permanently apply RHEL 6 swappiness 1 - sysctl</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/sysctl.conf
vm.swappiness = 1                   # Add vm.swappiness = 1 to the sysctl.conf file or change the value.</pre>
</div></div><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-rc.local.1"><span class="md-plain">rc.local</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">How to permanently apply RHEL 6 swappiness 2 - rc.local</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/rc.d/rc.local
echo 1 &gt; /proc/sys/vm/swappiness    # Add this command to the rc.local file.</pre>
</div></div><div><u><span class="md-plain"><br /></span></u></div><div><u><span class="md-plain">Red Hat Enterprise 7</span></u></div><p class="md-end-block md-p"><span class="md-plain">This is how to change swappiness in Red Hat Enterprise Linux 7.</span></p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ChangeImmediately.1"><span class="md-plain">Change Immediately</span></h5><p class="md-end-block md-p"><span class="md-plain">Use the echo or sysctl command.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">How to change RHEL 7 swappiness immediately 1 - echo</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ echo 1 &gt; /proc/sys/vm/swappiness</pre>
</div></div><div><span><br /></span></div><div><span>How to change RHEL 7 swappiness immediately 2 - sysctl</span></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sysctl -w vm.swappiness=1</pre>
</div></div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-PermanentApplication.3"><span class="md-plain">Permanent Application</span></h5><p class="md-end-block md-p"><span class="md-plain">It can be set in two ways, tuned profile and sysctl.conf, so they are all applied identically.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-tuned.1"><span class="md-plain">tuned</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">How to permanently apply RHEL 7 swappiness - tuned</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Check the activated Tuned profile.
$ tuned-adm active
 
# Example
# In the results below, the active profile is throughput-performance.
$ tuned-adm active
Current active profile: throughput-performance
 
 
# Go to the profile path.
# The default path for tuned profiles is /usr/lib/tuned/profile_name.
# Example when the active profile is throughput-performance.
$ cd /usr/lib/tuned/throughput-performance
 
# Open the tuned.conf file.
# Add or change swappiness setting in [sysctl] type. If there is no [sysctl] type, add it.
$ vi tuned.conf
[sysctl]
vm.swappiness=1
 
# Apply the changed profile.
$ tuned-adm profile &#39;profile_name&#39;</pre>
</div></div><strong>/etc/sysctl.conf</strong><p class="md-end-block md-p md-focus"><span class="md-plain md-expand">How to permanently apply RHEL 7 swappiness - sysctl.conf</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/sysctl.conf
vm.swappiness = 1</pre>
</div></div><p>Restart the OS to see the changes. Restarting the OS may be performed at once after all kernel parameters are changed.</p></div><div><span><br /></span></div><div><span><br /></span></div><div><div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-THP"><span class="md-plain">THP</span></h3><p class="md-end-block md-p"><span class="md-plain">Check the current setting value, and if the setting is not recommended, change it by referring to the guide below.</span></p><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoCheckSetValue.3"><span class="md-plain">How to Check Set Value</span></h4><p class="md-end-block md-p"><span class="md-plain">Checking the settings is the same regardless of the Linux version.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>3 ways to check your THP settings</b></div><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ cat /sys/kernel/mm/transparent_hugepage/enabled    # recommendation : never
always madvise [never]

$ grep -i huge /proc/meminfo                         # All values except Hugepagesize must be 0.
AnonHugePages:         0 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB

$ cat /proc/cmdline                                  # Check that the transparent_hugepage=never setting is included in the output result.
BOOT_IMAGE=/vmlinuz-3.10.0-862.el7.x86_64 root=/dev/mapper/centos-root ro crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet transparent_hugepage=never</pre>
</div></div><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-.2"><span class="md-plain"><br /></span></h4><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoChangetheSettings.3"><span class="md-plain">How to Change the Settings</span></h4><p class="md-end-block md-p"><strong><u><span class="md-plain">Red Hat Enterprise Linux 6</span></u></strong></p><p class="md-end-block md-p">This is how to disable THP in Red Hat Enterprise Linux 6.</p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ChangeImmediately.2"><strong>Change Immediately</strong></h5><p class="md-end-block md-p">The command below stops only for new TPH creating and using. <span class="VIiyi" lang="en">Since the previously created THP is not released, you must restart the OS with THP disabled in order to completely remove it.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ echo never &gt; /sys/kernel/mm/redhat_transparent_hugepage/enabled
$ echo never &gt; /sys/kernel/mm/redhat_transparent_hugepage/defrag</pre>
</div></div><p> </p></div><div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-PermanentApplication.4"><span class="md-plain">Permanent Application</span></h5><p class="md-end-block md-p"><span class="VIiyi" lang="en">Applies to both the grub.conf file and the rc.local file.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-/etc/grub.conf"><span class="md-plain">/etc/grub.conf</span></h6><p class="md-end-block md-p md-focus"><span class="VIiyi" lang="en">Add the transparent_hugepage=never setting to the grub.conf file.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/grub.conf
default=0
timeout=5
splashimage=(hd0,0)/grub/splash.xpm.gz
hiddenmenu
title Red Hat Enterprise Linux 6 (2.6.32-504.el6.x86_64)
        root (hd0,0)
           # Add transparent_hugepage=never in the last part below.
        kernel /vmlinuz-2.6.32-504.el6.x86_64 ro root=/dev/mapper/vg_os-lv_os rd_NO_LUKS LANG=en_US.UTF-8 rd_NO_MD SYSFONT=latarcyrheb-sun16 crashkernel=auto rd_LVM_LV=vg_os/lv_os  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet transparent_hugepage=never            
        initrd /initramfs-2.6.32-504.el6.x86_64.img</pre>
</div></div><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-/etc/rc.d/rc.local"><span class="md-plain">/etc/rc.d/rc.local</span></h6><p class="md-end-block md-p md-focus"><span class="VIiyi" lang="en">Add the following to the rc.local file.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/rc.d/rc.local
...
   # Add the following script.
if test −f /sys/kernel/mm/transparent_hugepage/enabled; then
echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled
fi
if test −f /sys/kernel/mm/transparent_hugepage/defrag; then
echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag
fi</pre>
</div></div><div><u><span class="md-plain"><br /></span></u></div><div><span class="md-plain"><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"><span>Restart the OS and check the settings.</span></span> <span class="JLqJ4b ChMk0b"><span>OS restart can be performed at once after changing all kernel parameters.</span></span></span></span></div><div><u><span class="md-plain"><br /></span></u></div><div><strong><u><span class="md-plain">Red Hat Enterprise 7</span></u></strong></div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ChangeImmediately.3"><span class="md-plain">Change Immediately</span></h5><p class="md-end-block md-p"><span class="VIiyi" lang="en">In RHEL 7, the THP setting cannot be changed while the OS is running.</span></p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-PermanentApplication.5"><span class="md-plain">Permanent Application</span></h5><p class="md-end-block md-p"><span class="VIiyi" lang="en">For Red Hat Enterprise Linux 7, you can enable it with grub and tuned settings, so disable it in all configurations.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-grub"><span class="md-plain">grub</span></h6><ol><li class="md-end-block md-p md-focus"><span class="VIiyi" lang="en">Add transparent_hugepage=never to the GRUB_CMDLINE_LINUX entry in the /etc/default/grub file.</span></li></ol><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/default/grub
GRUB_TIMEOUT=5
GRUB_DEFAULT=saved
GRUB_DISABLE_SUBMENU=true
GRUB_TERMINAL_OUTPUT=&quot;console&quot;
   # Add transparent_hugepage=never to the end of GRUB_CMDLINE_LINUX
GRUB_CMDLINE_LINUX=&quot;nomodeset crashkernel=auto rd.lvm.lv=vg_os/lv_root rd.lvm.lv=vg_os/lv_swap rhgb quiet transparent_hugepage=never&quot;         
GRUB_DISABLE_RECOVERY=&quot;true&quot;</pre>
</div></div><div><strong><br /></strong></div><div style="margin-left: 30.0px;">2. <span class="VIiyi" lang="en">Execute grub2-mkconfig to create a grub.cfg file.</span></div><div style="margin-left: 30.0px;">    <span class="VIiyi" lang="en">Since the location of the grub.cfg file creation differs depending on the firmware type, execute it by referring to the following command.</span></div><div style="margin-left: 30.0px;"><span class="VIiyi" lang="en"> </span><br /><strong>    <strong>On BIOS-based machines</strong></strong></div><div style="margin-left: 30.0px;"><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>RHEL 7 - BIOS - Create grub.cfg</b></div><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"> $ grub2-mkconfig -o /boot/grub2/grub.cfg</pre>
</div></div><p><strong>    On UEFI-based machines</strong></p></div><div style="margin-left: 30.0px;"><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>RHEL 7 - UEFI - Create grub.cfg</b></div><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"> $ grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg</pre>
</div></div>
<div id="expander-506561845" class="expand-container">
<div id="expander-control-506561845" class="expand-control">
    <span class="expand-control-icon"><img style="vertical-align:middle;" class="expand-control-image" src="images/icons/grey_arrow_down.png"></span><span class="expand-control-text">How to check UEFI mode</span>
</div>
<div id="expander-content-506561845" class="expand-content"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># 1. grub.conf location
$ ls -la /etc/grub.conf
lrwxrwxrwx. 1 root root 32 2016-08-22 19:55 /etc/grub.conf -&gt; ../boot/efi/EFI/redhat/grub.conf

# 2. Whether efi directory exists
$ ll /sys/firmware | grep ^d | grep -i efi
drwxr-xr-x 3 root root 0 2015-09-09 13:27 efi

# 3. dmesg
$ dmesg |grep EFI
 EFI v2.40 by EDK II
 EFI: mem00: type=3, attr=0xf, range=[0x0000000000000000-0x0000000000001000) (0MB)
 EFI: mem01: type=7, attr=0xf, range=[0x0000000000001000-0x000000000001e000) (0MB)
 EFI: mem02: type=2, attr=0xf, range=[0x000000000001e000-0x0000000000020000) (0MB)
 EFI: mem03: type=3, attr=0xf, range=[0x0000000000020000-0x000000000009f000) (0MB)
 ......</pre>
</div></div></div>
</div>
<p> </p></div><div><strong><span style="color: rgb(61,61,61);">tuned</span></strong></div><p class="md-end-block md-p md-focus"><span class="VIiyi" lang="en">If tuned service is activated, set THP deactivation in tuned profile.</span></p><p class="md-end-block md-p md-focus"><span class="VIiyi" lang="en">For reference, the default tuned profile of Red Hat Enterprise Linux 7 is throughput-performance, and THP activation is the default setting.</span></p><p class="md-end-block md-p md-focus"><span class="VIiyi" lang="en">Below is how to disable THP in active tuned profile.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">   # Check the activated tuned profile.
   # The following is an example of execution, and in the result below, the active profile is throughput-performance.
$ tuned-adm active
Current active profile: throughput-performance

   # Go to the profile path.
   # The default path of tuned profile is /usr/lib/tuned/profile_name.
   # An example of when the active profile is throughput-performance.
$ cd /usr/lib/tuned/throughput-performance

   # Open the tuned.conf file.
   # Add the transparent_hugepage setting to the [vm] type. If there is no [vm] type, add it.
$ vi tuned.conf
[vm]
transparent_hugepage=never

   # Apply the changed profile
$ tuned-adm profile &#39;profile_name&#39;</pre>
</div></div><p><span class="VIiyi" lang="en">There is also a way to register a new tuned profile.</span></p><p><a href="https://www.thegeekdiary.com/centos-rhel-7-how-to-disable-transparent-huge-pages-thp/" class="external-link" rel="nofollow">https://www.thegeekdiary.com/centos-rhel-7-how-to-disable-transparent-huge-pages-thp/</a></p><p> </p></div></div><div><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"><span>Restart the OS to confirm the changes.</span></span> <span class="JLqJ4b ChMk0b"><span>OS restart can be performed at once after changing all kernel parameters.</span></span></span></div><div><span><br /></span></div><div><span><br /></span></div><div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-max_map_count.1"><span class="md-plain">max_map_count</span></h3><p class="md-end-block md-p"><span class="md-plain">Check the current setting value, and if the setting is not recommended, change it by referring to the guide below.</span></p><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoCheckSetValue.4"><span class="md-plain">How to Check Set Value</span></h4><p class="md-end-block md-p md-focus"><span class="md-plain">Checking the settings is the same regardless of the Linux version. There are two ways to do this.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Usecat.1"><span class="md-plain">Use cat</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">How to check max_map_count setting 1 - cat</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ cat /proc/sys/vm/max_map_count        # The recommended setting value for Altibase is 2147483647.</pre>
</div></div><h6 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-Usesysctl.1"><span class="md-plain">Use sysctl</span></h6><p class="md-end-block md-p"><span class="md-plain md-expand">How to check max_map_count setting 2 - sysctl</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sysctl -a | grep max_map_count        # The recommended setting value for Altibase is 2147483647.</pre>
</div></div><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoChangetheSetting"><span class="md-plain">How to Change the Setting</span></h4><p class="md-end-block md-p"><span><strong><span><u><span class="md-plain">Red Hat Enterprise Linux 6</span></u></span></strong></span></p><p class="md-end-block md-p">This is how to change the max_map_count parameter setting in Red Hat Enterprise Linux 6.</p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ChangeImmediately.4"><strong>Change Immediately</strong></h5><p class="md-end-block md-p">Use the sysctl command.</p><p class="md-end-block md-p md-focus">How to change RHEL 6 max_map_count immediately - sysctl</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sysctl -w vm.max_map_count=2147483647</pre>
</div></div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-PermanentApplication.6"><span class="md-plain">Permanent Application</span></h5><p class="md-end-block md-p"><span class="md-plain">It can be configured in two ways, sysctl.conf and rc.local, so they all apply the same way.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-sysct.conf.1"><span class="md-plain">sysct.conf</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">RHEL 6 max_map_count Permanent application method 1 - sysctl</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/sysctl.conf
vm.max_map_count = 2147483647                   # Add vm.max_map_count = 2147483647 to the sysctl.conf file or change the value.</pre>
</div></div><h5 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-rc.local.2"><span class="md-plain">rc.local</span></h5><p class="md-end-block md-p"><span class="md-plain md-expand">How to permanently apply RHEL 6 max_map_count 2 - rc.local</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/rc.d/rc.local
echo 2147483647 &gt; /proc/sys/vm/max_map_count    # Add this command to the rc.local file.</pre>
</div></div><div><u><span class="md-plain"><br /></span></u></div><div><u><span class="md-plain">Red Hat Enterprise Linux 7</span></u></div><p class="md-end-block md-p"><span class="md-plain">This is how to change max_map_count in Red Hat Enterprise Linux 7.</span></p><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ChangeImmediately.5"><span class="md-plain">Change Immediately</span></h5><p class="md-end-block md-p"><span class="md-plain">Use the sysctl command.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">How to change RHEL 7 max_map_count immediately - sysctl</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sysctl -w vm.max_map_count=2147483647</pre>
</div></div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-PermanentApplication.7"><span class="md-plain">Permanent Application</span></h5><p class="md-end-block md-p"><span class="md-plain">It can be set in two ways, tuned profile and sysctl.conf, so they are all applied identically.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-tuned.2"><span class="md-plain">tuned</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">How to permanently apply RHEL 7 max_map_count - tuned</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Check the activated Tuned profile.
$ tuned-adm active
 
# Example.
# In the results below, the active profile is throughput-performance.
$ tuned-adm active
Current active profile: throughput-performance
 
 
# Go to the profile path.
# The default path of tuned profile is /usr/lib/tuned/profile_name.
# Example when the active profile is throughput-performance.
$ cd /usr/lib/tuned/throughput-performance
 
# Open the tuned.conf file.
# [sysctl] Add or change the swappiness setting for the type. If there is no [sysctl] type, add it.
$ vi tuned.conf
[sysctl]
vm.max_map_count=2147483647
 
# Apply the changed profile.
$ tuned-adm profile &#39;profile_name&#39;</pre>
</div></div><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-/etc/sysctl.conf"><span class="md-plain">/etc/sysctl.conf</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">How to permanently apply RHEL 7 max_map_count - sysctl.conf</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/sysctl.conf
vm.max_map_count=2147483647</pre>
</div></div><div><span><br /></span></div><div><span>Restart the OS to see the changes. Restarting the OS may be performed at once after all kernel parameters are changed.</span></div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-SharedMemoryandSemaphore"><span class="md-plain md-expand">Shared Memory and Semaphore</span></h3><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoCheckSetValue.5"><span class="md-plain">How to Check Set Value</span></h4><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-lpcscommand"><span class="md-plain">lpcs command</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">How to check shared memory and semaphore 1 - Using ipcs command</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Check shared memory kernel parameter settings
$ ipcs -m -l
------ Shared Memory Limits --------
max number of segments = 4096                         # shmmni (Recommended: 4096)
max seg size (kbytes) = 2097152                       # shmmax (Recommended: 2097152)
max total shared memory (kbytes) = 137438953472      
min seg size (bytes) = 1
 
 
# Check the semaphore kernel parameter settings
$ ipcs -s -l
------ Semaphore Limits --------
max number of arrays = 5029                           # semmni (Recommended: 5029)
max semaphores per array = 2000                       # semmsl (Recommended: 2000)
max semaphores system wide = 32000                    # semmns (Recommended: 32000)
max ops per semop call = 512                          # semopm (Recommended: 512)
semaphore max value = 32767</pre>
</div></div><h6 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-sysctlcommand"><span class="md-plain">sysctl command</span></h6><p class="md-end-block md-p"><span class="md-plain md-expand">How to check shared memory and semaphore 2 - Using sysctl command</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Examples of statements and results
$ sysctl -a | grep -e kernel.shmmax -e kernel.shmmni -e kernel.sem
kernel.shmmax = 2147483648
kernel.shmmni = 4096
kernel.sem = 2000        32000   512     5029</pre>
</div></div><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoChangetheSettings.4"><span class="md-plain">How to Change the Settings</span></h4><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ChangeImmediately.6"><span class="md-plain">Change Immediately</span></h5><p class="md-end-block md-p"><span class="md-plain">Use the echo command.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Immediate change shared memory and semaphores</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># Shared Memory Settings
echo 4096 &gt; /proc/sys/kernel/shmmni
echo 2147483648 &gt; /proc/sys/kernel/shmmax
 
# Semaphore settings
echo 2000 32000 512 5029 &gt; /proc/sys/kernel/sem</pre>
</div></div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-PermanentApplication.8"><span class="md-plain">Permanent Application</span></h5><p class="md-end-block md-p"><span class="md-plain">Add to /etc/sysctl.conf file.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Shared memory and semaphore permanent application - /etc/sysctl.conf</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ vi /etc/sysctl.conf
kernel.shmmni = 4096
kernel.shmmax = 2147483648
kernel.sem = 2000        32000   512     5029</pre>
</div></div><div><span><br /></span></div><div><span>Restart the OS to see the changes. Restarting the OS may be performed at once after all kernel parameters are changed.</span></div><h2 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-UserSetting"><span class="md-plain">User Setting</span></h2><p class="md-end-block md-p"><span class="md-plain">This section describes the user settings required to install and operate the Altibase server on Linux. A user is an OS user, and is a user who installs the Altibase server and runs the Altibase server process.</span></p><p class="md-end-block md-p"><span class="md-plain">The user login configuration file in the bash shell is .bash_profile. The user configuration file differs depending on the shell, but it is described based on the Linux default shell because it is a bash shell.</span></p><p class="md-end-block md-p"><span class="md-plain">The user setting is divided into the following two categories:</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Resource limitation</span></p></li><li class="md-list-item md-focus-container"><p class="md-end-block md-p md-focus"><span class="md-plain">Environment variable</span></p></li></ul><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ResourceLimitation"><span class="md-plain">Resource Limitation</span></h3><p class="md-end-block md-p"><span class="md-plain">Linux provides settings to limit system resources such as CPU, memory, and files. Proper configuration is necessary because the purpose of preventing a specific user from monopolizing system resources, or the limitation of file creation or memory allocation, has a fatal effect on the operation of the Altibase server.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">The resource items and recommended values in the Altibase server operating environment are as follows.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">ulimit command</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Items in limits.conf</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">data seg size (kbytes, -d)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">data</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum memory size of the process data area</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">file size (blocks, -f)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">fsize</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum size of files that can be created</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">open files (-n)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">nofile</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum number of open file descriptors a process can open</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">1048576</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">max memory size (kbytes, -m)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">rss</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum amount of available memory</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">virtual memory (kbytes, -v)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">as</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum amount of virtual memory available</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">max user processes (-u)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">nproc</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum number of processes (including threads) that the user can run</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr></tbody></table></div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-RelatedErrorMessage"><span class="md-plain">Related Error Message</span></h3><p class="md-end-block md-p"><span class="md-plain md-expand">This is an error message caused by resource limitations. If the following message is checked while operating the Altibase server, it is necessary to check the resource limit settings.</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Insufficient max user processes</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Failed to create a thread object.</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">resource temporarily unavailable</span></p></li></ul></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Insufficient open files</span></p><ul class="ul-list"><li class="md-list-item md-focus-container"><p class="md-end-block md-p md-focus"><span class="md-plain">Too many open files</span></p></li></ul></li></ul><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ViewandChangeResourceSettings"><span class="md-plain">View and Change Resource Settings</span></h3><p class="md-end-block md-p"><span class="md-plain">Resource limits are set for each user, but apply individually to user processes.</span></p><p class="md-end-block md-p"><span class="md-plain">To reflect the changed resource limit settings to the Altibase server, the Altibase server must be restarted.</span></p><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoCheckSetValue.6"><span class="md-plain">How to Check Set Value</span></h4><p class="md-end-block md-p md-focus"><span class="md-plain">This command checks the resource limit setting value.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ ulimit -a        # If -S or -H option is not specified, -S (Soft-Limit) is output.
 
$ ulimit -Ha       # Output the Hard-Limit setting value.</pre>
</div></div><span>Check the resource limit set in the Altibase server process with the following command.</span><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ cat /proc/`ps -ef | grep &#39;altibase -p&#39; | grep -v grep | awk &#39;{print $2}&#39;`/limits</pre>
</div></div><p>If the desired settings are not applied to the Altibase server process, the Altibase server must be restarted.</p><h3 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-HowtoChangetheSettings.5"><span class="md-plain">How to Change the Settings</span></h3><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Executeulimitcommand"><span class="md-plain">Execute ulimit command</span></h5><p class="md-end-block md-p"><span class="md-plain">ulimit is a command to set resource limits. The ulimit configuration command is added to the .bash_profile of the configuration file of the OS user who installs and runs the Altibase server.</span></p><p class="md-end-block md-p"><span class="md-plain md-expand">User resource limit setting example - added to .bash_profile</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">#For Resource Limitation
ulimit -d  unlimited  # data segment size
ulimit -f  unlimited  # file size
ulimit -n  1048576    # file descriptor(open files)
ulimit -m  unlimited  # max memory size(rss)
ulimit -v  unlimited  # virtual memory
ulimit -u  unlimited  # user process</pre>
</div></div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Applytheconfigurationfile(.bash_profile)"><span class="md-plain">Apply the configuration file (.bash_profile)</span></h5><p class="md-end-block md-p md-focus"><span class="md-plain">Apply ulimit setting with the following command.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">. ~/.bash_profile</pre>
</div></div><p><span>When applying the configuration file, the following error may occur.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">-bash: ulimit: open files: cannot modify limit: Command not accepted
-bash: ulimit: max user processes: cannot modify limit: Command not accepted</pre>
</div></div><p class="md-end-block md-p"><span class="md-plain">This is an error caused by Hard-Limit.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Hard-Limit&amp;Soft-Limit"><span>Hard-Limit &amp; Soft-Limit</span></h6><p class="md-end-block md-p"><span class="md-plain md-expand">System resource limits include Hard-Limit and Soft-Limit. Hard-Limit means the maximum resource limit setting value that can be set by the OS general user, and Soft-Limit means the resource limit value set by the user.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">If Hard-Limit is smaller than the value that user wants to set as ulimit, 'cannot modify limit' error occurs.</span></p><p><span>How to check Hard-Limit</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ ulimit -H -u -n    # The -H option means Hard-Limit.
max user processes              (-u) 1024
open files                      (-n) 4096</pre>
</div></div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Change/etc/security/limits.conf"><span class="md-plain">Change /etc/security/limits.conf</span></h5><p class="md-end-block md-p"><span class="md-plain">Hard-Limit changes require root privileges. Add the following setting to the limits.conf file and save it.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Hard-Limit configuration example - OS user name is altibase</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">#&lt;domain&gt;      &lt;type&gt;  &lt;item&gt;         &lt;value&gt;
altibase         -     nofile          1048576
altibase         -     nproc           unlimited</pre>
</div></div><p class="md-end-block md-p"><span class="md-plain">Log in as the OS user and perform step 2 again.</span></p><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-EnvironmentVariables"><span class="md-plain">Environment Variables</span></h3><p class="md-end-block md-p md-focus"><span class="md-plain">This is an environment variable to be set after installing the Altibase server.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Classification</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Environment Variable</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Setting Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Required (Auto Setting)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">ALTIBASE_HOME</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Specifies the path where Altibase is installed</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Depends on the environment</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Required (Auto Setting)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">PATH</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Finds the location Altibase's utilities and shell scripts</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">$ALTIBASE_HOME/bin</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Required (Auto Setting)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">LD_LIBRARY_PATH</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Finds the location of the Altibase dynamic library</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">$ALTIBASE_HOME/lib</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Required (Auto Setting)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">CLASSPATH</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Finds the location of the Java Class file</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">$ALTIBASE_HOME/lib</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Required (Manual Setting)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">ALTIBASE_NLS_USE</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Sets the Altibase client character set.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">Set the same as the Altibase server character set.</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Same as Altibase server character set</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Required (Manual Setting)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">LANG</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Defines the user's system locale</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">It is affected by the Altibase server character set.</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Select (Manual Setting)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">MALLOC_ARENA_MAX</span></span></td><td class="confluenceTd"><ul><li><span class="td-span"><span class="md-plain">A feature added in Red Hat Enterprise Linux 6 to improve performance issues due to memory contention between threads in a multi-threaded application environment.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span></span></li><li><span class="td-span"><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">The default is the number of CPU cores * MALLOC_ARENA_TEST.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span></span></li><li><span class="td-span"><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">The default value of MALLOC_ARENA_TEST environment: 2 for 32-bit, 8 for 64-bit.</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span></span></li><li><span class="td-span"><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">The MALLOC_ARENA_MAX environment variable works properly in glibc2.10 or later.</span></span></li></ul></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">-</span></span></td></tr></tbody></table></div><ul class="ul-list"><li class="md-list-item md-focus-container"><p class="md-end-block md-p md-focus"><span class="md-plain md-expand">Environment variable MALLOC_ARENA_MAX</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">This environment variable is optional.</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">In general, consider keeping the default value and setting it smaller than the default value if a memory issue is found.</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Since this environment variable affects the performance and memory usage of the Altibase server process according to the set value, it is difficult to recommend the same value collectively.</span></p></li><li class="md-list-item md-focus-container"><p class="md-end-block md-p md-focus"><span class="md-plain md-expand">The default value of this environment variable is influenced by the number of CPU cores. As the number of CPU cores increases, the VSZ of the Altibase server process may increase excessively.</span></p></li></ul></li></ul><h4 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoSetEnvironmentVariables"><span class="md-plain">How to Set Environment Variables</span></h4><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoChecktheSetValue"><span class="md-plain">How to Check the Set Value</span></h5><p class="md-end-block md-p"><span class="md-plain">Check if the required environment variables are set correctly.</span></p><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-envcommand"><span class="md-plain">env command</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">The env result prints all environment variables set for the session.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ env</pre>
</div></div><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-echocommand"><span class="md-plain">echo command</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">The specified environment variable settings are output. If the value is not output, it means that the environment variable is not set.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># This is an example of checking the ALTIBASE_HOME environment variable setting value using the echo command.
$ echo $ALTIBASE_HOME</pre>
</div></div><h5 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-HowtoChangetheSettings.6"><span class="md-plain">How to Change the Settings</span></h5><p class="md-end-block md-p"><span class="md-plain">This is a method of setting the ALTIBASE_NLS_USE and LANG environment variables that must be manually set among the required environment variables.</span></p><h6 class="md-end-block md-heading md-focus" id="LinuxSetupGuideforAltibase-ChecktheAltibaseservercharacterset"><span class="md-plain">Check the Altibase server character set</span></h6><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">iSQL&gt; SELECT NLS_CHARACTERSET FROM V$NLS_PARAMETERS;</pre>
</div></div><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Setenvironmentvariablesin.bash_profilefile"><span class="md-plain">Set environment variables in .bash_profile file</span></h6><p class="md-end-block md-p"><span class="md-plain">Environment variables are set in units of OS user sessions. Therefore, it must be added to the user configuration file .bash_profile to be applied every time an OS user connects.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">The table below shows the ALTIBASE_NLS_USE and LANG environment variable settings according to the Altibase server character set.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Altibase Server Character Set</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">ALTIBASE_NLS_USE</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">LANG</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">MS949</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">MS949</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">ko_KR.euckr</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">KOS16KSC5601</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">KOS16KSC5601</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">ko_KR.euckr</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">UTF88</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">UTF8</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Ko_KR.utf8</span></span></td></tr></tbody></table></div><p class="md-end-block md-p"><span class="md-plain md-expand">Refer to the table above and add environment variables to the user configuration file .bash_profile.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Environment variable setting example - added to .bash_profile</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># This is an example when the Altibase server character set is UTF8.
# Add the following contents to .bash_profile and save.
export ALTIBASE_NLS_USE=UTF8
export LANG=ko_KR.utf8</pre>
</div></div><h6 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Applytotheconfigurationfile.bash_profile"><span class="md-plain">Apply to the configuration file .bash_profile</span></h6><p class="md-end-block md-p md-focus"><span class="md-plain">Apply the environment variable added with the following command.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">. ~/.bash_profile</pre>
</div></div><p> </p><h2 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Summary"><span class="md-plain">Summary</span></h2><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="3" style="text-align: center;" class="confluenceTh">Category</th><th style="text-align: center;" class="confluenceTh"><span class="VIiyi" lang="en">Recommendation setting</span></th><th class="confluenceTh">How to check</th></tr><tr><th rowspan="8" class="confluenceTh"><strong><span><span><span style="color: rgb(67,67,67);">Kernel Parameter</span></span></span></strong></th><th colspan="2" rowspan="2" class="confluenceTh"><span>CPU frequency Governor</span></th><td style="text-align: center;" class="confluenceTd"><span>performance</span></td><td class="confluenceTd">cat /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor | sort -u</td></tr><tr><td colspan="1" style="text-align: center;" class="confluenceTd"><span class="VIiyi" lang="en">CPU core clock speed is fixed at maximum</span></td><td colspan="1" class="confluenceTd">grep MHz /proc/cpuinfo | sort -u</td></tr><tr><th colspan="2" class="confluenceTh"><span>RemoveIPC</span></th><td colspan="1" style="text-align: center;" class="confluenceTd"><span>no</span></td><td colspan="1" class="confluenceTd">grep RemoveIPC /etc/systemd/logind.conf</td></tr><tr><th colspan="2" class="confluenceTh"><span>swappiness</span></th><td colspan="1" style="text-align: center;" class="confluenceTd"><span>1</span></td><td colspan="1" class="confluenceTd"><p>cat /proc/sys/vm/swappiness or <br />sysctl -a | grepswappiness</p></td></tr><tr><th colspan="2" rowspan="3" class="confluenceTh"><span><span>THP</span></span><span> </span></th><td colspan="1" style="text-align: center;" class="confluenceTd"><span>never</span></td><td colspan="1" class="confluenceTd"><p>cat /sys/kernel/mm/transparent_hugepage/enabled</p></td></tr><tr><td colspan="1" style="text-align: center;" class="confluenceTd"><span class="VIiyi" lang="en">All 0 besides Hugepagesize</span></td><td colspan="1" class="confluenceTd">grep -i huge /proc/meminfo</td></tr><tr><td colspan="1" style="text-align: center;" class="confluenceTd">Including transparent_hugepage=never</td><td colspan="1" class="confluenceTd">cat /proc/cmdline</td></tr><tr><th colspan="2" class="confluenceTh">max_map_count</th><td colspan="1" style="text-align: center;" class="confluenceTd">2147483647</td><td colspan="1" class="confluenceTd">cat /proc/sys/vm/max_map_count</td></tr><tr><th rowspan="2" class="confluenceTh"><strong>Shared Memory</strong></th><th colspan="2" class="confluenceTh"><span>shmmni</span></th><td style="text-align: center;" class="confluenceTd"><span>4096</span></td><td rowspan="2" class="confluenceTd"><p>ipcs -m -l</p><p>sysctl -a | grep -e kernel.shmmax -e kernel.shmmni</p></td></tr><tr><th colspan="2" class="confluenceTh"><span>shmmax</span></th><td style="text-align: center;" class="confluenceTd"><span>2147483648</span></td></tr><tr><th rowspan="4" class="confluenceTh">Semaphore</th><th colspan="2" class="confluenceTh"><span>semmsl</span></th><td style="text-align: center;" class="confluenceTd"><span>2000</span></td><td rowspan="4" class="confluenceTd"><p>ipcs -s -l</p><p>sysctl -a | grep -kernel.sem</p><br /><br /><br /></td></tr><tr><th colspan="2" class="confluenceTh"><span>semmns</span></th><td style="text-align: center;" class="confluenceTd"><span>32000</span></td></tr><tr><th class="confluenceTh"><span>semopm</span></th><th colspan="1" class="confluenceTh"> </th><td style="text-align: center;" class="confluenceTd"><span>512</span></td></tr><tr><th colspan="2" class="confluenceTh"><span>semmni</span></th><td style="text-align: center;" class="confluenceTd"><span>5029</span></td></tr><tr><th rowspan="6" class="confluenceTh">OS User Resource Limitation<br /><br /><br /><br /><br /></th><th class="confluenceTh"><p>data seg size</p></th><th colspan="1" style="text-align: right;" class="confluenceTh">(kbytes, -d)</th><td style="text-align: center;" class="confluenceTd"><span>unlimited</span></td><td rowspan="6" class="confluenceTd">ulimit -a<br /><br /><br /></td></tr><tr><th class="confluenceTh"><p>file size<span><br /></span></p></th><th colspan="1" style="text-align: right;" class="confluenceTh">(blocks, -f)<span> </span></th><td style="text-align: center;" class="confluenceTd"><span>unlimited</span></td></tr><tr><th class="confluenceTh">open files                                    </th><th colspan="1" style="text-align: right;" class="confluenceTh">(-n)</th><td style="text-align: center;" class="confluenceTd"><span>1048576</span></td></tr><tr><th class="confluenceTh">max memory size</th><th colspan="1" style="text-align: right;" class="confluenceTh">(kbytes, -m)</th><td style="text-align: center;" class="confluenceTd"><span>unlimited</span></td></tr><tr><th class="confluenceTh">virtual memory</th><th colspan="1" style="text-align: right;" class="confluenceTh">(kbytes, -v)</th><td style="text-align: center;" class="confluenceTd"><span>unlimited</span></td></tr><tr><th class="confluenceTh">max user processes    </th><th colspan="1" style="text-align: right;" class="confluenceTh">(-u)</th><td style="text-align: center;" class="confluenceTd"><span>unlimited</span></td></tr><tr><th rowspan="6" class="confluenceTh"><span class="VIiyi" lang="en">OS User Environment Variable</span><br /><br /><br /><br /><br /></th><th class="confluenceTh"><span>ALTIBASE_HOME</span></th><th colspan="1" class="confluenceTh"> </th><td style="text-align: center;" class="confluenceTd"><span><span class="VIiyi" lang="en">Altibase installation path (absolute path)</span></span></td><td rowspan="6" class="confluenceTd">env <br /><br /><br /><br /><br /><br /></td></tr><tr><th class="confluenceTh"><span>PATH</span></th><th colspan="1" class="confluenceTh"> </th><td style="text-align: center;" class="confluenceTd"><span>$ALTIBASE_HOME/bin</span></td></tr><tr><th class="confluenceTh"><span>LD_LIBRARY_PATH</span></th><th colspan="1" class="confluenceTh"> </th><td style="text-align: center;" class="confluenceTd"><span>$ALTIBASE_HOME/lib</span></td></tr><tr><th class="confluenceTh"><span>CLASSPATH</span></th><th colspan="1" class="confluenceTh"> </th><td style="text-align: center;" class="confluenceTd"><span>$ALTIBASE_HOME/lib</span></td></tr><tr><th class="confluenceTh"><span>ALTIBASE_NLS_USE</span></th><th colspan="1" class="confluenceTh"> </th><td style="text-align: center;" class="confluenceTd"><span class="VIiyi" lang="en">Same as Altibase server character set</span></td></tr><tr><th class="confluenceTh"><span>LANG</span></th><th colspan="1" class="confluenceTh"> </th><td style="text-align: center;" class="confluenceTd"><span class="VIiyi" lang="en">Based on Altibase server character set</span></td></tr></tbody></table></div><p> </p><h2 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-Others"><span class="md-plain">Others</span></h2><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-RedHatEnterpriseLinuxRecommendedSwapSize"><span class="md-plain">Red Hat Enterprise Linux Recommended Swap Size</span></h3><p class="md-end-block md-p"><span class="md-plain">Red Hat Linux recommends the following for Swap sizing.</span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">In the past, twice as much swap space as physical memory was recommended, but today with terabytes of memory, the last recommendation is not practical.</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">For systems with more than 140 logical processors or systems with more than 3 TB of RAM, a minimum swap space of 100 GB is recommended.</span></p></li></ul><p class="md-end-block md-p"><span class="md-plain">For details, refer to the Red Hat CUSTOMER PORTAL page.</span></p><p class="md-end-block md-p md-focus"><span class=" md-link"><a href="https://access.redhat.com/solutions/15244" class="external-link" rel="nofollow"><span class="md-plain"> </span></a><a href="https://access.redhat.com/solutions/15244" class="external-link" rel="nofollow"><span class="md-plain">What is the recommended swap size for Red Hat platforms?</span></a></span></p><p class="md-end-block md-p md-focus"><span class=" md-link"><span class="md-plain"><br /></span></span></p><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-ForceterminationofAltibaseserverprocessbytimeoutsettingwhenregisteringAltibasestartupservicewithsystemd"><span class="md-plain">Force termination of Altibase server process by timeout setting when registering Altibase startup service with systemd</span></h3><p class="md-end-block md-p md-focus"><span class=" md-link"><span class="md-plain"><span class="VIiyi" lang="en">Note for Linux distributions using RHEL 7 or higher or systemd.</span></span></span></p><p class="md-end-block md-p md-focus"><span class=" md-link"><span class="md-plain"><span class="VIiyi" lang="en">If there is a timeout setting in the systemd service configuration file, there may be a phenomenon in which the Altibase server process is forcibly terminated by the OS while the Altibase server process is running during the OS boot process.</span></span></span></p><ul><li class="md-end-block md-p md-focus"><span class=" md-link"><span class="md-plain"><span class="VIiyi" lang="en"><span class="VIiyi" lang="en">TimeoutStartSec or TimeoutSec</span><br class="_mce_tagged_br" /></span></span></span><br /><span class=" md-link"><span class="md-plain"><span class="VIiyi" lang="en"><span class="VIiyi" lang="en"><span class="VIiyi" lang="en">In this case, the following message is left in the system log (messages).</span></span></span></span></span></li></ul><div class="panel" style="border-style: dashed;border-width: 1px;"><div class="panelContent">
<p>Jun 3 07:25:26 r-sky-ex altibase: [SM] Recovery Phase - 2 : Loading Database</p><div><p>Jun 3 07:26:53 r-sky-ex <span style="color: rgb(255,0,0);">systemd: <span style="color: rgb(51,51,51);">altibase.service</span> start operation timed out. Terminating.</span><br />Jun 3 07:26:53 r-sky-ex systemd: Failed to start altibase 7.1.<br />Jun 3 07:26:53 r-sky-ex systemd: Unit altibase.service entered failed state.<br />Jun 3 07:26:53 r-sky-ex systemd: altibase.service failed.</p></div>
</div></div><span class="VIiyi" lang="en">The time it takes to run the Altibase server process may take a long time depending on the situation.</span><ul><li><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"><span>Memory data and memory index is large or</span></span><span class="JLqJ4b"> </span></span></li><li><span class="VIiyi" lang="en"><span class="JLqJ4b"> </span><span class="JLqJ4b ChMk0b"><span>When Restart Recovery is in progress while Altibase is running</span></span></span></li></ul><p>TimeoutStartSec or TimeoutSec setting value must be set enough according to the operating environment or set to 0 (timeout disabled).</p><p><span class="VIiyi" lang="en"><span class="JLqJ4b"> </span><span class="JLqJ4b ChMk0b"><span>Similarly, there is a TimeoutStopSec setting.</span></span><span class="JLqJ4b"> </span></span></p><p><span class="VIiyi" lang="en"><span class="JLqJ4b"> </span><span class="JLqJ4b ChMk0b"><span>Please refer to 'man systemd.service' for more details.</span></span></span></p><span style="color: rgb(119,119,119);"> </span></div><h3 class="md-end-block md-heading" id="LinuxSetupGuideforAltibase-SYSareaCPUusageincreaseintheserverwhere&#39;SymantecEndpointProtection(SEP)forLinux&#39;isinstalled"><span class="md-plain"><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"><span>SYS area CPU usage increase in the server where'Symantec Endpoint Protection (SEP) for Linux' is installed</span></span></span></span></h3><p><span class="md-plain"><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"><span>It has been found that the CPU usage of the SYS area of the Altibase server process is increased by the Symantec Endpoint Protection process.</span></span></span></span></p><p><span class="md-plain"><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"><span>As a result of vtune analysis, as the number of Altibase sessions increases, the CPU usage of the SYS area increases significantly by system calls select() and write().</span></span></span></span></p><p><span class="md-plain"><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"><span>There is a case where the cause was not identified by Broadcom, and the vaccine program was changed. (As of June 2020)</span></span></span></span></p><p><span class="md-plain"><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"><span><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"><span>The server environment where the symptoms are reported is as follows.</span></span></span></span></span></span></span></p><p><span class="md-plain"><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"> </span></span></span></p><ul><li><span style="color: rgb(0,0,0);">Red Hat Enterprise Linux 7 </span></li><li>Symantec Endpoint Protection(SEP) for Linux</li></ul><p><span class="md-plain"><span class="VIiyi" lang="en"><span class="JLqJ4b ChMk0b"><span><br /></span></span></span></span></p><p><span style="color: rgb(119,119,119);"><br /></span></p></div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:49</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
