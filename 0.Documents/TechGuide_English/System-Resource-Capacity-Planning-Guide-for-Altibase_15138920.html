<!DOCTYPE html>
<html>
    <head>
        <title>Technical Documents(English) : System Resource Capacity Planning Guide for Altibase</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Technical Documents(English)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_557064.html">Home</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Technical Documents(English) : System Resource Capacity Planning Guide for Altibase
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> richard.nahm	</span>, last modified on Feb 22, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <hr /><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1624409365551 {padding: 0px;}
div.rbtoc1624409365551 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1624409365551 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1624409365551'>
<ul class='toc-indentation'>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Overview'>Overview</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-CPUcapacityplanning'>CPU capacity planning</a>
<ul class='toc-indentation'>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-TPC-C'>TPC-C</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-CPUcapacityplanningcriteria'>CPU capacity planning criteria</a>
<ul class='toc-indentation'>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Transactionsperminute'>Transactions per minute</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-BasictpmCcorrection'>Basic tpmC correction</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Peak-timeloadcorrection'>Peak-time load correction</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Databasesizecorrection'>Database size correction</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Applicationstructurecorrection'>Application structure correction</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Applicationloadcorrection'>Application load correction</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Systemmargincorrection'>System margin correction</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Systemtargetutilizationcorrection'>System target utilization correction</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Replicationcorrection'>Replication correction</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-MemoryDBcorrection'>Memory DB correction</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-CPUCapacitycalculationexample'>CPU Capacity calculation example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Memorycapacitycalculation'>Memory capacity calculation</a>
<ul class='toc-indentation'>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-MemoryDBstoragespace'>Memory DB storage space </a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-MemoryDBcapacitycalculation'>Memory DB capacity calculation</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-SizeofdiskDBbuffer'>Size of disk DB buffer</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Considerationsforfreememory'>Considerations for free memory</a>
<ul class='toc-indentation'>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Queryinformationandexecutionplan'>Query information and execution plan</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Temporarymemoryspace'>Temporary memory space</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-SeparatemarginratebyMVCCtechnique'>Separate margin rate by MVCC technique</a></li>
</ul>
</li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Exampleofmemorycapacitycalculation'>Example of memory capacity calculation</a></li>
</ul>
</li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Diskcapacitycalculation'>Disk capacity calculation</a>
<ul class='toc-indentation'>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-EstimatedspaceofmemoryDB'>Estimated space of memory DB</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Transactionlogfile'>Transaction log file</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-EstimatedspaceofdiskDB'>Estimated space of disk DB</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-UndotablespaceandtemporarytablespaceofDiskDB'>Undo tablespace and temporary tablespace of Disk DB</a>
<ul class='toc-indentation'>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Undotablespace'>Undo tablespace</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Temporarytablespace'>Temporary tablespace</a></li>
</ul>
</li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-BackupspaceofDiskDB'>Backup space of Disk DB</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-ConsiderationswhenusingbackupwithiLoader'>Considerations when using backup with iLoader</a></li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Exampleofdiskcapacitycalculation'>Example of disk capacity calculation</a></li>
</ul>
</li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Networkcapacitycalculation'>Network capacity calculation</a>
<ul class='toc-indentation'>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Packetsizeduetoreplication'>Packet size due to replication</a></li>
</ul>
</li>
<li><a href='#SystemResourceCapacityPlanningGuideforAltibase-Overview.1'>Overview</a></li>
</ul>
</div></p><h1 id="SystemResourceCapacityPlanningGuideforAltibase-Overview">Overview</h1><hr /><p>Before operating on a project with Altibase, the configuration of the server must be determined. This document explains how to plan the CPU, memory, disk, and network capacity required for a server configuration.</p><p>This document was prepared based on the version below.</p><ul><li>Altibase 5.5.1 or later</li></ul>    <div class="aui-message hint shadowed information-macro">
                            <span class="aui-icon icon-hint">Icon</span>
                <div class="message-content">
                            <p>For errors and improvements related to this document, please contact the technical support portal or technical support center.</p><ul><li>Technical support portal: <a class="external-link" href="http://support.altibase.com/" rel="nofollow">http://support.altibase.com</a><a class="external-link" href="http://support.altibase.com/en/" rel="nofollow">/en/</a></li><li>Technical support center: 02-2082-1114</li></ul>
                    </div>
    </div>
<h1 id="SystemResourceCapacityPlanningGuideforAltibase-CPUcapacityplanning">CPU capacity planning</h1><hr /><p>CPU capacity planning is generally performed based on TPC-C. This section describes the necessary items and factors to be applied to Altibase and provides examples of capacity planning.</p><h2 id="SystemResourceCapacityPlanningGuideforAltibase-TPC-C"><span style="color: rgb(0,0,0);">TPC-C</span></h2><hr /><p>Visit <a href="http://www.tpc.rg" class="external-link" rel="nofollow">http://</a><a href="http://www.tpc.org" class="external-link" rel="nofollow">www.tpc.org</a> and there is a measurement result called tmpC provided for each device. This is a number that is measured based on the throughput of a specific transaction (NEW_Order) in an environment where various transactions occur, and CPU capacity is calculated based on this.</p><p>This document also assumes that the CPU capacity is calculated based on this. For more detailed information on TPC-C, please visit the <a href="http://www.tpc.org/" class="external-link" rel="nofollow">http://www.tpc.org/</a> website.</p><h2 id="SystemResourceCapacityPlanningGuideforAltibase-CPUcapacityplanningcriteria">CPU capacity planning criteria</h2><hr /><p>If it is difficult to build a TPC-C execution environment, the CPU capacity can be calculated instead of the TPC-C result by applying the correction below.</p><p>Applying the correction means applying the expected weight for each situation to the required tmpC value.</p><p>For each correction item, refer to the table below.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Item</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Description</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Range</div></th><th style="text-align: center;" class="confluenceTh">Default Value</th></tr></thead><tbody><tr><td style="text-align: center;" class="confluenceTd">Transactions per minute</td><td class="confluenceTd">Sum of transaction estimates per minute on the target server</td><td style="text-align: center;" class="confluenceTd">-</td><td class="confluenceTd"><p style="text-align: center;">-</p></td></tr><tr><td style="text-align: center;" class="confluenceTd">Basic tmpC correction</td><td class="confluenceTd">Correction to apply the tmpC value measured in the optical environment</td><td style="text-align: center;" class="confluenceTd">-</td><td style="text-align: center;" class="confluenceTd">5</td></tr><tr><td style="text-align: center;" class="confluenceTd">Peak-time load correction</td><td class="confluenceTd">Correction for peak time so that the system can operate properly in times of heavy load</td><td style="text-align: center;" class="confluenceTd">1.2 ~ 1. 5</td><td style="text-align: center;" class="confluenceTd">1.3</td></tr><tr><td style="text-align: center;" class="confluenceTd">Database size correction</td><td class="confluenceTd">Correction considering the number of records in the database table and the notable database volume</td><td style="text-align: center;" class="confluenceTd">1.5 ~ 2.0</td><td style="text-align: center;" class="confluenceTd">1.7</td></tr><tr><td style="text-align: center;" class="confluenceTd">Application structure correction</td><td class="confluenceTd">Correction for performance differences depending on the structure of the application and the required response time</td><td style="text-align: center;" class="confluenceTd">1.1 ~ 1.5</td><td style="text-align: center;" class="confluenceTd">1.2</td></tr><tr><td style="text-align: center;" class="confluenceTd">Application load correction</td><td class="confluenceTd">Correction for the case where batch operation, etc. is performed at the same time during the peak time of online operation</td><td style="text-align: center;" class="confluenceTd">1.3 ~ 2.2</td><td style="text-align: center;" class="confluenceTd">1.7</td></tr><tr><td style="text-align: center;" class="confluenceTd">System margin correction</td><td class="confluenceTd">Correction of margin ratio for an unexpected increase in the operation</td><td style="text-align: center;" class="confluenceTd">-</td><td style="text-align: center;" class="confluenceTd">1.3</td></tr><tr><td style="text-align: center;" class="confluenceTd">System target utilization rate</td><td class="confluenceTd">CPU utilization rate assuming stable operation of the system</td><td style="text-align: center;" class="confluenceTd">-</td><td style="text-align: center;" class="confluenceTd">0.7</td></tr><tr><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">Replication correction(*)</td><td class="highlight-red confluenceTd" data-highlight-colour="red">Correction for Altibase replication environment</td><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">-</td><td class="highlight-red confluenceTd" data-highlight-colour="red" style="text-align: center;">1.1</td></tr><tr><td class="highlight-red confluenceTd" colspan="1" data-highlight-colour="red" style="text-align: center;">Memory DB correction(*)</td><td class="highlight-red confluenceTd" colspan="1" data-highlight-colour="red">Correction considering the performance advantage when using only Altibase memory DB</td><td class="highlight-red confluenceTd" colspan="1" data-highlight-colour="red" style="text-align: center;">-</td><td class="highlight-red confluenceTd" colspan="1" data-highlight-colour="red" style="text-align: center;">0.2</td></tr></tbody></table></div><ul><li>If Altibase replication is not used, the 'replication correction' item is not applied.</li><li>Unless only the memory DB is used, the &quot;Memory DB correction&quot; item is not applied.</li></ul><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Transactionsperminute">Transactions per minute</h3><p>The number of transactions per minute should be calculated after calculating the number of concurrent users first as follows.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th style="text-align: center;" class="confluenceTh">Classification</th><th style="text-align: center;" class="confluenceTh">Range</th><th style="text-align: center;" class="confluenceTh">Default value</th><th style="text-align: center;" class="confluenceTh">Remark</th></tr><tr><td style="text-align: center;" class="confluenceTd">Number of concurrent users</td><td style="text-align: center;" class="confluenceTd">10% ~ 30% of total users</td><td style="text-align: center;" class="confluenceTd">20%</td><td style="text-align: center;" class="confluenceTd">User increase rate and system operation deadline need to be applied</td></tr><tr><td class="confluenceTd">Number of transaction per user</td><td style="text-align: center;" class="confluenceTd">-</td><td class="confluenceTd"><p>Number of tasks * Number of transactions per operation</p></td><td class="confluenceTd"> </td></tr><tr><td colspan="4" style="text-align: center;" class="confluenceTd">Transactions per minute = number of concurrent users * number of operations * number of transactions per operation</td></tr></tbody></table></div><h3 id="SystemResourceCapacityPlanningGuideforAltibase-BasictpmCcorrection"><br />Basic tpmC correction</h3><p>The tmpC provided on the TPC homepage is measured in the optimal environment and is different from the actual operating environment.</p><p>Therefore, it is necessary to correct the tmpC value measured in the experimental environment to fix the real environment. This is called &quot;basic tmpC correction&quot; and a fixed value of 5 is applied.</p><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Peak-timeloadcorrection">Peak-time load correction</h3><p>Since the system is generally subjected to a heavy load of about 20~50% during the peak time than usual, a weight of 1.2~1.5 is applied in consideration of this.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Classification</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Applied value</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Description</div></th></tr></thead><tbody><tr><td style="text-align: center;" class="confluenceTd">High</td><td style="text-align: center;" class="confluenceTd">1.5</td><td class="confluenceTd">High heavy load occurs at a specific time or on a specific day</td></tr><tr><td style="text-align: center;" class="confluenceTd">Middle</td><td style="text-align: center;" class="confluenceTd">1.4</td><td class="confluenceTd">When a specific day exists and a heavy load occurs throughout the day</td></tr><tr><td style="text-align: center;" class="confluenceTd">Low</td><td style="text-align: center;" class="confluenceTd">1.3</td><td class="confluenceTd">Heavy load occurs every day or week at a specific time</td></tr><tr><td style="text-align: center;" class="confluenceTd">Other</td><td style="text-align: center;" class="confluenceTd">1.2</td><td class="confluenceTd">If there is a peak time, but the difference between the load and the normal is not large</td></tr></tbody></table></div><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Databasesizecorrection">Database size correction</h3><p>Apply it by considering the total database size and the table with the most records.</p><p>If it is difficult to derive an accurate value, the general value of 1.7 is applied because weighting cannot be applied.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Size \ Number of cases</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">8 million or less</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">32 million or less</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">126 million or less</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">256 million or less</div></th><th style="text-align: center;" class="confluenceTh">260 million or more</th></tr></thead><tbody><tr><td style="text-align: center;" class="confluenceTd"><strong>1TB or less</strong></td><td style="text-align: center;" class="confluenceTd">1.70</td><td style="text-align: center;" class="confluenceTd">1.75</td><td style="text-align: center;" class="confluenceTd">1.80</td><td style="text-align: center;" class="confluenceTd">1.85</td><td style="text-align: center;" class="confluenceTd">1.90</td></tr><tr><td style="text-align: center;" class="confluenceTd"><strong>2TB or more</strong></td><td style="text-align: center;" class="confluenceTd">1.85</td><td style="text-align: center;" class="confluenceTd">1.90</td><td style="text-align: center;" class="confluenceTd">1.90</td><td style="text-align: center;" class="confluenceTd">1.95</td><td style="text-align: center;" class="confluenceTd">2.00</td></tr><tr><td style="text-align: center;" class="confluenceTd"><strong>2TB or less</strong></td><td style="text-align: center;" class="confluenceTd">1.80</td><td style="text-align: center;" class="confluenceTd">1.85</td><td style="text-align: center;" class="confluenceTd">1.90</td><td style="text-align: center;" class="confluenceTd">1.95</td><td style="text-align: center;" class="confluenceTd">1.95</td></tr><tr><td style="text-align: center;" class="confluenceTd"><strong>50GB or less</strong></td><td style="text-align: center;" class="confluenceTd">1.50</td><td style="text-align: center;" class="confluenceTd">1.55</td><td style="text-align: center;" class="confluenceTd">1.60</td><td style="text-align: center;" class="confluenceTd">1.65</td><td style="text-align: center;" class="confluenceTd">1.70</td></tr><tr><td style="text-align: center;" class="confluenceTd"><strong>500GB or less</strong></td><td style="text-align: center;" class="confluenceTd">1.60</td><td style="text-align: center;" class="confluenceTd">1.65</td><td style="text-align: center;" class="confluenceTd">1.70</td><td style="text-align: center;" class="confluenceTd">1.75</td><td style="text-align: center;" class="confluenceTd">1.80</td></tr></tbody></table></div><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Applicationstructurecorrection">Application structure correction</h3><p>Application structure correction is a c<span>orrection for performance differences depending on the structure of the application and the required response time</span></p><p>It is as follows, and does not apply when the expected response time is more than 5.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner">Response time</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Within 1 sec</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">2 sec</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">3 sec</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">4 sec</div></th><th colspan="1" style="text-align: center;" class="confluenceTh">5 sec or more</th></tr></thead><tbody><tr><td class="confluenceTd">Applied value</td><td class="confluenceTd">1.5</td><td class="confluenceTd">1.35</td><td class="confluenceTd">1.2</td><td class="confluenceTd">1.1</td><td colspan="1" class="confluenceTd">1.0</td></tr></tbody></table></div><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Applicationloadcorrection">Application load correction</h3><p>Application load correction is a correction that takes into account when batch operations and others are simultaneously performed during peak-time of online operations. </p><p>If additional operations (backup, reporting, statistics, etc) are required to be processed in addition to the specified operation, the required processing power must be corrected accordingly.</p><p>The applied value is as follows, and normally, 1.7 is applied.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Classification</div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Applied value</div></th><th class="confluenceTh"><div class="tablesorter-header-inner">Description</div></th></tr></thead><tbody><tr><td style="text-align: center;" class="confluenceTd"><strong>High</strong></td><td class="confluenceTd">1.9 ~ 2.2</td><td class="confluenceTd">When there is a lot of additional operations, such as placement operation</td></tr><tr><td style="text-align: center;" class="confluenceTd"><strong>Middle</strong></td><td class="confluenceTd">1.6 ~ 1.8</td><td class="confluenceTd">When online transactions occur, some batch operations occur.</td></tr><tr><td style="text-align: center;" class="confluenceTd"><strong>Low</strong></td><td class="confluenceTd">1.3 ~ 1.5</td><td class="confluenceTd">When there are few additional operations, such as batch operation, other than online transactions.</td></tr></tbody></table></div><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Systemmargincorrection">System margin correction</h3><p>This is a correction to ensure system stability in case of an unexpected increase in operation. The value is fixed at 1.3.</p><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Systemtargetutilizationcorrection">System target utilization correction</h3><p>Generally, when designing the database system, it is designed to use 100% CPU usage, but for the stable operation, the CPU is not used 100% in an actual operating environment.</p><p>System target utilization correction is set based on the actual operating environment, In most cases, the maximum CPU usage is 70%, so the value of 0.7 is applied.</p><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Replicationcorrection">Replication correction</h3><p>Applied when Altibase replication is used.</p><p>The default value of 1.1. is applied as a correction for handling Altibase replication loads.</p><h3 id="SystemResourceCapacityPlanningGuideforAltibase-MemoryDBcorrection">Memory DB correction</h3><p>This does not apply when both disk DB and memory DB are used or only disk DB is used.</p><p>When only memory DB is used, it performs 3 times faster than disk DB, so 1/3 = 0.3 is applied.</p><h3 id="SystemResourceCapacityPlanningGuideforAltibase-CPUCapacitycalculationexample">CPU Capacity calculation example</h3><p>CPU capacity can be calculated as follows by applying the above correction factor items.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="2" style="text-align: center;" class="confluenceTh">User input items</th></tr><tr><td style="text-align: center;" class="confluenceTd">Number of users who can access the system</td><td class="confluenceTd">(Ex) 1,000 people</td></tr><tr><td class="confluenceTd">Percentage of concurrent users (%)</td><td class="confluenceTd">(Ex) 20%</td></tr><tr><td class="confluenceTd">Annual user growth rate</td><td class="confluenceTd">(Ex) 10%</td></tr><tr><td class="confluenceTd">System operating deadline</td><td class="confluenceTd">(Ex) 5 years</td></tr><tr><td colspan="1" class="confluenceTd">Number of operations</td><td colspan="1" class="confluenceTd">(Ex) 5</td></tr><tr><td colspan="1" class="confluenceTd">Number of transaction per operation</td><td colspan="1" class="confluenceTd">(Ex) 10</td></tr></tbody></table></div><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="4" style="text-align: center;" class="confluenceTh">Calculate transaction amount</th></tr><tr><th style="text-align: center;" class="confluenceTh">Classification</th><th style="text-align: center;" class="confluenceTh">Result value</th><th style="text-align: center;" class="confluenceTh">Standard value</th><th style="text-align: center;" class="confluenceTh">Contents</th></tr><tr><td class="confluenceTd">Number of concurrent users</td><td class="confluenceTd">322</td><td class="confluenceTd"><p>1,000*(20/100)*(10/100+1)<span style="color: rgb(0,51,102);"><sup>5</sup></span></p></td><td class="confluenceTd">Total users * Percentage of concurrent users * (annual growth rate ^ system operating period)</td></tr><tr><td class="confluenceTd">Transaction per minute</td><td class="confluenceTd">16,100</td><td class="confluenceTd">322*5*10</td><td class="confluenceTd">Number of concurrent users * number of tasks * number of transactions per operation</td></tr></tbody></table></div><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th colspan="4" class="confluenceTh">Applied correction factors</th></tr><tr><th class="confluenceTh">Classification</th><th class="confluenceTh">Result value</th><th class="confluenceTh">Standard value</th><th class="confluenceTh">Contents</th></tr><tr><td class="confluenceTd">Basic tmpC correction</td><td class="confluenceTd">80,500</td><td class="confluenceTd">16,100*5</td><td class="confluenceTd">The fixed value of 5 is applied</td></tr><tr><td class="confluenceTd">Peak-time load correction</td><td class="confluenceTd">104,650</td><td class="confluenceTd">80,500*1.3</td><td class="confluenceTd">The value of 1.3 is applied to &quot;lower&quot;</td></tr><tr><td class="confluenceTd">Database size correction</td><td class="confluenceTd">177,905</td><td class="confluenceTd">104,650*1.7</td><td class="confluenceTd">The general value of 1.7 is applied</td></tr><tr><td class="confluenceTd">Application structure correction</td><td class="confluenceTd">266,857</td><td class="confluenceTd">177,905*1.5</td><td class="confluenceTd">The value of 1.5 is applied for &quot;within 1 second&quot;</td></tr><tr><td class="confluenceTd">Application load correction</td><td class="confluenceTd">453,656</td><td class="confluenceTd">266,857*1.7</td><td class="confluenceTd">The general value of 1.7 is applied</td></tr><tr><td class="confluenceTd">System margin correction</td><td class="confluenceTd">589,752</td><td class="confluenceTd">453,656*1.3</td><td class="confluenceTd">The fixed value of 1.3 is applied</td></tr><tr><td class="highlight-blue confluenceTd" data-highlight-colour="blue">System target utilization correction</td><td class="highlight-blue confluenceTd" data-highlight-colour="blue"><strong>412,826</strong></td><td class="highlight-blue confluenceTd" data-highlight-colour="blue">589,752*0.7</td><td class="highlight-blue confluenceTd" data-highlight-colour="blue">The fixed value of 0.7 is applied</td></tr><tr><td class="highlight-red confluenceTd" data-highlight-colour="red">Replication correction (*)</td><td class="highlight-red confluenceTd" data-highlight-colour="red">454,108</td><td class="highlight-red confluenceTd" data-highlight-colour="red">412,826*1.1</td><td class="highlight-red confluenceTd" data-highlight-colour="red">The fixed value of 1.1 is applied</td></tr><tr><td class="highlight-red confluenceTd" data-highlight-colour="red">Memory DB correction</td><td class="highlight-red confluenceTd" data-highlight-colour="red">136,232</td><td class="highlight-red confluenceTd" data-highlight-colour="red">454,108*0.3</td><td class="highlight-red confluenceTd" data-highlight-colour="red">The fixed value of 0.3 is applied</td></tr><tr><td colspan="4" class="confluenceTd"> </td></tr><tr><td colspan="4" class="confluenceTd"><p>Using the (*) &quot;Replication Correction&quot; and &quot;Memory DB Correction&quot; should be determined whether or not to apply according to the operating environment.</p><p>Using the final calculated value of 412,826 tpmC as above, the CPU capacity can be measured as follows.</p><ul><li>412,826 / 20,000 = 20.6</li></ul><p>That is, 20 CPUs capable of processing 20,000 tmpC are required.</p><p>Or, the server can be determined by comparing it with the tpmC officially guaranteed by tpc.org.</p><p>(<a class="external-link" href="http://www.tpc.org/tpcc/results/tpcc_results.asp?print=false&amp;orderby=tpm&amp;sortby=desc" rel="nofollow">http://www.tpc.org/tpcc/results/tpcc_results.asp?print=false&amp;orderby=tpm&amp;sortby=des</a>c)</p><p> </p></td></tr></tbody></table></div><h1 id="SystemResourceCapacityPlanningGuideforAltibase-Memorycapacitycalculation"><span style="color: rgb(0,0,0);">Memory capacity calculation</span></h1><p><span style="color: rgb(0,0,0);"> </span></p><hr /><p><span style="color: rgb(0,0,0);">The following three items should be considered when calculating the memory capacity.</span></p><ol><li><span style="color: rgb(0,0,0);">Memory DB capacity</span></li><li><span style="color: rgb(0,0,0);">Size of buffer area for disk DB</span></li><li><span style="color: rgb(0,0,0);">Memory for session query statement execution</span></li></ol><h2 id="SystemResourceCapacityPlanningGuideforAltibase-MemoryDBstoragespace"><span style="color: rgb(0,0,0);"><span style="color: rgb(0,0,0);">Memory DB storage space</span></span> </h2><hr /><p><span style="color: rgb(0,0,0);">Tables created in memory tablespaces are allocated pages in units of 32KB. One page is again divided into units called slots according to the length of the record in the table.</span></p><p><span style="color: rgb(0,0,0);">Therefore, one page in units of 32KB is divided into several slots according to the length of the record of the created table.</span></p><p><span style="color: rgb(0,0,0);">The exact size or number of slots in a page can be checked in the Altibase V$MEMTBL_INFO performance view.</span></p><h2 id="SystemResourceCapacityPlanningGuideforAltibase-MemoryDBcapacitycalculation">Memory DB capacity calculation</h2><hr /><p>The memory DB of Altibase is a form in which all data and indexes reside in memory.</p><p>Therefore, it is calculated based on the memory table schema to be created in the operating environment and the expected number of records.</p><p>It can be calculated as follows. The cord header length differs depending on the Altibase version, so be cautious when calculating the capacity.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th style="text-align: center;" class="confluenceTh">Items</th><th colspan="4" style="text-align: center;" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">Length of record</td><td colspan="4" class="confluenceTd">The sum of the lengths of all columns in one table</td></tr><tr><td class="confluenceTd">Length of record header</td><td class="confluenceTd"><p>Altibase 5</p><p>Altibase 6</p></td><td class="confluenceTd">24Byte</td><td class="confluenceTd">Altibase 7</td><td class="confluenceTd">32Byte</td></tr><tr><td class="confluenceTd">Estimated number of records</td><td colspan="4" class="confluenceTd">Estimated number of cases according to storage cycle</td></tr><tr><th colspan="5" style="text-align: center;" class="confluenceTh">Example</th></tr><tr><td class="confluenceTd">Length of record</td><td colspan="4" class="confluenceTd">500Byte</td></tr><tr><td class="confluenceTd">Length of header</td><td class="confluenceTd"><p>Altibase 5</p><p>Altibase 6</p></td><td class="confluenceTd">24Byte</td><td class="confluenceTd">Altibase 7</td><td class="confluenceTd">32Byte</td></tr><tr><td class="confluenceTd">Estimated number of records</td><td colspan="4" class="confluenceTd">10,000,000 cases (per year)</td></tr><tr><td class="confluenceTd">Estimated size of the table (Altibase 5 / Altibase 6)</td><td colspan="4" class="confluenceTd">(500+24) * 10,000,000 = 4,997.25MB expected</td></tr><tr><td class="confluenceTd">Estimated size of the index (Altibase 5 / Altibase 6)</td><td colspan="4" class="confluenceTd">(8) * 10,000,000 = 76.29 MB expected</td></tr><tr><td class="confluenceTd">Estimated size of the table (Altibase 7)</td><td colspan="4" class="confluenceTd">(500+32) * 10,000,000 = 5,073.54 MB expected</td></tr><tr><td class="confluenceTd">Estimated size of the index (Altibase 7)</td><td colspan="4" class="confluenceTd">(8) * 10,000,000 = 76.29 MB estimated</td></tr><tr><td class="highlight-yellow confluenceTd" data-highlight-colour="yellow" rowspan="2"><p style="text-align: center;">Applied for correction factor considering increase in operation</p><p style="text-align: center;">(Altibase 5 / Altibase 6)</p></td><td class="highlight-yellow confluenceTd" data-highlight-colour="yellow" style="text-align: center;">Table</td><td class="highlight-yellow confluenceTd" colspan="3" data-highlight-colour="yellow" style="text-align: right;">4,997 * 1.1 (per year) = 5,496MB</td></tr><tr><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;">Index</td><td class="highlight-yellow confluenceTd" colspan="3" data-highlight-colour="yellow" style="text-align: right;">76 * 1.1 (per year) = 83MB</td></tr><tr><td class="highlight-yellow confluenceTd" data-highlight-colour="yellow" rowspan="2"><p style="text-align: center;">Applied for correction factor considering increase in operation</p><p style="text-align: center;">(Altibase 7)</p></td><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;">Table</td><td class="highlight-yellow confluenceTd" colspan="3" data-highlight-colour="yellow" style="text-align: right;">5,073 * 1.1 (per year) = 5,580MB</td></tr><tr><td class="highlight-yellow confluenceTd" colspan="1" data-highlight-colour="yellow" style="text-align: center;">Index</td><td class="highlight-yellow confluenceTd" colspan="3" data-highlight-colour="yellow" style="text-align: right;">76 * 1.1 (per year) = 83MB</td></tr></tbody></table></div><ul><li>The index of the memory table is calculated in the form of (number of records * 8 bytes) because only pointer information pointing to a location in real memory is managed.<br />Depending on the number of memory indexes, it can be calculated using the formula '8 bytes * number of records * number of indexes'.</li><li>The total sum of each expected size of the table calculated by the above calculation formula can be calculated as the capacity of the memory DB. In addition, the capacity of the memory DB may be calculated in consideration of a margin ratio of 30% to 50% from the calculated capacity.<br />(The required margin is further explained in the &quot;Considering margin factor&quot; section below.)</li><li>To find out the exact length of a record after creating a table, it can be clearly found by looking up MEM_SLOT_SIZE of the table in V$MEMTBL_INFO.</li><li>In the case of a volatile tablespace, if there is actual data, the memory area is used, so it must be included in the capacity calculation based on the above criteria.<br />(All data in tables created in the volatile tablespace will be lost when the Altibase server is restarted. Transactions for tables in volatile tablespaces are provided as tablespace concept used for fast processing without recording a physical transaction log.)</li></ul><h2 id="SystemResourceCapacityPlanningGuideforAltibase-SizeofdiskDBbuffer">Size of disk DB buffer</h2><hr /><p>There is no fixed formula for calculating the size of the disk DB buffer.</p><p>However, 10% or more of the size of the disk DB that is expected to be accessed frequently among all disk DBs is recommended.</p><p>For example, if the size of frequently access data among the disk is estimated to be 100GB, set the buffer size to 10GB or more, which is 10%.</p><h2 id="SystemResourceCapacityPlanningGuideforAltibase-Considerationsforfreememory">Considerations for free memory</h2><hr /><p>In addition to the data, the memory size of the following areas must be considered when calculating the memory capacity.</p><ol><li>Query information and execution plan</li><li>Temporary memory space for operations</li><li>Separate memory margin rate by MVCC technique.</li></ol><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Queryinformationandexecutionplan">Query information and execution plan</h3><p>When executing a query, Altibase performs with an execution plan establishment procedure so that the query can be executed with an internally optimized execution plan. This is very important in the performance of query processing.</p><p>However, in order to reduce the cost of establishing an execution plan for the same query each time, Altibase stores and manages query information and execution plan for queries that have already been executed internally. For this, a session memory area is required.</p><p>There are two main types of session memory areas in Altibase, the SQL_CACHE area commonly used for all sessions and the memory area allocated for each session.</p><p>Since the size of SQL_CACHE does not increase dynamically, when it is not possible to store all the execution plans for a query, it is operated by storing it in the memory area allocated to the session.</p><p>Therefore, when calculating the memory capacity, the memory space to be allocated to the session must also be considered.</p><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Temporarymemoryspace">Temporary memory space</h3><p>When a query including group by, aggregation, etc. is executed in the memory DB, separate storage space for storing the intermediate result set is required to process the query result requested by the user from the source data. The temporary memory space refers to a separate storage space used at this time.</p><p>(In the case of a disk DB, a temporary tablespace for the disk is used by default, but the memory area can be used by using hints to improve performance.)</p><p>Consequently, it is unable to calculate this area explicitly arithmetically. This is because the degree of increase in the temporary memory space to be used is very flexible depending on the type of query, and concurrent queries.</p><p>However, since it is continuously reused after allocation, it does not significantly affect the total memory calculation if properly calculated.</p><h3 id="SystemResourceCapacityPlanningGuideforAltibase-SeparatemarginratebyMVCCtechnique">Separate margin rate by MVCC technique</h3><p>Altibase uses a concurrency control technique called MVCC to maximize performance by minimizing contention between two transactions when a retrieve transaction occurs while a change transaction is in progress.</p><p>In addition, to use this MVCC technique, a previous image of versioned data is temporarily stored in the table. (For more detailed information on MVCC, please refer to the &quot;MVCC Guide&quot;.)</p><p>Therefore, when calculating the memory capacity, the margin for MVCC must also be considered.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Items to consider for margin rate</div></th><th style="text-align: center;" class="confluenceTh">General formula</th></tr></thead><tbody><tr><td class="confluenceTd">Query information memory area</td><td class="confluenceTd">Number of queries * 1MB</td></tr><tr><td class="confluenceTd">Temporary memory area for operation</td><td class="confluenceTd">Sum of total memory table capacity * 0.1</td></tr><tr><td class="confluenceTd">Margin rate for MVCC</td><td class="confluenceTd">Sum of total memory table capacity * 0.35</td></tr></tbody></table></div><h2 id="SystemResourceCapacityPlanningGuideforAltibase-Exampleofmemorycapacitycalculation">Example of memory capacity calculation</h2><hr /><p>Assuming that the memory table is stored for 10 years in the form of 1 million increments per year, the capacity can be calculated as follows.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">CREATE TABLE memory_size (
    C1 CHAR(20),
    C2 INTEGER,
    C3 CHAR(30),
    C4 VARCHAR(200),
    C5 DATE,
    C6 NUMERIC(20,8),
PRIMARY KEY (C1)
) TABLESPACE SYS_TBS_MEM_DATA;
 
CREATE UNIQUE INDEX idx_1 ON memory_size (C1,C2);</pre>
</div></div><p>In the above table, the user can check the length of the record with the following SQL statement.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">SELECT CEIL(SUM(B.SIZE)/8)*8
  FROM SYSTEM_.SYS_TABLES_ A,SYSTEM_.SYS_COLUMNS_ B
 WHERE A.TABLE_ID = B.TABLE_ID
   AND A.TABLE_NAME = &#39;MEMORY_SIZE&#39;;
 
CEIL(SUM(B.SIZE)/8)*8  
-------------------------
288                    
1 row selected.</pre>
</div></div><p>Altibase aligns 8 bytes for memory resource management. That is, a size that is not divided by a multiple of 8 is managed by a larger multiple of 8.</p><p>Therefore, if the record length is 282 bytes, 288 bytes must be calculated as the length of the record according to the align rule.</p><p>If the length of the record is identified as above, it can be calculated using the following table. Separately calculate Altibase version 5, Altibase version 6, and Altibase version 7.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p>Altibase 5</p><p>Altibase 6</p></th><th class="confluenceTh"><p style="text-align: center;">Length of record</p><p style="text-align: center;">(byte)</p></th><th class="confluenceTh"><p style="text-align: center;">1 year (MB)</p></th><th class="confluenceTh"><p style="text-align: center;">Maintenance period</p><p style="text-align: center;">(year/MB)</p></th><th class="confluenceTh"><p style="text-align: center;">Increase in operation</p><p style="text-align: center;">Correction factor</p><p style="text-align: center;"> </p></th></tr><tr><td class="confluenceTd">Input data</td><td class="confluenceTd">288 (record) + 24 (record header)</td><td class="confluenceTd">1,000,000</td><td class="confluenceTd">10</td><td class="confluenceTd">1.1 (1-year consideration)</td></tr><tr><td class="confluenceTd">Data capacity</td><td class="confluenceTd"> </td><td class="confluenceTd">(288+24) * 1,000,000 = 297.54</td><td class="confluenceTd">(1 year capacity * 10 years) = 2,975.4</td><td class="confluenceTd">2,975.4 * 1.1 = 3,272.9MB</td></tr><tr><td class="confluenceTd">Index capacity</td><td class="confluenceTd">8*2 (1 Primary Key, 1 Index)</td><td class="confluenceTd">(8*1,000,000*2) = 15.25</td><td class="confluenceTd">(1 year capacity * 10 years) = 152.5</td><td class="confluenceTd">152.5 * 1.1 = 167.7MB</td></tr><tr><td colspan="3" class="confluenceTd">Total</td><td class="confluenceTd">3,127.9</td><td class="confluenceTd">3,440.6MB</td></tr></tbody></table></div><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Altibase 7</th><th class="confluenceTh"><p style="text-align: center;">Length of record</p><p style="text-align: center;">(byte)</p></th><th class="confluenceTh"><p style="text-align: center;">1 year</p><p style="text-align: center;">(MB)</p></th><th class="confluenceTh"><p style="text-align: center;">Maintenance period</p><p style="text-align: center;">(year/MB)</p></th><th class="confluenceTh"><p style="text-align: center;">Increase in operation</p><p style="text-align: center;">Correction factor</p></th></tr><tr><td class="confluenceTd">Input data</td><td class="confluenceTd">288 (record) + 32 (record header)</td><td class="confluenceTd">1,000,000</td><td class="confluenceTd">10</td><td class="confluenceTd">1.1 (1-year consideration)</td></tr><tr><td class="confluenceTd">Data capacity</td><td class="confluenceTd"> </td><td class="confluenceTd">(288+32) * 1,000,000 = 205.17</td><td class="confluenceTd">(1 year capacity * 10 years) = 3,051.7</td><td class="confluenceTd">3,051.7 * 1.1 = 3,356.8MB</td></tr><tr><td class="confluenceTd">Index capacity</td><td class="confluenceTd">8*2 (1 Primary Key, 1 Index)</td><td class="confluenceTd">(8*1,000,000*2) = 15.25</td><td class="confluenceTd">(1 year capacity * 10 years) = 152.5</td><td class="confluenceTd">152.5 * 1.1 = 167.7MB</td></tr><tr><td colspan="3" class="confluenceTd">Total</td><td class="confluenceTd">3,204.2</td><td class="confluenceTd">3,524.5MB</td></tr></tbody></table></div><p>When input data is created for each table as above, it is able to calculate the capacity for data and indexes.</p><p>In addition, when the capacity of data and indexes is calculated, the total required memory capacity can be calculated as follows.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th style="text-align: center;" class="confluenceTh">Item</th><th colspan="2" style="text-align: center;" class="confluenceTh">Calculation data (example)</th></tr><tr><td class="confluenceTd">Memory DB capacity</td><td colspan="2" class="confluenceTd">20 GB (sum of capacity for all memory tables)</td></tr><tr><td class="confluenceTd">Disk buffer</td><td colspan="2" class="confluenceTd">5GB (calculated considering the size of disk DB)</td></tr><tr><td rowspan="3" class="confluenceTd">Margin ratio applied</td><td class="confluenceTd">Number of queries = 1,000</td><td class="confluenceTd">1,000 * 1MB = 1GB</td></tr><tr><td class="confluenceTd"> </td><td class="confluenceTd">20GB * 0.1 = 2GB</td></tr><tr><td class="confluenceTd"> </td><td class="confluenceTd">20GB * 0.3 = 6GB</td></tr><tr><td class="confluenceTd">Estimated memory capacity</td><td colspan="2" class="confluenceTd">20GB + 5GB + 1GB + 2GB + 6GB = 34GB</td></tr></tbody></table></div><p>This memory capacity calculation is purely based on the capacity of Altibase. If planning to run a user application in the same server, the user must perform a separate capacity calculation for that part.</p><h1 id="SystemResourceCapacityPlanningGuideforAltibase-Diskcapacitycalculation">Disk capacity calculation</h1><hr /><p>These four items should be considered for the disk capacity.</p><ol><li>Estimated space of memory DB</li><li>Transaction log file space</li><li>Estimated space of disk DB</li><li>Disk DB backup space</li></ol><h2 id="SystemResourceCapacityPlanningGuideforAltibase-EstimatedspaceofmemoryDB">Estimated space of memory DB</h2><hr /><p>Altibase periodically stores the contents of the memory DB as a physical data file so that the changed data in the memory can be restored again even in the event of a sudden failure.</p><p>This process is called a checkpoint, and the size of the data file created in this process is created by the size of the memory DB. (Please refer to the &quot;Altibase Checkpoint Guide&quot; for detailed checkpoint procedures.)</p><p>At this time, the created files are created as two files, one pair each, so it requires twice the capacity of the memory DB in terms of disk capacity.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Estimated memory DB size</th><td class="confluenceTd">20GB</td></tr><tr><th class="confluenceTh">Physical disk demand usage</th><td class="confluenceTd">20GB * 2 = 40GB</td></tr></tbody></table></div><h2 id="SystemResourceCapacityPlanningGuideforAltibase-Transactionlogfile">Transaction log file</h2><hr /><p>Altibase performs transaction logging in order to perform a recovery scheme based on the WAL (Write-Ahead Logging) protocol.</p><p>During the log recording process performed at this time, storage space is required for the physical file, and the recorded files are called online log files.</p><p>Online log files are automatically deleted when a checkpoint occurs, but in some cases, they can be kept without being deleted. This is the case in the following cases.</p><ul><li>In the case of maintaining the log that the Sender should send in a replication</li><li>When a transaction is held for a long time due to the occurrence of a large number of changes.</li></ul><p>It is recommended to secure as much space as possible because it is necessary to prevent the shortage of failure of disk capacity due to the continuous maintenance of online log files.</p><p>However, it is not recommended the disk space for online log files by calculation formula.</p><p>Since it is flexible according to the size of the system, it is recommended to calculate it based on data such as the number of log files created with a performance load test.</p><p>If it is difficult to perform such a test, at least 20GB of disk space is recommended.</p><h2 id="SystemResourceCapacityPlanningGuideforAltibase-EstimatedspaceofdiskDB">Estimated space of disk DB</h2><hr /><p>For disk DB, unlike the method for calculating the capacity of memory DB, it is recommended to calculate the page unit. This is because, depending on the properties of PCTFREE and PCTUSED for each page, there is a limitation on the storage space.</p><p>The size of an Altibase page is 8,192 bytes. Here, the space on the page calculated for the PCTFREE setting for each page is calculated as the space available for the record.</p><p>The header length of record and index is as follows. Unlike the memory DB, in the disk DB, the length of the column configured in the index must be considered in the capacity calculation.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Header length of the record</th><td class="confluenceTd">Length (1byte) + Slot Directory(2byte) + 34byte</td></tr><tr><th class="confluenceTh">Header length of the index</th><td class="confluenceTd">10byte</td></tr></tbody></table></div><ul><li>Each column has 1 byte for length information. If the column is more than 250 bytes, it has a header of length information of 3 bytes.</li><li>The slot directory area to quickly know the exact offset information in the page is included in the storage space and calculated.</li></ul><p>The disk DB capacity is calculated as follows. (The index must add up the lengths of the columns that make up the key.)</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Size of the page</th><td class="confluenceTd">8,192byte</td></tr><tr><th class="confluenceTh">PCTFREE 10% applied</th><td class="confluenceTd">8,192 - (8,192*0.1) = 7,373byte</td></tr><tr><th class="confluenceTh">Fixed header of the page</th><td class="confluenceTd">Part used for page management = 80byte</td></tr><tr><th class="confluenceTh">Fixed footer of the page</th><td class="confluenceTd">Part used for page consistency check = 16byte</td></tr><tr><th class="confluenceTh">Size of the available page</th><td class="confluenceTd">7,373 - 96 = 7,277byte</td></tr><tr><th class="confluenceTh"><p>Length of the selected record</p></th><td class="confluenceTd">288byte</td></tr><tr><th class="confluenceTh">Number of records per page</th><td class="confluenceTd">7,277 / (288+34) = 22</td></tr><tr><th class="confluenceTh">Estimated number of cases per year</th><td class="confluenceTd">1,000,000 cases</td></tr><tr><th class="confluenceTh">Final capacity calculation</th><td class="confluenceTd">1,000,000 (records) / 22 (records per page) * 8,192 = 3,551 MB</td></tr></tbody></table></div><p>If the user gets the number of records that can fit per page, the user can use that value to get the number of pages the user needs for the expected number.</p><p>However, since a page actually used is in units of 8,192 bytes, in the final calculation, the capacity is calculated by multiplying by 8,192 bytes.</p><p> </p><p>In the case of an index, it is calculated by applying the length of the key column constituting the index as the length of the record.</p><p>The header can use 16 bytes of the header of the index.</p><p>When the capacity of all disk tables is calculated as above, the total is calculated and the capacity is calculated by considering the margin ratio of 30% to 50%.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Items</th><th class="confluenceTh">Calculation data (example)</th></tr><tr><td class="confluenceTd">Disk DB capacity</td><td class="confluenceTd">500 GB (sum of capacity for disk table)</td></tr><tr><td class="confluenceTd">Margin ratio applied</td><td class="confluenceTd">500GB * 0.3 (free space) = 150GB</td></tr><tr><td class="confluenceTd">Estimated disk capacity</td><td class="confluenceTd">500GB + 150GB = 650GB</td></tr></tbody></table></div><h2 id="SystemResourceCapacityPlanningGuideforAltibase-UndotablespaceandtemporarytablespaceofDiskDB"><br />Undo tablespace and temporary tablespace of Disk DB</h2><hr /><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Undotablespace">Undo tablespace</h3><p>The undo tablespace of disk DB is used as space where copies of the changed image are temporary stored until the end of the transaction.</p><p>Therefore, it is difficult to predict the amount of use because the number of use changes according to the query processing requested by the user.</p><p>For example, when a transaction that updates a 1TB table at once occurs, 1TB of undo tablespace is required.</p><p>If not considering such a case, it is generally desirable to calculate about 30% of the largest table as the capacity of the undo tablespace.</p><h3 id="SystemResourceCapacityPlanningGuideforAltibase-Temporarytablespace">Temporary tablespace</h3><p>It is difficult to predict the usage of temporary tablespace as its usage varies according to the type of query.</p><p>Therefore, just like the undo tablespace, about 30% of the table with the largest capacity should be calculated as the temporary tablespace capacity.</p><p>For the undo tablespace and the temporary tablespace, sufficient space should be calculated so that there are no operational problems.</p><h2 id="SystemResourceCapacityPlanningGuideforAltibase-BackupspaceofDiskDB">Backup space of Disk DB</h2><hr /><p>For more detailed information related to backup, please refer to the &quot;Altibase Backup and Recovery Guide&quot; document. This section only explains the part of calculating the capacity related to backup.</p><p>Altibase must be operated in archive log mode for backup, and two disk spaces are required for this backup.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Archive log file directory</th><td class="confluenceTd">Space to store backup files of online log files</td></tr><tr><th class="confluenceTh">Backup space</th><td class="confluenceTd">Space of data files to be stored with online backup, etc.</td></tr></tbody></table></div><p>In the case of backup space, it can be calculated as the sum of the estimated memory DB and disk DB capacity.</p><p>Since there are various types of backups such as the type of backing up the entire DB every time, the type of incremental backup, and the type of tablespace unit backup, it is recommended to calculate the appropriate space for each backup.</p><p>In the case of the archive log file directory, it is safe to delete all previous log files that are not referenced after the user completes the backup.</p><p>Therefore, it can be said to be flexible according to the backup policy because the log file capacity to be stored may differ according to the backup cycle and policy.</p><p>Let's look at the following example. In the example below, the backup policy is assumed on a daily basis.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner"> </div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Memory DB</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Disk DB</div></th><th style="text-align: center;" class="confluenceTh">Amount of online log files per day</th></tr></thead><tbody><tr><td class="confluenceTd">Estimated capacity</td><td class="confluenceTd">20GB</td><td class="confluenceTd">500GB</td><td class="confluenceTd">200GB</td></tr><tr><td class="confluenceTd">Space required for backup</td><td class="confluenceTd">20GB</td><td class="confluenceTd">500GB</td><td class="confluenceTd">200GB (archive)</td></tr><tr><td class="confluenceTd">Space considering the last backup</td><td class="confluenceTd">20*2 = 40GB</td><td class="confluenceTd">500*2 = 1TB</td><td class="confluenceTd">200GB * 2 = 400GB</td></tr></tbody></table></div><ul><li>Memory DB is stored as one pair (two files) at the checkpoint, but only one stable file is backed up at the backup stage, so it must be considered the backup space as much as the memory DB capacity.</li><li>If the disk DB is assumed to be a full backup policy, backup space is required as much as the expected disk DB capacity.</li><li>Since archive log files must be stored until the next backup occurs, all archive log files created during the backup cycle must be stored since the previously backed up can be used to restore the current point in time.</li><li>In terms of the backup cycle concept, the previous backup copy can be deleted only after the current backup is successful. If the last backup copy is kept on the disk, twice as much space for backup is required.</li></ul><h2 id="SystemResourceCapacityPlanningGuideforAltibase-ConsiderationswhenusingbackupwithiLoader">Considerations when using backup with iLoader</h2><hr /><p>In addition to the online backup method, if it is necessary to additionally backup each table, the user can use a utility called the iLoader to back up the table as a text file.</p><p>In this case, the capacity of the data file backed up with the iLoader should be considered when calculating the disk capacity.</p><p>Generally, since a data separator of about 5 bytes should be used for each column, space obtained by the following arithmetic is required in addition to the actual expected disk DB capacity.</p><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><ul><li>Separator capacity = 5 bytes * number of records * number of columns</li></ul><p>Example&gt; If there are 1 million data in a table with 10 columns, 5 * 10 * 1,000,000 = 50MB is additionally required. </p></td></tr></tbody></table></div><p> </p><p>In other words, it means that the discriminator capacity is required in addition to the initially calculated disk DB capacity.</p><p>In addition, even when compressed and stored in a disk, the size of the space to be stored must be calculated in consideration of the compression ratio compared to the capacity calculated above.</p><p>This part is not added to the disk capacity calculation example below, so be sure to take this into account when users choose this backup method.</p><h2 id="SystemResourceCapacityPlanningGuideforAltibase-Exampleofdiskcapacitycalculation">Example of disk capacity calculation</h2><hr /><div class="table-wrap"><table class="confluenceTable"><thead><tr><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Item</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Capacity</div></th><th colspan="1" class="confluenceTh"><div class="tablesorter-header-inner"> </div></th></tr></thead><tbody><tr><td class="confluenceTd">Disk DB data file</td><td class="confluenceTd">500GB</td><td colspan="1" class="confluenceTd">500GB</td></tr><tr><td class="confluenceTd">Data file of disk DB</td><td class="confluenceTd">Space required as much as disk DB capacity</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Memory DB data file</td><td class="confluenceTd">20G</td><td colspan="1" class="confluenceTd">20*2 = 40GB</td></tr><tr><td class="confluenceTd">Data file of memory DB</td><td class="confluenceTd">Memory DB capacity * 2 space required</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Backup file</td><td class="confluenceTd">Memory DB capacity + disk DB capacity</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Backup file</td><td class="confluenceTd">Memory DB + Disk DB + Archive Log File</td><td colspan="1" class="confluenceTd">560GB</td></tr><tr><th style="text-align: center;" class="confluenceTh">Calculation example</th><th style="text-align: center;" class="confluenceTh">Usage</th><th colspan="1" style="text-align: center;" class="confluenceTh">Required disk space</th></tr><tr><td class="confluenceTd">Archive log file</td><td class="confluenceTd">The amount of online log files to be saved during the backup cycle</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Archive log file</td><td class="confluenceTd">40GB</td><td colspan="1" class="confluenceTd">40GB</td></tr><tr><td class="confluenceTd">Online log file</td><td class="confluenceTd">20GB (varies according to system size)</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Online log file</td><td class="confluenceTd">20GB</td><td colspan="1" class="confluenceTd">20GB</td></tr><tr><td class="confluenceTd">Total space required</td><td class="confluenceTd">40+500+20+40+(560*2)</td><td colspan="1" class="confluenceTd">1,720GB</td></tr></tbody></table></div><p> </p><h1 id="SystemResourceCapacityPlanningGuideforAltibase-Networkcapacitycalculation">Network capacity calculation</h1><hr /><p>The network capacity calculation part of this document only considers the replication. The user must calculate the network capacity by considering the service network, and the replication network capacity covered in this document must also be added to the total network capacity.</p><h2 id="SystemResourceCapacityPlanningGuideforAltibase-Packetsizeduetoreplication">Packet size due to replication</h2><hr /><p>In the case of sending packets in the replication, the following calculation formula is able for each transaction type.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Type</div></th><th style="text-align: center;" class="confluenceTh"><div class="tablesorter-header-inner">Size (byte)</div></th></tr></thead><tbody><tr><td class="confluenceTd">INSERT</td><td class="confluenceTd">Header(28byte) + (Data length(4byte) + Data(x))</td></tr><tr><td class="confluenceTd">UPDATE</td><td class="confluenceTd"><p>Header(32byte) + (PK data length(4byte) + PK data(x)) + (Data length before change(4byte) + Data before change(x)) + (Data length after change(4byte) + Data after change( x))</p></td></tr><tr><td class="confluenceTd">DELETE</td><td class="confluenceTd">Header (28byte) + (PK data length (4byte) + PK data (x))</td></tr><tr><td class="confluenceTd">Commit / Rollback</td><td class="confluenceTd">16byte</td></tr></tbody></table></div><p>As above, each transaction has a basic header, and the packet is sent as much as the sum of length information for each column and the length of actual data for sent data.</p><p>In a replication environment, INSERT needs to send all column data, and UPDATE only needs to send previous information and change information of the changed column data. DELETE can be processed by sending only the PK data of the data to be deleted.</p><p>Using the above calculation formula, if data input of 300 bytes in size to a replication table with 10 columns needs to be processed at 10,000 tps per second, it can be calculated as follows.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th style="text-align: center;" class="confluenceTh">Type</th><th style="text-align: center;" class="confluenceTh">Example of calculation</th></tr><tr><td class="confluenceTd">INSERT</td><td class="confluenceTd">(28 + (4*10) + 300 + 16) * 10,000 = 3.66Mbps</td></tr><tr><td colspan="2" class="confluenceTd"><p>- 28 bytes are used as the header of the replication send log per case</p><p>- The meaning of 4*10 means 4 bytes of length information about the actual length of each column.</p><p>- 300byte means the length of data to be sent.</p><p>-16 means Commit or Rollback log.</p></td></tr></tbody></table></div><p>In the above environment, in order to meet user requirements, an environment that guarantees the network speed of 3.66Mbps based on the insert transaction is required.</p><p>In building the actual environment, correction factors for data increase or other factors should be applied. In terms of margin, it is recommended to build a network environment with at least a 30% increase.</p><p> </p><p>As for the replication network card, a Giga-bit card is recommended, and a direct connection using a cross-cable or a private network is recommended.</p><p>However, if it is not a short distance, it is necessary to consider in advance whether the replication can be processed without delay within the available network bandwidth.</p><h1 id="SystemResourceCapacityPlanningGuideforAltibase-Overview.1">Overview</h1><hr /><p>In this chapter, we have discussed how to calculate the CPU, memory, disk, and network capacity required for Altibase.</p><p>However, when estimating the capacity of a database system, there isn't much to consider for each item, so when configuring an actual system, it is desirable to find the most suitable configuration method with the review of sufficient data in advance.</p><div><span style="color: rgb(0,0,0);font-size: 20.0px;"><br /></span></div><div><span style="color: rgb(0,0,0);font-size: 24.0px;"><br /></span></div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:49</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
