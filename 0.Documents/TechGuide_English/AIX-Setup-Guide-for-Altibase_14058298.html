<!DOCTYPE html>
<html>
    <head>
        <title>Technical Documents(English) : AIX Setup Guide for Altibase</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Technical Documents(English)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_557064.html">Home</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Technical Documents(English) : AIX Setup Guide for Altibase
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> richard.nahm	</span>, last modified by <span class='editor'> david.cho</span> on Dec 22, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h2 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-Overview"><span class="md-plain">Overview</span></h2><p class="md-end-block md-p"><span class="md-plain">This document provides guides for setting appropriate values and various user environment settings of kernel parameters for installing and operating Altibase in the AIX (Advanced Interactive eXecutive) Operating System.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">In this document, the guide is presented only for operating system related items to be set before Altibase is installed.</span><span> </span></p><h2 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-KernelParameters"><span class="md-plain">Kernel Parameters</span></h2><p class="md-end-block md-p"><span class="md-plain">When operating Altibase on the AIX OS, it describes the types of kernel parameters that need to be changed, and why the settings need to be changed, and introduces how to change the kernel parameters.</span></p><p class="md-end-block md-p"><span class="md-plain">For details related to each kernel parameter, refer to the guide provided by IBM.</span></p><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-PosixAIO"><span class="md-plain">Posix AIO</span></h3><p class="md-end-block md-p"><span class="md-plain">Posix AIO is a kernel parameter in AIX that allows a process to simultaneously process disk I/O processing and application program operations, resulting in improved performance.</span></p><p class="md-end-block md-p"><span class="md-plain">If the corresponding kernel parameter is not set, Altibase cannot be used, so it must be set in advance.</span></p><p class="md-end-block md-p"><span class="md-plain">However, starting from AIX 6.1, the default value of Posix AIO is 'Available', there is no need to set it separately.</span></p><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-FileCache"><span class="md-plain">File Cache</span></h3><p class="md-end-block md-p"><span class="md-plain">This kernel parameter is not an essential element to change, but the proper file cache setting prevents the swap out of the memory area used by Altibase and suppresses the requirement for swap out. It is recommended to minimize the phenomenon that the I/O delay time leads to the degradation of Altibase.</span></p><p class="md-end-block md-p"><span class="md-plain">For reference, there are no relevant parameters under AIX 5.2 ML03, and there is no change starting from AIX 6.1 so it is not necessary to refer to it depending on the operation system version.</span></p><p class="md-end-block md-p"><span class="md-plain">File cache is a kind of system buffer managed at the operating system level to solve the bottleneck caused by the speed difference between main memory and auxiliary memory. These file caches are managed by unique policies of each operating system, but commonly have a direct correlation with the swap policy.</span></p><p class="md-end-block md-p"><span class="md-plain">Swapping itself has the usefulness of handling applications or data files larger than main memory, but in systems where long-term resident applications such as DBMS are operated, the disk I/O delay of the operating system layer due to swapping since the response time of the DBMS may be irregular or delayed with time. So file cache is a consideration factor depending on the system use.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Therefore, in order to guarantee Altibase's consistent response time, it is recommended to set the file cache and swap-related kernel parameters in advance so that swap does not occur as much as possible.</span></p><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-ConfigurationonAIX"><span class="md-plain">Configuration on AIX</span></h3><p class="md-end-block md-p"><span class="md-plain">The default memory manager of AIX is to convert unused memory areas to file cache as much as possible.</span></p><p class="md-end-block md-p">In this state, if an additional memory allocation requso if the system does noest occurs and there is insufficient free memory, the process swaps out the memory being used or the area that is not often accessed from the file cache area, and then allocates it.</p><p class="md-end-block md-p"><span class="md-plain">At this time, when a transaction approaching the swapped out area occurs, the performance is not uniform.</span></p><p class="md-end-block md-p"><span class="md-plain">In this way, the process by which the memory manager acquires the memory requested by the process or the file cache in order to allocate additional memory is called stealing. The stealing target can be specified by the file cache-related kernel parameter lru_file_repage.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Generally, three kernel parameters are changed as well as lru_file_repage.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Kernel Parameter</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Remark</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">minperm</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">10%</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">-</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">lru_file_repage</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">0</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Supported in AIX 5.2 ML5, AIX 5.3 ML2 or later</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">strict_maxclient</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">0</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Supported in AIX 5.2 ML4 or later</span></span></td></tr></tbody></table></div><p class="md-end-block md-p"><span class="md-plain">When set as above, stealing occurs only in the file cache when the file cache share compared to the total memory is used above minperm.</span></p><p class="md-end-block md-p md-focus"><span class="md-plain">Since this setting can be checked during AIX operation, if performance or other problems occur, it is recommended to change it in consultation with AIX engineers.</span></p><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-ResourceLimitations"><span class="md-plain md-expand">Resource Limitations</span></h3><p class="md-end-block md-p"><span class="md-plain">In the case of AIX, some of the resource limit items are set through the following kernel parameter changes, not the user configuration file setting using ulimit, which is commonly uand the soft-limit means that the hard-limit can sed.</span></p><p class="md-end-block md-p"><span class="md-plain">Altibase is a single-process, multi-thread-based application program, so if the system does not have any application programs other than Altibase, there is no need to specifically consider the number of process limits per user. In some cases, it may be necessary to appropriately expand the limit on the number of processes per user by predicting the number.</span></p><p class="md-end-block md-p"><span class="md-plain">The relevant kernel parameters are as follows.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Kernel Parameter</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Maximum number of PROCESSES allowed per user</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The number of processes that can be created per user</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">More than the number of processes that can be running simultaneously</span></span></td></tr></tbody></table></div><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-HowtoChange"><span class="md-plain">How to Change</span></h3><p class="md-end-block md-p"><span class="md-plain md-expand">To change the kernel parameters related to file cache, use the virtual memory-related kernel utility emo, and for other changes, describe the method using the system kernel-related utility smit.</span></p><p class="md-end-block md-p"><span class="md-plain">Generally, the user needs to connect to the root account, and it is recommended to restart the system after changing to properly apply even the kernel parameters applied in real-time.</span></p><h4 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-PosixAIO.1"><span class="md-plain">Posix AIO</span></h4><p class="md-end-block md-p"><span class="md-plain">After running smit, move the items in the order of &quot;Devices&quot;, &quot;Asynchronous I/O&quot; to change the 'Defined' state of &quot;Configured Defined Asynchronous I/O&quot; to 'Available'.</span></p><p class="md-end-block md-p"><span class="md-plain">However, if only this process is performed, the following process must be performed as the previous Posix AIO setting may be reset when the system is restarted.</span></p><p class="md-end-block md-p"><span class="md-plain">After running smit, move the items in the order of “Devices”, “Asynchronous I / O”, “Posix Asynchronous I / O”, and “Change / Show Characteristics of Asynchronous I / O”,</span><span class="md-softbreak"> </span><span class="md-plain">change the item of “STATE to be configured at system restart” to Available.</span></p><p class="md-end-block md-p"><span class="md-plain">The current configuration of AIO-related kernel parameter can be checked as follows.</span></p><h6 class="md-end-block md-heading md-focus" id="AIXSetupGuideforAltibase-CheckAIOrelatedkernelparametersettings"><span class="md-plain">Check AIO related kernel parameter settings</span></h6><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># lsdev –C | grep aio
aio0         Available               Asynchronous I/O (Legacy)
posix_aio0  Available               Posix Asynchronous I/O</pre>
</div></div><h5 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-FileCache.1"><span class="md-plain">File Cache</span></h5><p class="md-end-block md-p"><span class="md-plain">The change method is as follows.</span></p><h6 class="md-end-block md-heading md-focus" id="AIXSetupGuideforAltibase-Howtochangefilecache"><span class="md-plain">How to change file cache</span></h6><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># vmo -p -o minperm%=10
# vmo -p -o lru_file_repage=0
# vmo -p -o strict_maxclient=0</pre>
</div></div><p class="md-end-block md-p"><span class="md-plain">The confirmation method is as follows.</span></p><h6 class="md-end-block md-heading md-focus" id="AIXSetupGuideforAltibase-Howtocheckfilecache"><span class="md-plain">How to check file cache</span></h6><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># vmo –L</pre>
</div></div><h5 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-ResourceLimitation"><span class="md-plain">Resource Limitation</span></h5><p class="md-end-block md-p md-focus"><span class="md-plain">After running smit, move to &quot;System Environments&quot;, &quot;Change/Show Characteristics of Operating System&quot;, and change the &quot;Maximum number of PROCESSES allowed per user&quot; value to the number of processes that can be run simultaneously.</span></p><h2 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-UserSettings"><span class="md-plain">User Settings</span></h2><p class="md-end-block md-p"><span class="md-plain">This describes resource limits, environment variables, and various environment settings of user accounts in the system for operating Altibase in the AIX OS.</span></p><p class="md-end-block md-p"><span class="md-plain">For instructions and specifics related to configuration, refer to the guide provided by IBM.</span></p><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-ResourceLimitations.1"><span class="md-plain">Resource Limitations</span></h3><p class="md-end-block md-p">In the UNIX operating system, logical limits are set for available resources on a user account basis. Among the resource limit items, the items that need to be expanded for stable service operation as follows.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Classification</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">data seg size(data)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum size of one process data area</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">file size (size)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum size of files that can be created</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">open files (nofiles)</span></span></td><td class="confluenceTd">The maximum number of files that can be accessed simultaneously by one process</td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">max memory size (rss)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum size of available memory</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">virtual memory (memory)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum size of available virtual memory</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">max user process</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The number of processes that can be created per user</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr></tbody></table></div><p class="md-end-block md-p"><span class="md-plain">It is intended to remove problems that may occur due to logical limitations even when there are abundant physical resources when expanding the memory and data file area used by a specific user. This setting has no effect on other processes. It is recommended to set the maximum value allowed by (unlimited if possible).</span></p><p class="md-end-block md-p"><span class="md-plain">For example, the meaning of open files includes not only the files accessed by the process, but also the number of communication sockets. If Altibase is operated in an environment where this value is limited to 10, it means that more than 10 sessions can be accessed simultaneously. (Considering the file used by Altibase, there may not be an accessible session.)</span></p><p class="md-end-block md-p"><span class="md-plain">To change the method, edit the environment configuration file using, the ulimit command, edit the system resource configuration file, or use the kernel-related utilities provided for each operating system.</span></p><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-Hard-Limit&amp;Soft-Limit"><span class="md-plain">Hard-Limit &amp; Soft-Limit</span></h3><p class="md-end-block md-p"><span class="md-plain">Resource limit values are divided into the concept of hard-limit and soft-limit. The hard-limit means the maximum value of kernel-level resource limit that cannot be changed except the system administrator account (root), and the soft-limit means that the current user account can change up to the hard-limit. (refer to the ulimit -S/-H option for details.)</span></p><p class="md-end-block md-p">The soft-limit is effective while the user maintains a session by accessing it, and changes are immediately reflected. However, when other sessions of the same user account are connected, the existing soft-limit is reflected, so the ulimit command is often added to the user account configuration file.</p><p class="md-end-block md-p"><span class="md-plain">However, this method may not be intended due to the global hard-limit, so it is recommended to systematically apply it through editing system-wide resource configuration files rather than applying user account units using environment configuration files.</span></p><p class="md-end-block md-p"><span class="md-plain">For reference, the system configuration file related to the user resource limit in AIX is /etc/security/limits.</span></p><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-EnvironmentVariables"><span class="md-plain">Environment Variables</span></h3><h4 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-SettingforMulti-ThreadedApplications"><span class="md-plain">Setting for Multi-Threaded Applications </span></h4><p class="md-end-block md-p"><span class="md-plain">Separate environment variables need to be set for Altibase, a multi-thread based application program. For reference, this document mentions only representative ones, but it should be noted that all environment variables related to multi-threads supported by AIX need to be considered.</span></p><p class="md-end-block md-p">The following items are recommended environment variables to prevent performance degradation in multi-threaded SMP systems.Altibase can be operated without setting the environment variable, but must be set because failures may occur due to unknown causes.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Environment Variable</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">AIXTHREAD_MNRATIO</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The number of k kernel threads for processing n user threads</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">AIXTHREAD_SCOPE</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Sets the thread model to 1:1</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">AIXTHREAD_MUTEX_DEBUG</span></span></td><td rowspan="3" class="confluenceTd"><br />Set to remove the overhead  of the pthread library due to the mutex / condition variable in use / read/write lock management used by the debugger.</td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">AIXTHREAD_RWLOCK_DEBUG</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">AIXTHREAD_COND_DEBUG</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">SPINLOOPTIME</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The number of attempts to acquire a lock in the state of CPU resource acquisition</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">YIELDLOOPTIME</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The number of times to yield CPU resources while holding lock</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">MALLOCMULTIHEAP</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Sets up in a multi-threaded environment that uses a lot of malloc</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">AIXTHREAD_MUTEX_FAST</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">This is an option to change the internal mutex_locking operation method of the operating system. If mutex_contention is severe, set it to ON to improve performance. It is provided in AIX 5.2 and later.</span></span></td></tr></tbody></table></div><p class="md-end-block md-p"><span class="md-plain">More information on environmental variables can be found on the IBM website.</span></p><div><h2 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-"><span class="md-plain md-expand"><br /></span></h2><h2 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-Summary"><span class="md-plain md-expand">Summary</span></h2><p class="md-end-block md-p"><span class="md-plain">For stable operation of Altibase on the AIX operating system, kernel parameter settings and user environment settings must be performed in advance. If the setting is not performed properly, it should be noted that the problem can be caused by each limit value even though the system has sufficient resources.</span></p><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-SettingExamples"><span class="md-plain">Setting Examples</span></h3><h4 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-KernelParameters.1"><span class="md-plain">Kernel Parameters</span></h4><p class="md-end-block md-p"><span class="md-plain">Refer to the table below and set the appropriate kernel parameters. For reference, in AIX, some of the resource limit items are adjusted by changing kernel parameters.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><span class="td-span"><span class="md-plain">Classification</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Kernel Parameter</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th><th class="confluenceTh"><span class="td-span"><span class="md-plain">Remark</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Posix AIO</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Configure Defined Asynchronous I/O</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Available</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Required under AIX 6.1</span></span></td></tr><tr><td rowspan="3" class="confluenceTd"><span class="td-span"><span class="md-plain">File Cache</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">lru_file_repage</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">0</span></span></td><td rowspan="3" class="confluenceTd"><span class="td-span"><span class="md-plain">Considered under AIX6.1</span><span class="md-br md-tag" style="color: rgb(167,167,167);"> </span><span class="md-plain">(Requires lru_file_repage)</span></span><span class="td-span"> </span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">strict_maxclient</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">0</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">minperm</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">10</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">Resource limitation</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum number of PROCESSES allowed per user</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">More than the number of processes that can be running simultaneously</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Corresponds to max user process</span></span></td></tr></tbody></table></div><h4 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-UserResourceLimits"><span class="md-plain">User Resource Limits</span></h4><p class="md-end-block md-p"><span class="md-plain">Refer to the table below, if possible, set it to unlimited.</span></p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th style="text-align: left;" class="confluenceTh"><span class="td-span"><span class="md-plain">Classification</span></span></th><th style="text-align: left;" class="confluenceTh"><span class="td-span"><span class="md-plain">Description</span></span></th><th style="text-align: left;" class="confluenceTh"><span class="td-span"><span class="md-plain">Recommended Value</span></span></th></tr></thead><tbody><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">data seg size(data)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum size of the process data area</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">file size (fsize)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum size of the created file</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">open files (nofiles)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum number of files that can be accessed by one process at the same time</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">max memory size (rss)</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The maximum size of available memory</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">unlimited</span></span></td></tr><tr><td class="confluenceTd"><span class="td-span"><span class="md-plain">max user process</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">The number of processes that can be created per user</span></span></td><td class="confluenceTd"><span class="td-span"><span class="md-plain">Maximum number of PROCESSES allowed per user</span></span></td></tr></tbody></table></div><h4 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-UserEnvironmentVariables"><span class="md-plain">User Environment Variables</span></h4><p class="md-end-block md-p"><span class="md-plain">In the case of sh, bash, and ksh, examples of settings required environment variables using the environment setting file are as follows. In the case of csh, it is declared through a shell command such as setenv instead of export.</span></p><h6 class="md-end-block md-heading md-focus" id="AIXSetupGuideforAltibase-UserEnvironmentVariableSettingExamples"><span class="md-plain">User Environment Variable Setting Examples</span></h6></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">#For Multi-Threaded Application
AIXTHREAD_MNRATIO=1:1; export AIXTHREAD_MNRATIO
AIXTHREAD_SCOPE=S; export AIXTHREAD_SCOPE
AIXTHREAD_MUTEX_DEBUG= OFF; export AIXTHREAD_MUTEX_DEBUG
AIXTHREAD_RWLOCK_DEBUG=OFF; export AIXTHREAD_RWLOCK_DEBUG
AIXTHREAD_COND_DEBUG = OFF; export AIXTHREAD_COND_DEBUG
SPINLOOPTIME = 1000; export SPINLOOPTIME
YIELDLOOPTIME = 50; export YIELDLOOPTIME
MALLOCMULTIHEAP=1; export MALLOCMULTIHEAP
 
# For Resource Limitation
ulimit –d unlimited  #data segment size, data
ulimit –f unlimited  #file size, fsize
ulimit –n unlimited  #file descriptor(open files), nofiles
ulimit –m unlimited  #max memory size, rss</pre>
</div></div><p class="md-end-block md-p"><span class="md-plain">For reference, in the case of ksh, an error may occur when defining another environment variable using the environment variable with it being predefined.</span></p><p class="md-end-block md-p"> </p><h2 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-Enclosure"><span class="md-plain">Enclosure</span></h2><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-AIXMemoryRelatedPatches"><span class="md-plain">AIX Memory Related Patches</span></h3><p class="md-end-block md-p"><span class="md-plain">There is a bug that can cause a memory leak in the heapmin function provided by the AIX platform.</span></p><p class="md-end-block md-p"><span class="md-plain">Related IBM official document is as follows.</span></p><p class="md-end-block md-p"><span class="md-link"><a href="http://www-01.ibm.com/support/docview.wss?uid=swg1IV28577" class="external-link" rel="nofollow">http://www-01.ibm.com/support/docview.wss?uid=swg1IV28577</a></span></p><p class="md-end-block md-p"><span class="md-plain">As a measure of this, the user must patch or upgrade to the AIX native compiler where AIX bug IV28577 is resolved.</span></p><p class="md-end-block md-p"><span class="md-plain">It can be checked whether or not the patch is done with the following command.</span></p><h6 class="md-end-block md-heading md-focus" id="AIXSetupGuideforAltibase-CheckheapminRelatedPatch"><span class="md-plain">Check heapmin Related Patch</span></h6><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">-bash-3.2$ instfix -i | grep IV28577
All filesets for IV28577 were found.</pre>
</div></div><p class="md-end-block md-p">If there is no patch, no value is displayed. It is recommended to perform patch or upgrade through AIX engineer.</p><p class="md-end-block md-p"><span class="md-plain">In addition, it is recommended to apply the latest patch to avoid various problems known in AIX.</span></p><h3 class="md-end-block md-heading" id="AIXSetupGuideforAltibase-LimitoftheNumberofIPCChannels"><span class="md-plain">Limit of the Number of IPC Channels</span></h3><p class="md-end-block md-p"><span class="md-plain">Among the semaphore parameters of AIX, the semume value basically limits the number of semaphore undo entries. It is automatically set in AIX and set to 1024, and cannot be changed by the user.</span></p><p class="md-end-block md-p"><span class="md-plain">Altibase uses undo entries to ensure resources between IPC connections, and from Altibase 5.1.5.72 or later, undo entries for each IPC channel have been changed from the previous two to use three.</span></p><p class="md-end-block md-p"><span class="md-plain">Since the semume (number of undo entry resources) is fixed at 1024, Altibase uses 2 or 3 undo entries per IPC channel based on version 5.1.5.72, so the maximum number of IPC channels that can be used is limited.</span></p><p class="md-end-block md-p"><span class="md-plain">Therefore, the maximum number of IPC channels that can be used for each version is as follows: </span></p><ul class="ul-list"><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Up to 512 IPC channels (= 1024/2) can be used under 5.1.5.72 version</span></p></li><li class="md-list-item"><p class="md-end-block md-p"><span class="md-plain">Up to 341 IPC channels (= 1024/3) can be used in 5.1.5.72 or later</span></p></li></ul><p class="md-end-block md-p md-focus"><span class="md-plain"><br /></span></p><p class="md-end-block md-p md-focus"><span><span class="md-plain"><br /></span></span></p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:49</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
