<!DOCTYPE html>
<html>
    <head>
        <title>Technical Documents(English) : WebSphere Integration Guide for Altibase</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Technical Documents(English)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_557064.html">Home</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Technical Documents(English) : WebSphere Integration Guide for Altibase
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> richard.nahm	</span>, last modified on May 19, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h2 id="WebSphereIntegrationGuideforAltibase-Overview">Overview</h2><p>This document is a guide for operating Altibase and WebSphere. This document describes how to install WebSphere, how to set environment variables, and how to integrate Altibase and WebSphere.</p><p>This document based on the Altibase 7.1.0 and WebSphere 9.0 version.</p><h2 id="WebSphereIntegrationGuideforAltibase-WebSphereInstallation">WebSphere Installation</h2><p>This chapter describes the process of downloading and installing WebSphere, the directory structure of WebSphere, and describes how to start and shut down WebSphere.</p><h3 id="WebSphereIntegrationGuideforAltibase-BasicInstallation">Basic Installation</h3><p>Download WebSphere package.</p><p>To download WebSphere, the IBM Installation must be installed first.</p><p>(This document is based on IBM Installation Manager version 1.8.5.)</p><p>The link to download IBM Installation Manager is: https://www-945.ibm.com/support/fixcentral/swg/downloadFixes?parent=ibm~Rational&amp;product=ibm/Rational/IBM+Installation+Manager&amp;release=1.8.5.0&amp;platform=Windows&amp;function=fixId&amp;fixids=1.8.5.0-IBMIM -WIN64-20160506_1125 &amp; useReleaseAsTarget = true &amp; includeRequisites = 1 &amp; includeSupersedes = 0 &amp; downloadMethod = ddp</p><div><span style="color: rgb(0,0,0);font-size: 16.0px;font-weight: bold;"><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221563.png" data-image-src="attachments/14058343/14221563.png"></span></div><div>To download IBM Installation Manager, the user must subscribe to IBM and have Java installed.</div><div><img class="confluence-embedded-image" src="attachments/14058343/14221564.png" data-image-src="attachments/14058343/14221564.png"></div><div>Set the download path and port, and select OK.</div><div><img class="confluence-embedded-image" src="attachments/14058343/14221565.png" data-image-src="attachments/14058343/14221565.png"></div><div>Unzip the received file from the downloaded location ad proceed with the installation (install.exe).</div><div><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221566.png" data-image-src="attachments/14058343/14221566.png"><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221567.png" data-image-src="attachments/14058343/14221567.png"><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221568.png" data-image-src="attachments/14058343/14221568.png"></div><div><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221570.png" data-image-src="attachments/14058343/14221570.png"></div><div><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221571.png" data-image-src="attachments/14058343/14221571.png"></div><div>After installation of the IBM Installation Manager is complete, click the Add Repository button in File -&gt; Preferences from the Start screen menu.</div><div><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221572.png" data-image-src="attachments/14058343/14221572.png"></div><div><p>The repository URL is:</p><ul><li>WAS V9: <a href="http://www.ibm.com/software/repositorymanager/V9WASBase" class="external-link" rel="nofollow">http://www.ibm.com/software/repositorymanager/V9WASBase</a></li><li>WAS ND V9: <a href="http://www.ibm.com/software/repositorymanager/V9WASND" class="external-link" rel="nofollow">http://www.ibm.com/software/repositorymanager/V9WASND</a></li></ul><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221573.png" data-image-src="attachments/14058343/14221573.png"></p><p>When the user clicks the Install button on the initial screen again, the package selection menu appears, and select IBM WebSphere Application Server.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221574.png" data-image-src="attachments/14058343/14221574.png"></p><p>Choose an installation path.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221575.png" data-image-src="attachments/14058343/14221575.png"></p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221577.png" data-image-src="attachments/14058343/14221577.png"></p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221578.png" data-image-src="attachments/14058343/14221578.png"></p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221579.png" data-image-src="attachments/14058343/14221579.png"></p><p>After the installation is completed, when the WebSphere Customization toolbox 9.0 automatically runs, click the Create button.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221580.png" data-image-src="attachments/14058343/14221580.png"></p><p>Select an application server.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221581.png" data-image-src="attachments/14058343/14221581.png"></p><p>Choose Create Profile.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221582.png" data-image-src="attachments/14058343/14221582.png"></p><p>If the user does not select the management security option, the user is logged in as blank.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221583.png" data-image-src="attachments/14058343/14221583.png"></p><p>When the creation is completed, the user can check the information of the set profile.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221584.png" data-image-src="attachments/14058343/14221584.png"></p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221585.png" data-image-src="attachments/14058343/14221585.png"></p><p>The installation contents are as follows.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221586.png" data-image-src="attachments/14058343/14221586.png"></p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221587.png" data-image-src="attachments/14058343/14221587.png"></p><h3 id="WebSphereIntegrationGuideforAltibase-WebSphereDirectoryStructure"><span style="color: rgb(0,0,0);">WebSphere Directory Structure</span></h3><p><span style="color: rgb(0,0,0);">After installing WebSphere, the user will able to see the following directories:</span></p><p><span style="color: rgb(0,0,0);"><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221588.png" data-image-src="attachments/14058343/14221588.png"></span></p><p><span style="color: rgb(0,0,0);">If the user installed WebSphere without any changes during installation (installed on C:\IBM), the path of C:\IBM\WebSphere\AppServer will be the environment variable WAS_INSTALL_ROOT as shown in the figure above. The user can also use ${WAS_INSTALL_ROOT} when specifying the classpath when setting the JDBC provider.</span></p><p>If the user looks at the ${WAS_INSTALL_ROOT} directory, the user can see that various directories are created.</p><p>This document only describes directories that must be referenced when using WebSphere.</p><p>In WebSphere, the concept of Profile is used. The files shared and used by all users related to the product are called binary files. Profile means that the environment and configuration files customized for each user's environment are saved.</p><p>As shown in the figure below, each Profile created by the user is managed in the Profiles directory.</p><p><img class="confluence-embedded-image" src="attachments/14058343/14221589.png" data-image-src="attachments/14058343/14221589.png"></p><p>If the user looks at one of the profiles created in the Profiles directory, it is composed of the following structure.</p><p><img class="confluence-embedded-image" src="attachments/14058343/14221590.png" data-image-src="attachments/14058343/14221590.png"></p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p><strong>Directory</strong></p></td><td class="confluenceTd"><p><strong>Description</strong></p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>bin</p></td><td class="confluenceTd"><p>Various execution scripts including scripts related to server execution/shutdown</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>config</p></td><td class="confluenceTd"><p>Provides settings used in Profile such as resource.xml in XML format</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>configuration</p></td><td class="confluenceTd"><p>Eclipse based osgi or runtime related configuration file provided</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>etc</p></td><td class="confluenceTd"><p>Provides security-related key values and key database</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>installableApps</p></td><td class="confluenceTd"><p>Applications that can be usefully installed and provided</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>logs</p></td><td class="confluenceTd"><p>Provides each log for each server such as SystemOut.log and SystemErr.log</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>properties</p></td><td class="confluenceTd"><p>Provides each property used in WAS</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>tranlog</p></td><td class="confluenceTd"><p>Provides transition log for transaction recovery due to failure.</p></td></tr></tbody></table></div><p>If the user changes the environment settings using the web management console while using WebSphere, it is actually written and modified in the Resource.xml file in the Config directory.</p><p>This Resource.xml file exists in each directory for &quot;cell&quot;, &quot;node&quot;, and &quot;server&quot;. For the description of &quot;cell&quot;, &quot;node&quot;, and &quot;server&quot;, refer to &quot;JDBC provider configuration&quot; in the next chapter.</p><h3 id="WebSphereIntegrationGuideforAltibase-StartingWebSphere">Starting WebSphere</h3><p>When the installation of WebSphere in completed, the user can start WebSphere using the script file.</p><p>Open a command window and go to the bin directory of the currently installed profile in the WebSphere directory and run the startup script file.</p><p>The command to start the server is the &quot;startServer.bat&quot; file. (Example D:\IBM\WebSphere\AppServer1\profiles\AppSrv01\bin)</p><p>After installing WebSphere, the WAS server name defaults to &quot;server1&quot;.</p><p>Therefore, go to the location of the script file and enter &quot;startServer server1&quot; in the command window to start the WAS server.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221591.png" data-image-src="attachments/14058343/14221591.png"></p><p>As shown in the figure above, if the message that the server was opened for e-business and the process ID is displayed, WebSphere is running normally. After normal operation, the user can connect to the web management console environment to manage WebSphere.</p><p>Enter http://SERVER_IP:9060/ibm/console in a web browser to access the web management console. (Where SERVER_IP is the IP of the server where WebSphere is installed, and 9060 is the service port for the management console.)</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221592.png" data-image-src="attachments/14058343/14221592.png"></p><p>When the above login screen appears, enter any user and enter the actual management console. When installing WebSphere, check the security items and log in with the ID if the ID and password are set.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221593.png" data-image-src="attachments/14058343/14221593.png"></p><p>If the user selects [Server]&gt; [Server Type]&gt; [WebSphere Application Server] from the left menu of the management console, the user can check the information of the currently running node. For more information, select the node.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221594.png" data-image-src="attachments/14058343/14221594.png"></p><p>Click the [Port] menu at the bottom right to check and modify the port used by the WAS server.<br />Check the service port 9060 and application service port 9080 of the management console, and modify and use them if necessary.</p><h3 id="WebSphereIntegrationGuideforAltibase-ShuttingDownWebSphere">Shutting Down WebSphere</h3><p>To shut down WebSphere, go to the location where the user started the server in the command window and execute the stop script file &quot;stopServer.bat&quot;.</p><p>In the case of shutdown, if &quot;stopServer server1&quot; is executed as in the case of operation, the server is shut down.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221595.png" data-image-src="attachments/14058343/14221595.png"></p><h2 id="WebSphereIntegrationGuideforAltibase-JDBCDriverSettings"><span style="color: rgb(0,0,0);">JDBC Driver Settings</span></h2><p><span style="color: rgb(0,0,0);">This chapter describes how to set up and integrate Altibase and WebSphere.</span></p><h3 id="WebSphereIntegrationGuideforAltibase-"><span style="color: rgb(0,0,0);"> </span></h3><h3 id="WebSphereIntegrationGuideforAltibase-AcquiringAltibaseJDBCDriver">Acquiring Altibase JDBC Driver</h3><p>The JDBC driver provided by Altibase is Altibase.jar. This file is located in the $Altibase_HOME/lib directory of the server where Altibase is installed.</p><h3 id="WebSphereIntegrationGuideforAltibase-CheckingAltibaseJDBCDriverVersion">Checking  Altibase JDBC Driver Version</h3><p>To check the Altibase JDBC driver version, execute the following command.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ java –jar Altibase.jar
Altibase 7.1.0.2.5 with CMP 7.1.7 for JDBC 3.0 compiled with JDK 5(sharding included)</pre>
</div></div><p>It is necessary to check the Altibase DB server version to check whether the Altibase DB server to be interlocked with the Altibase JDBC Driver is compatible. In this case, if the cm protocol version of the Altibase DB server and the CMP of the Altibase JDBC Driver are the same, they are compatible.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ Altibase -v
version 7.1.0.2.5 X86_64_LINUX_redhat_Enterprise_release6.0-64bit-7.1.0.2.5-release-GCC4.6.3 (x86_64-unknown-linux-gnu) May 21 2019 13:44:56, binary db version 6.5.1, meta version 8.7.1, cm protocol version 7.1.7, replication protocol version 7.4.5, shard version 2.2.1</pre>
</div></div><h3 id="WebSphereIntegrationGuideforAltibase-ApplyingJDBCDriver">Applying JDBC Driver</h3><p>In order to integrate with Altibase in WebSphere, the Altibase JDBC driver needs to be located in the appropriate place. Altibase.jar file is located in ${WAS_INSTALL_ROOT}\universalDriver\lib among WebSphere directories.</p><h2 id="WebSphereIntegrationGuideforAltibase-AltibaseandWebSphereIntegration(AltibaseConnectionPool)">Altibase and WebSphere Integration (AltibaseConnectionPool)</h2><p>This chapter describes how to integrate Altibase and WebSphere.</p><p>Since WebSphere does not provide a connection source for integrating with Altibase, the user must integrate with WebSphere by using AltibaseConnectionPool.</p><h3 id="WebSphereIntegrationGuideforAltibase-JDBCProviderSettings">JDBC Provider Settings</h3><p>The first thing to do to integrate Altibase and WebSphere is setting up a JDBC provider. By setting the Altibase JDBC driver in WebSphere, Altibase and WebSphere can be used.</p><p>Select [Resources]&gt; [JDBC]&gt; [JDBC Provider] from the WebSphere web management console menu.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221596.png" data-image-src="attachments/14058343/14221596.png"></p><p>Before setting the JDBC provider, set the scope to specify the level to view the resource definition. The scope is set to &quot;cell&quot;.<br />If the user defines the range as &quot;cell&quot;, resources that can be referenced are created in both the &quot;node&quot; and &quot;server&quot; units below it. However, if the user makes it in the &quot;server&quot; unit, they can only referenced by that server and cannot be referenced by other servers.</p><p>After specifying the range, click [New] to configure the Altibase JDBC driver.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221597.png" data-image-src="attachments/14058343/14221597.png"></p><p>When setting the JDBC provider, set &quot;Database Type&quot; to User-Defined, &quot;Implementation Class Name&quot; to Altibase.jdbc.driver.AltibaseConnectionPoolDataSource, and &quot;Name&quot; to Altibase JDBC Provider and proceed to the next step.</p><p><span style="color: rgb(255,0,0);">(In Altibase 6.1.1 and earlier, the user must connect using Altibase.jdbc.driver.ABConnectionPoolDataSource.)</span></p><p>After creating a new JDBC provider, specify the database classpath, which is where the Altibase.jar file is located.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221598.png" data-image-src="attachments/14058343/14221598.png"></p><p>As described in the previous chapter, the Altibase.jar file is located in the ${WAS_INSTALL_ROOT}\universalDriver\lib directory of the server, so specify the location as the classpath.</p><p>Setting up the classpath also completes the JDBC job setting. Check the summary of the JDBC provided that the user set up, and if there is any content to modify, complete it if not.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221599.png" data-image-src="attachments/14058343/14221599.png"></p><h3 id="WebSphereIntegrationGuideforAltibase-DataSourceSettings">Data Source Settings</h3><p>A data source is an object that manages information for accessing Altibase and WebSphere, and the application connects to Altibase through the data source. <span>Select [Resource]&gt; [JDBC]&gt; [Data Source] on the left of the WebSphere menu.</span></p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221600.png" data-image-src="attachments/14058343/14221600.png"></p><p>Set the range as &quot;cell&quot; and create a new data source in the same way as when setting JDBC provider.</p><p><span><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221601.png" data-image-src="attachments/14058343/14221601.png"> </span></p><p><span> </span>Set &quot;Datasource Name&quot; and &quot;JNDI Name&quot;. In this document, the data source name is set to &quot;altitest&quot; and the JNDI name is set to jdbc/altitest. The JNDI name is used when lookup in the test example during the integration test.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221602.png" data-image-src="attachments/14058343/14221602.png"></p><p>After setting the data source name and JNDI name, go to the next step and select the JDBC provider. Select the existing JDBC provider.</p><p>If the user has not created a JDBC provider, the user can create and use a new JDBC provider at this stage.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221603.png" data-image-src="attachments/14058343/14221603.png"></p><p>The data store helper class uses the specified name.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221604.png" data-image-src="attachments/14058343/14221604.png"></p><p>Next comes the part to set the security-related nickname, but since we have not yet set up J2C, we just move on to the next step. After setting up the security alias, the basic tasks for creating the data source are complete. Finally, check and complete the data source setting in the summary step.</p><p>After completing the data source setting, the user can check the created data source as follows, and click the created data source to set the detailed data source.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221605.png" data-image-src="attachments/14058343/14221605.png"></p><p>After clicking the Altitest data source, click [User Defined Properties] from the menu on the next screen to set the detailed data source item.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221606.png" data-image-src="attachments/14058343/14221606.png"></p><p>In [User Defined Properties], items for detailed data source configuration are listed. Among these items, set items required for system setting to the desired values.</p><p>In this document, set only the minimum items necessary to integrate Altibase and WebSphere.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221607.png" data-image-src="attachments/14058343/14221607.png"></p><p>Initially, since the values of the items are not set, refer to the table below to set the values. The setting values in () are example values set in this document.</p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p><strong>Classification</strong></p></td><td class="confluenceTd"><p><strong>Setting Value</strong></p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>databaseName</p></td><td class="confluenceTd"><p>DB name that started Altibase (mydb)</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>serverName</p></td><td class="confluenceTd"><p>Server IP with Altibase installed (192.168.1.35)</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>user</p></td><td class="confluenceTd"><p>User name to connect to Altibase (sys)</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>password</p></td><td class="confluenceTd"><p>Password (manager) to access Altibase</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>portNumber</p></td><td class="confluenceTd"><p>Port number to connect to Altibase (20911)</p></td></tr></tbody></table></div><p>After setting the above items, if the user tests the connection, the following message is displayed. When this message is displayed, the basic connection between Altibase and WebSphere is successful.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221608.png" data-image-src="attachments/14058343/14221608.png"></p><h3 id="WebSphereIntegrationGuideforAltibase-ApplicationRegistrationandSetting">Application Registration and Setting</h3><p>In WebSphere, applications written in EAR and WAR modules can be registered and used. This section describes how to set the WAR module to register with WebSphere and then work with Altibase.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221609.png" data-image-src="attachments/14058343/14221609.png"></p><p>Select [Application]&gt; [New Application] from the left menu of the WebSphere Web Management Console, and click [New Enterprise Application] to register the WAR module.<br /><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221610.png" data-image-src="attachments/14058343/14221610.png"></p><p>Register to WebSphere by specifying the path of the created WAR module.</p><p>Specify the path, in the next step, [Preparing to install the application], select &quot;Fast path&quot; and proceed to the next step.</p><pre class="tw-data-text tw-text-large tw-ta"><span lang="en">In the [Select Installation Options] menu, the user can change the application name or other items, but it is skipped for testing in this document.</span></pre><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221611.png" data-image-src="attachments/14058343/14221611.png"></p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221612.png" data-image-src="attachments/14058343/14221612.png"></p><p>In [Map Module to Server], only one module is currently created, so let's skip it. If multiple modules are created and only a specific module is mapped to the server, select the specific module and click the &quot;Apply&quot; button.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221613.png" data-image-src="attachments/14058343/14221613.png"></p><p>Select &quot;default_host&quot; for the virtual host mapping and proceed to the next step.</p><p>The context root mapping is a step of specifying the root of the WAR module currently being set. If the user specifies the desired context root, the application can be executed with &quot;Context Root Name/jsp File Name&quot; regardless of the WARD module name.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221614.png" data-image-src="attachments/14058343/14221614.png"></p><p>After mapping the context root and completing it, WebSphere automatically sets and installs the application. When the installation is complete, click [Save] to save the setting to the master.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221615.png" data-image-src="attachments/14058343/14221615.png"></p><p>When stored in the master, the setting and installation of the application to be used are completed. However, since the application is currently installed only, the user needs to change the application status to &quot;start&quot; directly.</p><pre class="tw-data-text tw-text-large tw-ta"><span lang="en">If the user selects [Application]&gt; [Application Type]&gt; [WebSphere Enterprise Application] on the left of the WebSphere Web Management Console menu, the user can check the application installed by WebSphere.</span></pre><div class="jhH5U"><div class="tw-src-ltr"><div class="oSioSc"><div><div class="tw-menu"><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221616.png" data-image-src="attachments/14058343/14221616.png"></div><div class="tw-menu"><p>When the user starts the application by clicking the &quot;Start&quot; button, the following message is displayed.<br />Once the application has started, run a web browser to test it.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221617.png" data-image-src="attachments/14058343/14221617.png"></p></div></div></div></div><h3 id="WebSphereIntegrationGuideforAltibase-IntegrationTest">Integration Test</h3><p>Altibase and WebSphere integration tests use the altitest.war module used in the above section.</p><p>Create a WAR module in Eclipse using the test example below, and install it in WebSphere to test it.</p><ul><li>Creating Test.jsp<br />Create and test the following test example as a jsp file.<br /><br /></li></ul><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">&lt;%@ page import=&quot;javax.naming.*&quot; %&gt;
 &lt;%@ page import=&quot;java.sql.*&quot; %&gt;
 &lt;%@ page import=&quot;javax.sql.*&quot; %&gt;
 &lt;%
 Connection con=null;
 Statement st=null;
 ResultSet rs=null;
 try
 {
 InitialContext ctx = new InitialContext();
 DataSource ds = (DataSource)ctx.lookup(&quot;jdbc/altitest&quot;);
 con=ds.getConnection();
 st=con.createStatement();
 rs=st.executeQuery(&quot;select * from dual&quot;);
 while(rs.next())
 {
 //Thread.sleep(100000);
 out.println(&quot;TABLE_NAME :&quot; + rs.getString(1)+&quot;&lt;br&gt;&quot;);
 }
 }
 catch(Exception e)
 {
 out.println(&quot;Error:&quot; + e.getMessage());
 e.printStackTrace();
 }
 finally
 {
 if(rs!=null)rs.close();
 if(st!=null)st.close();
 if(con!=null)con.close();
 }
 %&gt;</pre>
</div></div><p style="margin-left: 30.0px;">Creating WAR module<br />The WAR module used in the test was created using Eclipse.<br />Run Eclipse and select [File]&gt; [New]&gt; [Project] and then select [Web]&gt; &quot;Dynamic Web Project&quot; in the following wizard to set the project name.</p><p style="margin-left: 30.0px;"><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221618.png" data-image-src="attachments/14058343/14221618.png"></p><p style="margin-left: 30.0px;">When the project is created as the following, create the above sample example as a JSP file and add it under the &quot;WebContent&quot; directory.</p><p style="margin-left: 30.0px;">Add Altibase.jar file to Lib folder.</p><p style="margin-left: 30.0px;"><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221619.png" data-image-src="attachments/14058343/14221619.png"></p><p>After adding the JSP file and Altibase.jar file, select [File]&gt; [Export], and select [Web]&gt; &quot;War file&quot; to specify the path to be created, and the WAR module is created.</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221620.png" data-image-src="attachments/14058343/14221620.png"></p><p>After creating the WAR module, install it in WebSphere as did in the previous section.</p><p>After the installation of the WAR module is completed, change the status to Start and run the web browser as follows.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">http://serverIP:applicaitonserviceport/contextrootname/JSPfilename</pre>
</div></div><p>The server IP is the IP address of the server where WebSphere is installed, the application service port is the application service port checked when setting the JDBC provider (by default, port 9080). The context root name is the context root name specified when registering the application and enters the JSP file name included in the War module.</p></div><p>The execution statement in the test is as follows.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">http://127.0.0.1:9080/altiweb/test.jsp</pre>
</div></div><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221621.png" data-image-src="attachments/14058343/14221621.png"></p><h2 id="WebSphereIntegrationGuideforAltibase-FailOverConfiguration"><span style="color: rgb(0,0,0);">FailOver Configuration</span></h2><p>This chapter describes how to integrate with WebSphere by using the FailOver function provided by Altibase.</p><h3 id="WebSphereIntegrationGuideforAltibase-FailOver">FailOver</h3><p>WebSphere does not provide FailOver functionality. However, since FailOver function is provided starting from Altibase Version 5.3.3, so FailOver can be implemented using Altibase's FailOver function.</p><p>The syntax is as follows.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">jdbc:Altibase://ServerIP:DBportnumber/DBname?AlternateServers=(ServerIP:DBportnumber)&amp;ConnectionRetryCount=3&amp; ConnectionRetryDelay=3&amp;SessionFailOver=off</pre>
</div></div><h3 id="WebSphereIntegrationGuideforAltibase-FailOverRelatedProperties">FailOver Related Properties</h3><p>FailOver related properties are as follows.</p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><td class="confluenceTd"> </td><td class="confluenceTd"><p><strong>Property</strong></p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>AlternateServer</p></td><td class="confluenceTd"><p>Indicates the available servers to be connected when a failure occurs (IP Address1: Port1, IP Address2: Port2, ...) and describes them.</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>ConnectionRetryCount</p></td><td class="confluenceTd"><p>If there is a failure to connect to the available server, the number of attempts to connect is repeated.</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>ConnectionRetryDelay</p></td><td class="confluenceTd"><p>Time to wait before attempting to connect again when the available server connection fails.</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p>SessionFailOver</p></td><td class="confluenceTd"><p>Indicates whether to perform STF (Service Time Fail-Over)<br class="atl-forced-newline" />on : STF, off : CTF<br class="atl-forced-newline" />CTF (Connection Time FailOver) recognizes a failure at the time of DBMS connection and connects to the DBMS of another available node instead of the DBMS where the failure occurred and proceeds with the service.</p><p>STF(Service Time FailOver) is a failure during service because the DBMS is successfully connected, and accessing the DBMS of another available node to restore the properties of the session and then performing the business logic of the user application again. That is, it is necessary to perform the operation performed in the DBMS where the failure occurred once again.</p></td></tr></tbody></table></div><p>For more information about how to implement CTF and STF, please refer to the Altibase FailOver technical document.</p><h3 id="WebSphereIntegrationGuideforAltibase-ApplyingFailOver">Applying FailOver</h3><p>In order to use the FailOver function, the above-mentioned FailOver syntax must be entered in the &quot;url&quot; field when setting the data source as shown below</p><p><img class="confluence-embedded-image" width="500" src="attachments/14058343/14221622.png" data-image-src="attachments/14058343/14221622.png"></p><p>After setting the data source, write the following test example as a WAR module, and test it in WebSphere.</p><p>When testing is performed, the time of the local DB is displayed on the screen, and when the user randomly terminates the local DB, FailOver to the alternate DB (AlternateServer) to display the time of the alternative DB on the screen.</p><ul><li>Test.jsp</li></ul><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">&lt;%@ page import=&quot;java.sql.*&quot;%&gt;
 &lt;%
 javax.sql.DataSource ds = null;
 javax.naming.InitialContext ctx=null;
  
 ctx = new javax.naming.InitialContext();
 ds = (javax.sql.DataSource)ctx.lookup(&quot;jdbc/Altibase&quot;);
 Connection conn = ds.getConnection();
  
 DatabaseMetaData dmd = conn.getMetaData();
  
 String query = &quot;select to_char(sysdate,&#39;yyyy/mm/dd hh24:mi:ss&#39;) from dual&quot;;
 Statement stmt = null;
 ResultSet rs= null;
  
 for(int i =0;i&lt;1000;i++){
 try{
 stmt = conn.createStatement();
 rs = stmt.executeQuery(query);
 if( rs.next() )
 {
 out.println( &quot;VALUE : &quot; + i+&quot; &quot;+rs.getString(1) + &quot;&lt;br&gt;&quot; );
 out.flush();
 }
 rs.close();
 stmt.close();
 Thread.sleep(1000);
 }catch(SQLException e){
 System.out.println(i+&quot; &quot;+e.getSQLState());
 Thread.sleep(1000);
 //conn = ds.getConnection();
 }
 }
  
 %&gt;</pre>
</div></div></div>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221563.png">image2019-6-21 8_19_13.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221564.png">image2019-6-21 8_29_5.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221565.png">image2019-6-21 8_29_58.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221566.png">image2019-6-21 8_32_33.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221567.png">image2019-6-21 8_33_43.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221569.png">image2019-8-14 11_12_49.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221568.png">image2019-8-14 11_12_49.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221570.png">image2019-8-14 11_14_6.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221571.png">image2019-8-14 11_17_16.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221572.png">image2019-8-14 11_18_28.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221573.png">image2019-8-14 15_51_26.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221574.png">image2019-8-21 14_49_59.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221576.png">image2019-8-21 14_53_19.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221575.png">image2019-8-21 14_53_19.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221577.png">image2019-6-21 8_51_43 (2).png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221578.png">image2019-8-14 15_54_31.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221579.png">image2019-8-14 15_54_52.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221580.png">image2019-8-14 15_56_7.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221581.png">image2019-8-21 14_57_47.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221582.png">image2019-6-21 10_59_6.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221583.png">image2019-8-21 14_59_20.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221584.png">image2019-6-21 10_59_48.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221585.png">image2019-8-21 15_0_55.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221586.png">image2019-6-21 11_1_26.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221587.png">image2019-6-21 11_1_46.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221588.png">image2019-7-1 8_6_8.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221589.png">worddav3a4d162bf51a3b7be75d8000dd65afc2.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221590.png">image2019-7-1 8_8_47.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221591.png">image2019-7-1 8_12_41.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221592.png">image2019-7-2 8_52_26.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221593.png">image2019-8-21 15_5_15.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221594.png">image2019-8-21 15_6_25.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221595.png">image2019-7-1 8_16_17.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221596.png">image2019-8-21 15_11_29.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221597.png">image2019-8-21 15_12_25.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221598.png">image2019-8-21 15_13_53.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221599.png">image2019-7-1 8_28_59.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221600.png">image2019-8-21 15_18_19.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221601.png">image2019-8-21 15_19_0.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221602.png">image2019-8-21 15_19_53.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221603.png">image2019-7-1 8_32_37.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221604.png">image2019-7-1 8_33_14.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221605.png">image2019-8-21 15_21_30.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221606.png">image2019-8-21 15_22_58.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221607.png">image2019-7-2 8_43_58.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221608.png">image2019-8-21 15_23_47.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221609.png">image2019-8-21 15_25_20.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221610.png">image2019-8-21 15_26_40.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221611.png">image2019-7-3 8_12_17.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221612.png">image2019-7-3 8_12_46.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221613.png">image2019-7-3 8_13_38.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221614.png">image2019-8-21 15_28_0.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221615.png">image2019-7-3 8_16_21.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221616.png">image2019-7-3 8_18_9.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221617.png">image2019-7-3 8_18_38.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221618.png">worddav4b3e6b9ea1d09caac1bcac97204633fe.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221619.png">image2019-8-21 15_30_5.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221620.png">worddav1321a12960b76cdfee1691fb8110edca.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221621.png">image2019-7-3 8_20_43.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/14058343/14221622.png">image2019-11-4 13_33_10.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:49</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
