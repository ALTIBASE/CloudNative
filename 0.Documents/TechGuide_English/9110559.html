<!DOCTYPE html>
<html>
    <head>
        <title>Technical Documents(English) : Configuration Guide For Minimizing Disk I/O Contention</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Technical Documents(English)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_557064.html">Home</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Technical Documents(English) : Configuration Guide For Minimizing Disk I/O Contention
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> hanna choi</span>, last modified on Dec 22, 2015
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><strong style="line-height: 1.25;"><style type='text/css'>/*<![CDATA[*/
div.rbtoc1624409353213 {padding: 0px;}
div.rbtoc1624409353213 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1624409353213 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1624409353213'>
<ul class='toc-indentation'>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-Overview'>Overview</a></li>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-WhatCausesDiskI/O'>What Causes Disk I/O</a>
<ul class='toc-indentation'>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-RedoLog'>Redo Log</a></li>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-CheckPoint'>Check Point </a></li>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-On-DiskDB'>On-Disk DB </a></li>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-UndoTableSpace'>Undo TableSpace </a></li>
</ul>
</li>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-RecommendationsforEffectiveDataFileConfiguration'>Recommendations for Effective Data File Configuration</a>
<ul class='toc-indentation'>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-DiskI/O'>Disk I/O  </a></li>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-ConfigurationExample'>Configuration Example </a>
<ul class='toc-indentation'>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-Example1.'>Example 1.</a></li>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-Example2.'>Example 2.</a></li>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-Example3.'>Example 3.</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#ConfigurationGuideForMinimizingDiskI/OContention-RelatedDocuments:'>Related Documents : </a></li>
</ul>
</div><br /></strong></p><h1 id="ConfigurationGuideForMinimizingDiskI/OContention-Overview"><strong style="line-height: 1.25;">Overview</strong></h1><hr /><p class="0cm">When a database handles a transaction, it generally records a redo log using WAL (Write Ahead Logging) for recovery purposes. Changing, saving or deleting data is the general process of handling the transaction after recording the redo log. Both redo logs and data require persistent physical storage space. This physical storage can be allocated either to the same disk or to physically distinct disks. </p><p class="0cm">However, the user should note that significant disk I/O contention may occur if redo logs and data are placed on the same disk while processing numerous transactions.</p><p class="0cm">This guide describes how ALTIBASE HDB writes redo logs and data and how to configure disk volumes to minimize disk I/O contention. </p><p class="0cm">This guide is up to date as of ALTIBASE HDB version 6.5.</p><h1 class="0cm" id="ConfigurationGuideForMinimizingDiskI/OContention-WhatCausesDiskI/O"><strong><span style="line-height: 1.25;">What Causes Disk I/O</span></strong></h1><hr /><h2 id="ConfigurationGuideForMinimizingDiskI/OContention-RedoLog">Redo Log</h2><p>ALTIBASE HDB’s redo logs record all changes that were made by any transactions. Redo logs are crucial for the purpose of data recovery. </p><p>Redo logs contain information about any changes made to data, as well as changes made to any resources required to handle transactions.</p><p>ALTIBASE HDB’s redo logs are initially recorded in the memory mapping area by mmap and are then periodically saved into the redo log file by LogSyncThread. The history of changes in the memory mapping area is guaranteed to be saved into a file even if an executed process terminates abnormally.Therefore, the log file cannot be lost except in the case of power failure or an OS hang (<em>if this issue is encountered, please refer to the ALTIBASE Troubleshooting Guide</em>).</p><p>This method is used by default in order to minimize frequent disk I/O and maximize performance. However, the redo log writing method can be changed if high transaction performance is not required.</p><p> </p><h2 style="text-align: justify;" id="ConfigurationGuideForMinimizingDiskI/OContention-CheckPoint"><a name="_Toc311725272" rel="nofollow"></a>Check Point </h2><p>As a hybrid database, ALTIBASE HDB provides support for both in-memory tables and disk tables. In this section, activities that incur disk I/O for memory tables will be discussed.</p><p>During the startup stage, data contained within memory tables must be loaded from disk. The storage space for in-memory data is managed as pages, and each page has a fixed size of 32K. Each page is divided into <em>n</em> slots based on the table record size, and each slot records data. </p><p>When data is changed, saved or deleted by a transaction, the page that stored the modified data is registered to the list of dirty pages. This process is managed internally. The process of saving these dirty pages to physical storage on disk is referred to as a checkpoint.</p><p>Due to the fact that memory is a volatile storage medium, the checkpoint process is necessary to provide data durability in the case of situations such as power failures. </p><p>As the number of transactions being processed by in-memory tables increases, the number of dirty pages that must be flushed to disk by the checkpoint process will increase as well. If redo logs and in-memory table datafiles are located on the same physical disk, this load may cause disk I/O contention. In order to avoid any possible performance degradation, it is highly recommended to store redo logs and datafiles on separate physical disks.  </p><p style="margin-left: 30.0px;">For example:</p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Classification</strong></p></th><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Disk Configuration</strong></p></th></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Redo Logs</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_REDO_LOG</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_DATA</p></td></tr></tbody></table></div><p style="margin-left: 30.0px;"> </p><h2 id="ConfigurationGuideForMinimizingDiskI/OContention-On-DiskDB"><a name="_Toc311725273" rel="nofollow"></a>On-Disk DB </h2><p>In the previous section, we discussed the process of storing redo logs and causes for disk I/O for in-memory tables. This section will describe causes for disk I/O for disk tables, as well as configuration recommendations.</p><p>Because disk tables keep all data on a disk file, disk queries must access the physical disk every time a transaction is executed. This is extremely costly from a disk I/O perspective.  Therefore, virtually every disk DBMS creates and utilizes a temporary memory storage area commonly referred to as a buffer. By storing frequently used data in the buffer area, disk I/O costs can be reduced significantly.</p><p>The size of the memory buffer is determined by the user and has a page size of 8K.</p><p>When a query is executed against a disk table, ALTIBASE HDB will initially search the buffer area to determine if it contains the requested data. If the data does not exist in the buffer, ALTIBASE HDB will load the data from the physical datafile. Any modified pages will be registered to the Flush List. When a flush occurs, any of the pages registered to this list will be transferred and stored on disk. If the buffer area lacks sufficient space, the LRU algorithm will identify and transfer rarely accessed pages to disk. This process is also referred to as BufferReplace.</p><p>If the datafiles for in-memory tablespaces and disk tablespaces are allocated to the same physical disks, performance may degrade if frequent checkpoints and BufferReplaces cause excessive disk I/O.</p><p>Therefore, for maximum performance the user should always allocate memory and disk datafiles to separate physical disks. </p><p style="margin-left: 30.0px;">For example:</p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Classification</strong></p></th><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Disk configuration</strong></p></th></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Redo Logs</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_REDO_LOG</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Memory Table Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_MEMORY_DATA</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Disk Table Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_DISK_DATA</p></td></tr></tbody></table></div><p> </p><h2 style="text-align: justify;" id="ConfigurationGuideForMinimizingDiskI/OContention-UndoTableSpace"><a name="_Toc311725274" rel="nofollow"></a>Undo TableSpace </h2><p>When a transaction modifies data, memory tables manage an undo image in memory for recovery purposes. The original data is copied to a separate area, and an out-place update is made to the replicated data. This method is also known as MVCC. </p><p>In contrast, disk tables copy the original data to the undo tablespace. The transaction then modifies the data located in the original location. This method is known as an in-place update.</p><p>For recovery, the copy of the original data will be copied back into the undo tablespace. However, it is important to note that the undo tablespace is being constantly updated as disk tables continue to process transactions. Therefore, the user should consider placing disk table datafiles and undo tablespace datafiles on separate physical disks to prevent disk I/O related performance issues.</p><p style="margin-left: 30.0px;">For example:</p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Classification</strong></p></th><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Disk Configuration</strong></p></th></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Redo Logs</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_REDO_LOG</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Memory Table Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_MEMORY_DATA</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Disk Table Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_DISK_DATA</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Undo Tablespace Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_DISK_UNDO</p></td></tr></tbody></table></div><p> </p><h1 class="0cm" style="text-align: justify;" id="ConfigurationGuideForMinimizingDiskI/OContention-RecommendationsforEffectiveDataFileConfiguration"><strong>Recommendations for Effective Data File Configuration</strong></h1><hr /><p>As described in the previous sections, significant disk I/O contention may occur if the same physical disk is used to write redo logs and store memory table datafiles and disk table datafiles.</p><p class="0cm" style="text-align: justify;">This issue becomes most apparent when the system is under significant load. Redo logs, memory table datafiles and disk table datafiles should be placed on separate physical disks to reduce the chance of disk I/O related performance degradation.</p><p class="0cm" style="text-align: justify;"> </p><h2 id="ConfigurationGuideForMinimizingDiskI/OContention-DiskI/O"><a name="_Toc311725276" rel="nofollow"></a>Disk I/O <span style="color: rgb(51,51,51);"> </span></h2><p>As depicted visually above, avoiding disk bottlenecks is difficult if redo log writing, checkpointing and buffer management all occur on a single disk.  </p><p class="0cm" style="margin-left: 30.0px;text-align: justify;"><img class="confluence-embedded-image" width="400" src="attachments/9110559/9404443.jpg" data-image-src="attachments/9110559/9404443.jpg"></p><p class="0cm" style="margin-left: 30.0px;text-align: justify;"> </p><h2 class="0cm" style="text-align: justify;" id="ConfigurationGuideForMinimizingDiskI/OContention-ConfigurationExample">Configuration Example </h2><h3 id="ConfigurationGuideForMinimizingDiskI/OContention-Example1."><strong>Example 1.</strong></h3><p>Adhering to the configuration below is highly recommended. If this configuration is not feasible due to your current system environment, at a bare minimum the redo logs should be segregated onto a separate physical disk. </p><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Classification</strong></p></th><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Disk Configuration</strong></p></th></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">ALTIBASE HOME</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Redo Logs</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_REDO_LOG</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Memory Table Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_MEMORY_DATA</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Disk Table Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_DISK_DATA</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Disk Indexes</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_DISK_INDEX</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Undo Tablespace Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_DISK_UNDO</p></td></tr></tbody></table></div><ul><li style="list-style-type: none;background-image: none;"><ul><li>ALTIBASE_HOME is not only reserved for binary, header, library and other files for development and operation. ALTIBASE_HOME also saves critical trace files and should be allocated its own physical disk for maximum performance. </li></ul></li></ul><ul><li style="list-style-type: none;background-image: none;"><ul><li>There is no need to allocate a separate physical disk for memory indexes, because indexes are reorganized in memory after they are loaded during ALTIBASE HDB’s STARTUP phase. Changing memory indexes does not require a separate login.</li></ul></li></ul><ul><li style="list-style-type: none;background-image: none;"><ul><li>Separating disk table datafiles and disk indexes onto separate physical disks is recommended for the purpose of minimizing disk I/O contention that may occur from changes such as datafile expansion.</li></ul></li></ul><ul><li style="list-style-type: none;background-image: none;"><ul><li>This document does not describe disk I/O considerations related to backup procedures. Please refer to the Backup/Recovery document for more information.</li></ul></li></ul><p> </p><h3 id="ConfigurationGuideForMinimizingDiskI/OContention-Example2."><strong>Example 2.</strong></h3><p style="margin-left: 30.0px;">If physical disk availability is limited, the following configuration is recommended as a bare minimum.</p><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Classification</strong></p></th><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Disk Configuration</strong></p></th></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Redo Logs</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_REDO_LOG</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">ALTIBASE HOME and All Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE</p></td></tr></tbody></table></div><p style="margin-left: 30.0px;">This configuration is also plausible if ALTIBASE HDB’s hybrid functionality is not utilized. When using only memory tables or only disk tables, the risk of disk I/O contention is minimized.  </p><p class="0cm" style="margin-left: 90.0px;text-align: justify;"> </p><h3 id="ConfigurationGuideForMinimizingDiskI/OContention-Example3.">Example 3.</h3><p style="margin-left: 30.0px;">If memory tables are used sparsely and the vast majority of data and processing is performed by disk tables, the following configuration can be considered. </p><p style="margin-left: 30.0px;"> </p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Classification</strong></p></th><th class="confluenceTh"><p style="margin-left: 30.0px;"><strong>Disk Configuration</strong></p></th></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Redo Logs</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_REDO_LOG</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">ALTIBASE HOME and Memory Table Datafiles</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Disk Table Datafiles 1 (Complex Tasks)</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_DISK_COMPLEX</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p style="margin-left: 30.0px;">Disk Table Datafiles 2 (Simple Tasks)</p></td><td class="confluenceTd"><p style="margin-left: 30.0px;">/ALTIBASE_DISK_SIMPLE</p></td></tr></tbody></table></div><p style="margin-left: 30.0px;">Placing tablespaces that regularly process complex queries and tablespaces that typically process simple queries on separate physical volumes is an effective method of dispersing disk I/O. However, if the environment frequently executes BufferReplace processes, this configuration may suffer from performance degradation.  </p><p class="0cm" style="margin-left: 120.0px;text-align: justify;"> </p><h1 id="ConfigurationGuideForMinimizingDiskI/OContention-RelatedDocuments:">Related Documents : </h1><ul><li><a href="Storage-Guide_9110563.html">Storage Guide</a></li></ul><p> </p><hr /><p>Copyright ⓒ 2000~2015 ALTIBASE Corporation. All Rights Reserved.</p><p class="0cm">These documents are for informational purposes only. These information contained herein is not warranted to be error-free and is subject to change without notice. Decisions pertaining to ALTIBASE HDB’s product characteristics, features and development roadmap are at the sole discretion of Altibase. Altibase may own related patents, trademarks, copyright or other intellectual property rights of products and/or features discussed in this document.</p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9110559/9404442.jpg">1. direct IO.JPG</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9110559/9404443.jpg">1. disk IO.JPG</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:49</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
