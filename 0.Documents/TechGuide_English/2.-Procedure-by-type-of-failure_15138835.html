<!DOCTYPE html>
<html>
    <head>
        <title>Technical Documents(English) : 2. Procedure by type of failure</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Technical Documents(English)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_557064.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Responding-to-Failures-Guide-for-Altibase_15138818.html">Responding to Failures Guide for Altibase</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Technical Documents(English) : 2. Procedure by type of failure
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> richard.nahm	</span>, last modified on Feb 22, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="id-2.Procedurebytypeoffailure-/*&lt;![CDATA[*/div.rbtoc1624409364936{padding:0px;}div.rbtoc1624409364936ul{list-style:disc;margin-left:0px;}div.rbtoc1624409364936li{margin-left:0px;padding-left:0px;}/*]]&gt;*/ConnectionFailure#id-2.Procedurebytypeoffailure-Conn"><style type='text/css'>/*<![CDATA[*/
div.rbtoc1624409364936 {padding: 0px;}
div.rbtoc1624409364936 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1624409364936 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1624409364936'>
<ul class='toc-indentation'>
<li><a href='#id-2.Procedurebytypeoffailure-ConnectionFailure'>Connection Failure</a></li>
<li><a href='#id-2.Procedurebytypeoffailure-Failureduetoinsufficientresources'>Failure due to insufficient resources</a>
<ul class='toc-indentation'>
<li><a href='#id-2.Procedurebytypeoffailure-Insufficienttablespace'>Insufficient tablespace</a></li>
<li><a href='#id-2.Procedurebytypeoffailure-Insufficientphysicaldiskspace'>Insufficient physical disk space</a></li>
<li><a href='#id-2.Procedurebytypeoffailure-Insufficientphysicalmemoryspace'>Insufficient physical memory space</a></li>
<li><a href='#id-2.Procedurebytypeoffailure-Impactofperformingbulkchangeoperationorlong-runningqueries'>Impact of performing bulk change operation or long-running queries</a></li>
</ul>
</li>
<li><a href='#id-2.Procedurebytypeoffailure-Failureduetosystemproblems'>Failure due to system problems</a></li>
<li><a href='#id-2.Procedurebytypeoffailure-ReplicationFailure'>Replication Failure</a></li>
</ul>
</div></h1><hr /><h1 id="id-2.Procedurebytypeoffailure-ConnectionFailure">Connection Failure</h1><hr /><p>There may be a case when the DB cannot be accessed while the server or Altibase process is running normally. There can be five types of situations like this:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr style="margin-left: 30.0px;"><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Type<br /></strong></p></td><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><strong>Description</strong><p> </p></td></tr><tr><td rowspan="3" class="confluenceTd"><p>User account restrictions</p></td><td class="confluenceTd"><p>The following types of error logs can be recorded in $ALTIBASE_HOME/altibase_boot.log when a connection exceeding the number of file descriptors is attempted during the setup of the user account.</p></td></tr><tr><td class="confluenceTd"><p>ERR-01052(errno=24) Unable to invoke open() function on [~~~]</p></td></tr><tr><td class="confluenceTd"><p>ERR-71016(errno=24) Failed to invoke a system function, accept() Dispatcher failed callback</p></td></tr><tr><td class="confluenceTd"><p>Altibase Hang status</p></td><td class="confluenceTd"><p>This refers to a case in which connection is disabled due to a system or Altibase problem, and there is no DB access or response, or no new access.                      </p></td></tr><tr><td rowspan="6" class="confluenceTd"><p>Error in connection attempt</p></td><td class="confluenceTd"><p>There may be cases in which the IP/Port number/Password of the server attempting to connect is incorrectly entered, and the lock status and TCP connection restrictions are set according to the password management policy.</p></td></tr><tr><td class="confluenceTd"><p>ERR-50032 : Client unable to establish a connection.</p></td></tr><tr><td class="confluenceTd"><p>ERR-31010 : User not found</p></td></tr><tr><td class="confluenceTd"><p>ERR-4102E : Invalid password</p></td></tr><tr><td colspan="1" class="confluenceTd">ERR-31370 : The account is locked.</td></tr><tr><td colspan="1" class="confluenceTd">ERR-410E3 : The user cannot connect using TCP.</td></tr><tr><td class="confluenceTd"><p>Network failure</p></td><td class="confluenceTd">In case of problems with LAN card or network settings<p> </p></td></tr><tr><td rowspan="3" class="confluenceTd"><p>Insufficient disk space</p></td><td class="confluenceTd"><p>Cannot be used due to insufficient disk space</p></td></tr><tr><td class="confluenceTd"><p>ERR-01052(errno=24) Unable to invoke open() function on [~~~]</p></td></tr><tr><td class="confluenceTd"><p>ERR-01052(errno=24) Unable to invoke write() function on [~~~]</p></td></tr></tbody></table></div><p> </p><p>Among the five types described above, the following four are user or hardware failures. First, check the following items.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr style="margin-left: 30.0px;"><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Type</strong></p></td><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><strong>Checklist</strong><p> </p></td></tr><tr><td class="confluenceTd"><p>User account restrictions</p></td><td class="confluenceTd"><p>The user account restrictions can be resolved by checking the result of limit -n, increasing this value, and restarting Altibase.</p><p>Generally, it is recommended to set the file descriptor value to unlimited, and it should be set to at least 4096.</p><p> </p></td></tr><tr><td class="confluenceTd"><p>Error in connection attempt</p></td><td class="confluenceTd"><p>If there is an error in the connection attempt, the configuration part must be checked in which the connection is attempted.</p><p>Check whether the entered use account and password or the IP address to connect are entered incorrectly, and whether a value different from PORT_NO set in $ALTIBASE/conf/altibase.properties is not attempted.</p><p> </p></td></tr><tr><td class="confluenceTd"><p>Network failure</p></td><td class="confluenceTd">It is necessary to first check whether pack errors occur with netstat, and to check whether normal ftp/telnet connection from other devices to the drive where Altibase is installed is possible, and that there is no significant performance degradation in packet transmission and reception.<p> </p></td></tr><tr><td class="confluenceTd"><p>Insufficient disk space</p></td><td class="confluenceTd"><p>Check the disk usage by using a command such as df (bdf), and then replenish insufficient disk space.</p><div class="aui-message problem shadowed information-macro"><p class="title">Caution:</p><span class="aui-icon icon-problem">Icon</span><div class="message-content"><p>At this time, be cautious not to delete the online log file of Altibase. If online log files are deleted arbitrarily, the DB cannot be recovered.</p></div></div></td></tr></tbody></table></div><p><br />The situation in which the system or Altibase Hang is questionable means that the Altibase process normally exists, but the connection attempt fails and there is no response to the previously connected DB session.</p><p>In this case, immediately collect the following information and request technical support from Altibase.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr style="margin-left: 30.0px;"><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>OS                                          <br /></strong></p></td><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Hang information acquisition method                                                                                                                                                                    <br /></strong></p></td></tr><tr><td class="confluenceTd"><p>SUN</p></td><td class="confluenceTd"><p>/usr/sbin/pstack –F process_id &gt; 1.txt<br class="atl-forced-newline" />/usr/sbin/pstack –F process_id &gt; 2.txt<br class="atl-forced-newline" />/usr/sbin/pstack –F process_id &gt; 3.txt<br class="atl-forced-newline" />Execute each of the above commands in order at 30-second intervals.</p></td></tr><tr><td class="confluenceTd"><p>HP</p></td><td class="confluenceTd"><p>This is not supported by PA_RISC, but IA series execute as follows.<br class="atl-forced-newline" />/usr/ccs/bin/pstack process_id &gt; 1.txt<br class="atl-forced-newline" />/usr/ccs/bin/pstack process_id &gt; 2.txt<br class="atl-forced-newline" />/usr/ccs/bin/pstack process_id &gt; 3.txt<br class="atl-forced-newline" />Execute each of the above commands in order at 30-second intervals.</p></td></tr><tr><td class="confluenceTd"><p>AIX</p></td><td class="confluenceTd"><p>/usr/bin/procstack –F process_id &gt; 1.txt<br class="atl-forced-newline" />/usr/bin/procstack –F process_id &gt; 2.txt<br class="atl-forced-newline" />/usr/bin/procstack –F process_id &gt; 3.txt<br class="atl-forced-newline" />Execute each of the above commands in order to 30-second intervals.</p></td></tr><tr><td class="confluenceTd"><p>Linux</p></td><td class="confluenceTd"><p>If the kernel version is low, the command may not exist.<br class="atl-forced-newline" />/usr/bin/pstack process_id &gt; 1.txt<br class="atl-forced-newline" />/usr/bin/pstack process_id &gt; 2.txt<br class="atl-forced-newline" />/usr/bin/pstack process_id &gt; 3.txt<br class="atl-forced-newline" /><span>Execute each of the above commands in order to 30-second intervals.</span></p></td></tr></tbody></table></div><p>Commands such as pstack show what status all threads of the process with specified process-id are currently in. Therefore, this can be used as important information to solve the problem.</p><p>(Similar to urgent failure, the system log and the Altibase trace log should be sent together.)</p><h1 id="id-2.Procedurebytypeoffailure-Failureduetoinsufficientresources"><strong>Failure due to insufficient resources</strong></h1><hr /><p>Resources include all of the logical space used by Altibase from physical memory/disk space. This section describes how to respond to each situation that may occur during the operation.</p><h2 id="id-2.Procedurebytypeoffailure-Insufficienttablespace"><strong>Insufficient tablespace</strong></h2><hr /><div class="table-wrap"><table class="confluenceTable"><tbody><tr style="margin-left: 30.0px;"><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Type</strong></p></td><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Diagnostic method</strong></p></td></tr><tr><td class="confluenceTd"><p>Insufficient memory tablespace</p></td><td class="confluenceTd"><p>If the memory tablespace is insufficient, the following error occurs.</p><p>[ERR-110F1 : Unable to extend the tablespace(XXXXX) because the current size of tablespace(4194304K)<br />becomes larger than MAXSIZE(4194304K) of the tablespace.]</p></td></tr><tr><td class="confluenceTd"><p>Insufficient disk tablespace</p></td><td class="confluenceTd"><p>If the disk tablespace is insufficient, the following error occurs.</p><p>[ERR-11123 : The tablespace does not have enough free space ( TBS Name :XXXXX ).]                                               </p></td></tr></tbody></table></div><p><br />Since Altibase supports both memory/disk DB, the user must monitor each usage. If the above error occurs due to unexpected insufficient of tablespace, take the following actions.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr style="margin-left: 30.0px;"><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Type<br /></strong></p></td><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Method</strong></p></td></tr><tr><td class="confluenceTd"><p>Insufficient user memory tablespace</p></td><td class="confluenceTd"><div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">ALTER TABLESPACE [tablespace name] ALTER AUTOEXTEND OFF
;
ALTER TABLESPACE [tablespace name] ALTER AUTOEXTEND ON MAXSIZE 1G
;</pre>
</div></div><p> </p></div><p>Execute the above commands in order.<br />Since the tablespace name is specified when an error message occurs earlier, specify the tablespace name.                    <br />MAXSIZE should be set large than the current MAXSIZE.</p></td></tr><tr><td class="confluenceTd"><p>Insufficient SYS_TBS_MEM_DATA/SYS_TBS_MEM_DIC tablespace</p><p>or</p><p>If it cannot be resolved with the ALTER TABLESPACE command.</p></td><td class="confluenceTd"><p>If the above error occurs in the SYS_TBS_MEM_DATA/SYS_TBS_MEM_DIC tablespace, it cannot be solved with the above method.<br />In addition, it cannot be resolved when the total amount of all memory tablespaces has already exceeded the MEM_MAX_DB_SIZE value.<br class="atl-forced-newline" />In this case, after cleaning up unnecessary table data in the tablespace, execute the compact command, or if this method does not work, increase the MEM_MAX_DB_SIZE value in the $ALTIBASE_HOME/conf/altibase.properties file and then restart ALTIBASE.</p><div><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">DELETE FROM [table name]
;
TRUNCATE TABLE [table name]
;
ALTER TABLE [table name] COMPACT
;</pre>
</div></div></div></td></tr><tr><td class="confluenceTd"><p>Insufficient disk tablespace</p></td><td class="confluenceTd"><div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">ALTER TABLESPACE [tablespace name] ADD DATAFILE &#39;abcd.dbf&#39; SIZE 1G AUTOEXTEND OFF
;</pre>
</div></div><p> </p></div><p>Since the tablespace name is specified when an error message displays earlier, specify the tablespace name.<br />The name of the data file is designated by the user according to the naming rule, and the size is appropriately designated by referring to the size of another data file using the same tablespace.                      </p></td></tr></tbody></table></div><p>The correct method for an error due to insufficient tablespace is an urgent method, and it is necessary to check if the tablespace suddenly increases for some reason afterward. The user must check the usage of DBMS objects belonging to each tablespace, check the changed details, and remove the cause.</p><p>The usage of each object in the tablespace is described in detail in the &quot;Altibase Monitoring Query Guide&quot;.</p><h2 id="id-2.Procedurebytypeoffailure-Insufficientphysicaldiskspace"><strong>Insufficient physical disk space</strong></h2><hr /><p>If the physical disk is insufficient, the DB status may seem like Hang because online log files that are essential for transaction processing cannot be recorded. In addition, there may not be any error message in the trace log because there are cases in which the Altibase trace log cannot be recorded due to insufficient space. Therefore, the user must periodically monitor the capacity of the physical disk. If a problem occurs, there is no way to do anything other than to free up space on the disk.</p><h2 id="id-2.Procedurebytypeoffailure-Insufficientphysicalmemoryspace"><strong>Insufficient physical memory space</strong></h2><hr /><p>In case of insufficient memory, there is no separate countermeasure during the service. However, it is recommended to periodically collect the following results because the current status must be acquired.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">SET LINESIZE 1000
 
SELECT *
FROM   V$MEMSTAT
ORDER  BY MAX_TOTAL_SIZE DESC
;</pre>
</div></div></td></tr></tbody></table></div><p><br />The above query shows the current usage status of memory resources inside Altibase. With this information, it is possible to compare and analyze which module has a large memory increase with a periodic result log. (Comparison of results of the previous day/same day)</p><h2 id="id-2.Procedurebytypeoffailure-Impactofperformingbulkchangeoperationorlong-runningqueries"><strong>Impact of performing bulk change operation or long-running queries</strong></h2><hr /><p>Altibase supports MVCC. MVCC is a technique that can improve the performance of DBMS itself by preventing waiting between inquiry/change transactions. (For more detailed information, please refer to the &quot;Altibase MVCC &amp; GC Guide&quot;.) According to the implementation of MVCC, there are data to be deleted called Garage Data. If there is a large amount of data to be deleted or queries with a long-running time, the data to be deleted cannot be deleted until the corresponding transaction is completed. As a result, an increase in online log files or an increase in physical memory may occur. Queries with a long-running time that cause this phenomenon can be checked as follows.</p><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">SELECT *
FROM   V$STATEMENT
WHERE  TOTAL_TIME &gt; 100000000
       AND EXECUTE_FLAG = 1
;</pre>
</div></div><p> </p></div><p>This query retrieves queries that are currently being executed and execution time is more than 100 seconds.</p><div><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">SELECT SESSION_ID,
       ID,
       RPAD(QUERY, 150)
FROM   V$STATEMENT
WHERE  TX_ID = (SELECT ID
                FROM   V$TRANSACTION
                WHERE  MEMORY_VIEW_SCN IN (SELECT MINMEMSCNINTXS
                                           FROM   V$MEMGC
                                           LIMIT  1))
;</pre>
</div></div><p> </p></div><p>This query retrieves queries that have been executing for a long time to prevent the processing of the data to be deleted.</p></td></tr></tbody></table></div><p>For more detailed information, please refer to the &quot;Altibase Monitoring Query Guide&quot;.</p><h1 id="id-2.Procedurebytypeoffailure-Failureduetosystemproblems">Failure due to system problems</h1><hr /><p>This section describes the type of error due to insufficient system resources.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr style="margin-left: 30.0px;"><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Error type<br /></strong></p></td><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Description <br /></strong></p></td></tr><tr><td class="confluenceTd"><p>Out of memory</p></td><td class="confluenceTd">Insufficient memory<p> </p></td></tr><tr><td class="confluenceTd"><p>Resource busy</p></td><td class="confluenceTd">Temporary unable to access system resources<p> </p></td></tr><tr><td class="confluenceTd"><p>Too many open files</p></td><td class="confluenceTd">When the limit on the number of files that can be accessed at the same time is exceeded<p> </p></td></tr><tr><td class="confluenceTd"><p>No space left on device</p></td><td class="confluenceTd"><p>Insufficient disk space</p></td></tr></tbody></table></div><p>If the above error types occur as a cause in the Altibase trace log, there are cases where the system error code is also recorded when an error message is recorded. It is also possible to check whether insufficient system resources occur with the corresponding system error code.</p><p>In addition, check the following logs to see if an error has occurred in the system.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr style="margin-left: 30.0px;"><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>OS                                           <br /></strong></p></td><td class="highlight-grey confluenceTd" data-highlight-colour="grey">System log to check<p> </p></td></tr><tr><td class="confluenceTd"><p>SUN</p></td><td class="confluenceTd"><p>/var/adm/message file</p></td></tr><tr><td class="confluenceTd"><p>HP</p></td><td class="confluenceTd"><p>/var/adm/syslog/syslog.log file</p></td></tr><tr><td class="confluenceTd"><p>AIX</p></td><td class="confluenceTd"><p>errpt -a</p></td></tr><tr><td class="confluenceTd"><p>Linux</p></td><td class="confluenceTd"><p>/var/log/message file</p></td></tr></tbody></table></div><h1 id="id-2.Procedurebytypeoffailure-ReplicationFailure">Replication Failure</h1><hr /><p>Altibase provides a data replication method using TCP/IP network for high availability. If there is any delay or other error during the service with replication, take the following actions.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr style="margin-left: 30.0px;"><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Type<br /></strong></p></td><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Description<br /></strong></p></td></tr><tr><td class="confluenceTd"><p>Replication sender/receiver problem</p></td><td class="confluenceTd">Sender/Receiver does not operate normally due to network error or replication setting error<p> </p></td></tr><tr><td class="confluenceTd"><p>Occurrence of data conflict</p></td><td class="confluenceTd"><p>When data cannot be replicated because the data values in the DB between both ends are different</p></td></tr></tbody></table></div><p>Check the following replication Sender/Receiver problems.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr style="margin-left: 30.0px;"><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Type                         <br /></strong></p></td><td class="highlight-grey confluenceTd" data-highlight-colour="grey"><p><strong>Method</strong></p></td></tr><tr><td class="confluenceTd"><p>Existence of Sender                   </p></td><td class="confluenceTd"><div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">SELECT COUNT(*)
FROM   V$REPSENDER
;</pre>
</div></div><p> </p></div><p>If the Sender is running normally, the result of the above query should be displayed as &quot;1&quot; or higher. </p></td></tr><tr><td class="confluenceTd"><p>Existence of Receiver</p></td><td class="confluenceTd"><div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">SELECT COUNT(*)
FROM   V$REPRECEIVER
;</pre>
</div></div><p> </p></div><p>If the Receiver is running normally, the result of the above query should be displayed as &quot;1&quot; or higher.</p><p>(Must exist as many as the number of redundant objects)</p></td></tr></tbody></table></div><p><br />Among the Altibase trace logs, various messages related to replication are recorded in &quot;altibase_rp.log&quot;.</p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p><strong>Message when replication is running normally.</strong></p><p>[Recovery Sender] Replication REP1 Start... at [6030857] (Log of the Server that started replication)                                                                                                          <br class="atl-forced-newline" />[Receiver] Replication REP1 Started ... (Log of the Receiver that received the command to start replication)<br class="atl-forced-newline" /><br class="atl-forced-newline" /><strong>If there is a problem with the Sender's connection attempt (a problem with the network or the other receiver)</strong><br class="atl-forced-newline" />ERR-61012(errno=111) [Sender] Failed to connect to the peer server<br class="atl-forced-newline" /><br class="atl-forced-newline" /><strong><span>When the Receiver is shut down </span></strong><br class="atl-forced-newline" />ERR-6104b(errno=0) [Receiver] REP1 receiver is ended (by thr_exit)<br class="atl-forced-newline" />Receive and process SR<br class="atl-forced-newline" /><strong><span>When the other party normally stopped replication</span></strong><br class="atl-forced-newline" />RECEIVER:REPLICATION STOP MSG arrived!</p></td></tr></tbody></table></div><p>The problem of replication Sender/Receiver should be analyzed whether it was the execution of the user's intended command at the time the error was recorded or due to a network failure. If that status does not change even with repeated replication restart commands, immediately request technical support from Altibase Technical Headquarters.</p><p>The problem that will be caused in the replication Sender/Receiver is that the data to be sent with replication cannot be sent, and data is changed. Therefore, it is necessary to monitor the status of the replication Sender, which is called the replication gap.</p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><td class="confluenceTd"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">SELECT REP_NAME,
       REP_GAP
FROM   V$REPGAP
; 
 
REP_NAME         REP_GAP                                                                                    
------------------------------------------------------------------
REP1             0
1 row selected.</pre>
</div></div></td></tr></tbody></table></div><p>REP_NAME refers to the object name of the replication, and the size from the log record currently being sent by REP_GAP to the last log record that has not been sent yet (default in MB).</p><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p>※ REP_GAP of Altibase version 6.5.1 or lower is as follows.</p><p>Calculate with online log file serial number SN (Sequence Number) and XSN</p><p>REP_GAP(Replicaiton Gap) = [Latest SN of local SERVER]-[Latest XSN of local SERVER]<img class="confluence-embedded-image" width="500" src="attachments/15138835/15335432.png" data-image-src="attachments/15138835/15335432.png"></p></td></tr></tbody></table></div><p>This value is close to zero(0) and shows a continuous changing value. However, if this value increases continuously, it can be estimated that there is a problem in Sender/Receiver, so replication of each server and the network must be checked.</p><p>Data conflict due to replication can be checked in &quot;altibase_rp.log&quot; or &quot;altibase_rp_conflict.log&quot; depending on the configuration.</p><p> </p><div class="table-wrap"><table class="confluenceTable"><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p><strong><span>In case of PK crash due to INSERT DML (Dup Error)</span></strong><br class="atl-forced-newline" />ERR-11058(errno=0) The row already exists in a unique index.                                                                                                                                                    <br class="atl-forced-newline" /><br class="atl-forced-newline" /><strong><span>When data is not on the other side by DELETE DML</span></strong><br class="atl-forced-newline" />ERR-61036(errno=0) [Receiver] err_not found in deleteXlog()<br class="atl-forced-newline" />ERR-61000(errno=0) The received record is not found in the database.<br class="atl-forced-newline" /><br class="atl-forced-newline" /><strong><span>When data is not on the other size by UPDATE DML (Not Found)</span></strong><br class="atl-forced-newline" />ERR-6103a(errno=0) [Receiver] err_not_found in updateXlog()<br class="atl-forced-newline" />ERR-61000(errno=0) The received record is not found in the database.<br class="atl-forced-newline" /><br class="atl-forced-newline" /><strong>when the data is different from the original is sent by UPDATE DML.</strong><br class="atl-forced-newline" />ERR-61035(errno=0) [Receiver] An update conflict encountered.<br class="atl-forced-newline" />ERR-61001(errno=0) A conflict has been occurred while executing the received statement.</p></td></tr></tbody></table></div><p>Except for the type of INSERT, output messages are recorded in the form of two errors each for one error. Additionally, since the SQL statement log is recorded for each type of data conflict by which SQL statement, it can be important information to find the corresponding data. The reason for such a phenomenon occurs is that the original data is incorrect or that the replication server attempts to change data is having the same PK without distinction. Therefore, it is necessary to carefully review the execution form of the application based on the SQL information.</p><p> </p><p> </p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/15138835/15335432.png">replication.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:49</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
