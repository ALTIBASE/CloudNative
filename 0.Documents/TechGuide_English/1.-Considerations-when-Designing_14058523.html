<!DOCTYPE html>
<html>
    <head>
        <title>Technical Documents(English) : 1. Considerations when Designing</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Technical Documents(English)</a></span>
                            </li>
                                                    <li>
                                <span><a href="Home_557064.html">Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Altibase-Development-Guide_14058519.html">Altibase Development Guide</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Technical Documents(English) : 1. Considerations when Designing
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created by <span class='author'> richard.nahm	</span>, last modified on Feb 18, 2021
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1624409360122 {padding: 0px;}
div.rbtoc1624409360122 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1624409360122 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1624409360122'>
<ul class='toc-indentation'>
<li><a href='#id-1.ConsiderationswhenDesigning-Considerationsforreplicationenvironment'>Considerations for replication environment</a>
<ul class='toc-indentation'>
<li><a href='#id-1.ConsiderationswhenDesigning-①ALTIBASEnetwork-basedreplicationmethod'>① ALTIBASE network-based replication method</a></li>
<li><a href='#id-1.ConsiderationswhenDesigning-②Considermeasurestopreventdatainconsistencies'>② Consider measures to prevent data inconsistencies</a></li>
<li><a href='#id-1.ConsiderationswhenDesigning-③Log-basedreplicationmethod'>③ Log-based replication method</a></li>
</ul>
</li>
<li><a href='#id-1.ConsiderationswhenDesigning-Considerationforhighavailability(HA)andbackup'>Consideration for high availability (HA) and backup</a></li>
<li><a href='#id-1.ConsiderationswhenDesigning-Considerationsfordesigningtable'>Considerations for designing table</a>
<ul class='toc-indentation'>
<li><a href='#id-1.ConsiderationswhenDesigning-①Selectthestoragelocationofthetableaccordingtothepurpose'>① Select the storage location of the table according to the purpose</a></li>
<li><a href='#id-1.ConsiderationswhenDesigning-②ConsiderationsforColumntype'>② Considerations for Column type</a></li>
<li><a href='#id-1.ConsiderationswhenDesigning-③Inthecaseofreplication,itmusthaveaprimarykey'>③ In the case of replication, it must have a primary key</a></li>
<li><a href='#id-1.ConsiderationswhenDesigning-④Foreignkeyisnotusedbecauseitdegradestransactionperformance.'>④ Foreign key is not used because it degrades transaction performance.</a></li>
</ul>
</li>
<li><a href='#id-1.ConsiderationswhenDesigning-Limitationofpartitiontable'>Limitation of partition table</a></li>
<li><a href='#id-1.ConsiderationswhenDesigning-'></a></li>
<li><a href='#id-1.ConsiderationswhenDesigning-ConsiderationsforHardwarepreparation'>Considerations for Hardware preparation</a></li>
<li><a href='#id-1.ConsiderationswhenDesigning-NotSupportFeature'>Not Support Feature</a></li>
</ul>
</div></p><hr /><p>This chapter describes things to consider when designing a DB or system using ALTIBASE. It is recommended to consider the following items and refer to the design because not only the impact on the design stage but also on the development stage and the operation stage is significant.</p><h2 id="id-1.ConsiderationswhenDesigning-Considerationsforreplicationenvironment"><strong>Considerations for replication environment</strong></h2><h3 id="id-1.ConsiderationswhenDesigning-①ALTIBASEnetwork-basedreplicationmethod">① ALTIBASE network-based replication method</h3><p>ALTIBASE adopts a replication method of synchronizing data by sending/receiving change transaction logs based on the network. In other words, it is not a usual way to share disk that users commonly aware of. Therefore, it is necessary to design in consideration of the synchronization part due to data transmission delay, which must occur in a network environment.</p><div>There are two replication methods: The lazy method and the Eager method. The Lazy method allows the delay of data transmission, and on the other hand, the Eager method does not allow it. Therefore, the Lazy method is adopted for tasks that allow data transmission delay, and the Eager method is set and operated appropriately for each task if data does not necessarily need to be synchronized.</div><div><p> </p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner"><p><strong>Comparison</strong></p></div></th><th class="confluenceTh"><div class="tablesorter-header-inner"><p><strong>Lazy Method</strong></p></div></th><th class="confluenceTh"><div class="tablesorter-header-inner"><p><strong>Eager Method</strong></p></div></th></tr></thead><tbody><tr><td class="confluenceTd"><p>Performance</p></td><td class="confluenceTd"><p>90% performance level of a single server</p></td><td class="confluenceTd"><p>Performance degradation compared to the Lazy method</p></td></tr><tr><td class="confluenceTd"><p>Synchronization</p></td><td class="confluenceTd"><p>This is a structure that checks only the success of transmission of the changed transaction log to another server, so it is a high performance, but synchronization may be delated.</p></td><td class="confluenceTd"><p>To prevent data inconsistency on another server, performance is rapidly delayed because it is also committed locally on another server, but the synchronization is not delayed.</p></td></tr></tbody></table></div><p> </p></div><div><h3 id="id-1.ConsiderationswhenDesigning-②Considermeasurestopreventdatainconsistencies">② Consider measures to prevent data inconsistencies</h3></div><div>If records with the same primary key are changed to different values at the same time on both servers, the changes to a different record occur in the replication method. In this case, because the user does not want the data inconsistency, the business requirements are sufficiently grasped to place the program so that the change task occurs only on one server within the group consisting of replication or the record with the same PK is changed within the group consisting of duplication. The placement must be done so that this does not happen simultaneously.</div><div>For example, if an L4 switch is used, programs for each task are placed on different servers, and programs accessed from the 192.168.1.X network connect to DBMS Server 1, and programs accessed from 192.168.2.X network are 2, it will be possible to configure the form of performing connection to DBMS server. Alternatively, the user can explicitly specify the IP in the DBMS connection part of the service program.</div><h3 id="id-1.ConsiderationswhenDesigning-③Log-basedreplicationmethod">③ Log-based replication method</h3><p>Altibase replication is a form sending changed log of a transaction occurring on the local server. This means that even if one million statements are changed with one SQL statement, the same is the structure in which a million changed transaction logs are transmitted, not the same for one SQL statement transmitted to a remote server. </p><p>In addition, it is important to refer to the ALTIBASE technical documents &quot;Efficient Replication Configuration Guide&quot; and &quot;Replication Constraints Guide&quot; for major considerations of the replication environment.</p><h2 id="id-1.ConsiderationswhenDesigning-Considerationforhighavailability(HA)andbackup"><strong>Consideration for high availability (HA) and backup</strong></h2><p>Under normal circumstances, when a failure occurs and recovery is performed, replication automatically synchronizes data by sending a transaction log to the other side that has not yet sent to the point of failure. However, due to the nature of the network, it is necessary to consider whether there is a task that cannot perform a fail-over service immediately due to data inconsistency caused by the inability to transmit the change transaction log at the time of failure.</p><p>If the service is available only after the data is synchronized, ALTIBASE provides an offline replicator to reflect the undeferred data. However, there is a limitation that it can be used only when the disk of the failed server is accessible. (In order to use this function, it is recommended to build a shared disk device.)</p><p>If it is not an environment where the off-line replicator can be used, it is necessary to establish a HA policy that accumulates raw-data at the point of failure in the program and reflects it on the normal server as much as necessary. For example, in the case of securities companies, all data going to the world is managed by unique numbers. Since these numbers are the same in the external system and the DBs, in some cases, a business logic that reflects only the portion of the difference between the external system and the DB system in the normal server is used.</p><p>In addition to HA, it is necessary to establish a backup policy for data file damage caused by physical disk failure and failure caused by transaction log file corruption. The Altibase backup method provides both full and incremental backup methods using the archive mode.</p><p>Therefore, at the time of backup, the user (1) cold backup of all necessary files while offline, (2) full backup of database or tablespace units while online, (3) database or tablespace units when online. The user must choose one of the incremental backup methods.</p><p>The backup method should be one of the following types.</p><div class="table-wrap"><table class="confluenceTable"><thead><tr><th class="confluenceTh"><div class="tablesorter-header-inner"><p>Method</p></div></th><th class="confluenceTh"><div class="tablesorter-header-inner"><p>Description</p></div></th></tr></thead><tbody><tr><td class="confluenceTd"><p>iLoader Backup</p></td><td class="confluenceTd">Only snapshots of records are stored for each major table. Only data at the time of backup by iLoader is backed up<p> </p></td></tr><tr><td class="confluenceTd"><p>Archive Full Backup</p></td><td class="confluenceTd">Because the entire database image including transaction log files is backed up at the time of backup, recovery is possible to the point where there is no damage to the files.<p> </p></td></tr><tr><td class="confluenceTd"><p>Archive Incremental Backup</p></td><td class="confluenceTd"><p>A full backup is performed once at the beginning, and only the changed image is backed up from the next time. Transaction log files are also backed up, so recovery is possible until there is no damage to the files. The more incremental backups, the longer it takes to recover, so a review is needed.</p></td></tr><tr><td class="confluenceTd"><p>Cold Backup</p></td><td class="confluenceTd"><p>After the ALTIBASe process is executed, all necessary files are copied and stored, and the recovery is possible only up to the point of copying the files.</p></td></tr></tbody></table></div><p>For the backup, please refer to &quot;Consideration for ALTIBASE Backup Policy Decision&quot;.</p><h2 id="id-1.ConsiderationswhenDesigning-Considerationsfordesigningtable"><strong>Considerations for designing table</strong></h2><h3 id="id-1.ConsiderationswhenDesigning-①Selectthestoragelocationofthetableaccordingtothepurpose">① Select the storage location of the table according to the purpose</h3><p>ALTIBASE supports both memory and disk tablespaces. The user should select which tables to place in the memory tablespace for tasks that require fast processing performance. That is, it is necessary to create a list of tables for each purpose to be located in the memory/disk tablespace.</p><p>However, because one table name cannot be located on the memory/disk at the same time, if the processing is stored in the memory table and previous processing is stored on the disk on the same day, the table is separated into two, and created in the form of EXEC_TABLE_MEM/EXEC_TABLE_DISK. When querying, it is designed to query each table as much as possible, and if two tables need to be queried at the same time, it can be queried by using UNION All or create a separate view. However, the processing speed when querying two tables separated into a memory and a disk table simultaneously depending on the processing performance of the disk table.</p><h3 id="id-1.ConsiderationswhenDesigning-②ConsiderationsforColumntype">② Considerations for Column type</h3><p>In the case of the numeric type provided by ALTIBASE, a type such as Numeric (9) can be sufficiently expressed as an integer type, but occupies 8 bytes of space. It occupies 4 bytes per record more than integer type. In terms of processing performance, numeric internally incurs the cost of converting back to native type, which is somewhat slower than the integer type.</p><p>It is recommended to the following when selecting a column type.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><strong>Consideration</strong></p></td><td class="confluenceTd"><p><strong>Description</strong></p></td></tr><tr><td class="confluenceTd"><p>Numeric Type</p></td><td class="confluenceTd"><p>1. Consider minimizing the conversion cost of Native ßà Non-Native</p><p>(Native type [Integer, Double, BigInt] is more advantageous in terms of performance)</p><p>2. Double type is selected when the precision of the real type is not required.<br class="atl-forced-newline" />3. If Sum/Avg is used, select Double/BigInt type</p></td></tr><tr><td class="confluenceTd"><p>Date Type</p></td><td class="confluenceTd"><p>If the date-related operation is important, select the Date type. If it is limited to search and comparison operations, select the Char/Varchar type. (Date type is fixed at 8 bytes)</p></td></tr><tr><td class="confluenceTd"><p>Join</p></td><td class="confluenceTd"><p>Consider that the type conversion does not occur if the column is a Join</p></td></tr></tbody></table></div><h3 id="id-1.ConsiderationswhenDesigning-③Inthecaseofreplication,itmusthaveaprimarykey">③ In the case of replication, it must have a primary key</h3><h3 id="id-1.ConsiderationswhenDesigning-④Foreignkeyisnotusedbecauseitdegradestransactionperformance.">④ Foreign key is not used because it degrades transaction performance.</h3><h2 id="id-1.ConsiderationswhenDesigning-Limitationofpartitiontable"><strong>Limitation of partition table</strong></h2><div>For the ALTIBASE partition table (as of version 6.3.1), partitioned local index and non-partitioned global index are supported, and partitioned global index is not supported. Therefore, it is recommended that the partition table uses historical data for the purpose of storage for each month and purports of business because a significant performance decrease occurs when querying in the form that excludes the partition key in the condition clause that queries the entire partition table.</div><div><h2 id="id-1.ConsiderationswhenDesigning-"><strong><br /></strong></h2><h2 id="id-1.ConsiderationswhenDesigning-ConsiderationsforHardwarepreparation"><strong>Considerations for Hardware preparation</strong></h2><p>The hardware-related considerations to the information above are summarized and explained in this section.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="confluenceTd"><p><strong>Consideration</strong></p></td><td class="confluenceTd"><p><strong>Description</strong></p></td></tr><tr><td class="confluenceTd"><p>Replication</p></td><td class="confluenceTd">Because it uses a network, it is recommended that the connection is replicated between the servers by using a separate Giga-bit LAN car or using a private network.<p> </p></td></tr><tr><td class="confluenceTd"><p>Disk</p></td><td class="confluenceTd"><p>When considering backup, in addition to the estimated DB capacity, disk space is required to store more archive log files along with the entire tablespace.</p></td></tr></tbody></table></div><p>In addition, the policy of ALTIBASE for redo log files can be viewed as infinite. It is recommended to allocate enough space on the disk where the redo log files will be stored, as there are cases where it is inevitable to create a large number of redo log files due to bulk change operations because the policy is to create a new redo log file instead of creating reusing redo log files.</p><p>For more detailed information, please refer to the &quot;ALTIBASE Capacity Estimation Guide&quot;.</p><h2 id="id-1.ConsiderationswhenDesigning-NotSupportFeature"><strong>Not Support Feature</strong></h2><div>ALTIBASE complies with the SQL92 standard, but there are some differences compared to other DBMSs.</div><div>For more detailed information, please refer to the technical documents provided for each DBMS vendor. (Example: &quot;ORACLE TO ALTIBASE Conversion Guide&quot;)</div></div><div><strong><br /></strong></div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Jun 23, 2021 09:49</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
